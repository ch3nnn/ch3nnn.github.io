<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="一、为什么选择Hugo 我一直在使用 HEXO 作为我的网站建设工具。最主要的原因在于容易理解，相对比较容易上手，并且有很多齐全的插件供你选择。
首先，第一点得提的就是 Hugo 打出的标语 &ndash; The world’s fastest framework for building websites。 Hugo 依靠 Go 语言进行开发，号称世界上最快的构建网站工具。HUGO 具有快速建站的能力。与其他网站建设工具相比，HUGO 具有更快的启动时间和更快的页面加载速度。这对于需要快速响应的网站来说尤为重要。
正是依赖于 Hugo 快速生成的特点，调试方便成了 Hugo 的第二大特点。基本上我在使用 Markdown 语言进行页面编写处修改的内容可以实时地显示在网页上，而不用再次敲命令生成再预览。
第三点自己也是学习和使用 GO 语言，所以也会有所青睐。
二、安装 Hugo 在 macOS 上安装 Hugo 前置条件需要安装 brew。
Homebrew 是一款适用于 macOS 和 Linux 的免费开源包管理器。
安装 GO 和 Git 可以使用 brew 包管理工具 // 升级 brew brew update && brew upgrade // 安装 Git brew install git // 安装 Go brew install go 安装 Hugo brew 扩展版本： brew install hugo 三、Hugo 快速入门 执行以下命令"><title>浅谈我为什么从 HEXO 迁移到 HUGO</title><link rel="shortcut icon" type=image/x-icon href=/><link rel=stylesheet href=/css/main.df4fc34cbb4964ffc7f5be01c4fd6b3531b8bcd68a132d90d82274e9bebb9847136b10f2dc3bd59d06d68d40882449f7309d5c7a6bc6bb9864605167f3269300.css integrity="sha512-30/DTLtJZP/H9b4BxP1rNTG4vNaKEy2Q2CJ06b67mEcTaxDy3DvVnQbWjUCIJEn3MJ1cemvGu5hkYFFn8yaTAA=="></head><body a=light><main class=page-content aria-label=Content><div class=w><a href=/>..</a><article><p class=post-meta><time datetime="2023-08-30 10:53:08 +0800 +0800">2023-08-30</time></p><h1>浅谈我为什么从 HEXO 迁移到 HUGO</h1><h2 id=一为什么选择hugo>一、为什么选择Hugo</h2><p>我一直在使用 HEXO 作为我的网站建设工具。最主要的原因在于容易理解，相对比较容易上手，并且有很多齐全的插件供你选择。</p><p>首先，第一点得提的就是 Hugo 打出的标语 &ndash; <code>The world’s fastest framework for building websites。</code> Hugo 依靠 Go 语言进行开发，号称世界上最快的构建网站工具。HUGO 具有快速建站的能力。与其他网站建设工具相比，HUGO 具有更快的启动时间和更快的页面加载速度。这对于需要快速响应的网站来说尤为重要。</p><p>正是依赖于 Hugo 快速生成的特点，调试方便成了 Hugo 的第二大特点。基本上我在使用 Markdown 语言进行页面编写处修改的内容可以实时地显示在网页上，而不用再次敲命令生成再预览。</p><p>第三点自己也是学习和使用 GO 语言，所以也会有所青睐。</p><h2 id=二安装-hugo>二、安装 Hugo</h2><p>在 macOS 上安装 Hugo 前置条件需要安装 <code>brew</code>。</p><p><a href=https://brew.sh/>Homebrew</a> 是一款适用于 macOS 和 Linux 的免费开源包管理器。</p><ol><li>安装 GO 和 Git
可以使用 <code>brew</code> 包管理工具<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>// 升级 brew
</span></span><span class=line><span class=cl>brew update <span class=o>&amp;&amp;</span> brew upgrade
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 安装 Git
</span></span><span class=line><span class=cl>brew install git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 安装 Go
</span></span><span class=line><span class=cl>brew install go
</span></span></code></pre></div></li><li>安装 Hugo brew 扩展版本：<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>brew install hugo
</span></span></code></pre></div></li></ol><h2 id=三hugo-快速入门>三、Hugo 快速入门</h2><p>执行以下命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 创建demo目录并初始化网站目录结构</span>
</span></span><span class=line><span class=cl>hugo new site hugo-blog  // 你的博客名称这里以 hugo-blog 为例
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 进入项目</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> hugo-blog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 如果你不会用 git, 就手动的下载主题zip包然后复制到 themes/nostyleplease 并跳过以下两条命令</span>
</span></span><span class=line><span class=cl>git init
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 下载 hugo 的 nostyleplease 主题</span>
</span></span><span class=line><span class=cl>git submodule add https://github.com/Masellum/hugo-theme-nostyleplease themes/nostyleplease
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修改配置文件使用主题</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;theme = &#39;nostyleplease&#39;&#34;</span> &gt;&gt; config.toml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 预览当前网站， --watch参数会让程序不断监听当前目录是否有更新然后实时加载。</span>
</span></span><span class=line><span class=cl>hugo server --watch
</span></span></code></pre></div><h2 id=四使用-github-actions-自动发布-hugo-站点>四、使用 Github Actions 自动发布 Hugo 站点</h2><p>这里使用 *.github.io 仓库维护 build 后的文章仓库。 创建新仓库维护平时文章源代码仓库，因为要同时要维护两个仓库很麻烦，所以借助 Github Actions 自动发布文章。</p><p>首先在博客源文件目录下新建 <code>.github/workflows</code> 文件夹，然后再新建 <code>deploy.yml</code> 脚本。</p><ol><li><p>定义 Github Actions</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master </span><span class=w> </span><span class=c># Set a branch to deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># jobs 是要执行的任务，我们看到他要执行 deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-22.04 </span><span class=w> </span><span class=c># 运行环境</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>concurrency</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.workflow }}-${{ github.ref }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w> </span><span class=c># 执行步骤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 安装 hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 编译</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 创建 CNAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;finnp/create-file-action@master&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>FILE_NAME</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./public/CNAME&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>FILE_DATA</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;blog.ch3nnn.cn&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 将站点发布到对应分支</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.ref == &#39;refs/heads/master&#39; }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>deploy_key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DEPLOY_KEY }} </span><span class=w> </span><span class=c># 上文保存至本仓库secrets中的ssh秘钥变量名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>external_repository</span><span class=p>:</span><span class=w> </span><span class=l>ch3nnn/ch3nnn.github.io</span><span class=w> </span><span class=c># 需要将静态文件推送的仓库名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w> </span><span class=c># 对应目的仓库的目的分支</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w> </span><span class=c># 推送的文件夹，hugo --minify命令会将静态文件生成至./public文件夹中</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>commit_message</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.head_commit.message }}</span><span class=w> </span><span class=c># 指定commit信息</span><span class=w>
</span></span></span></code></pre></div></li><li><p>deploy key 配置</p><p>生成sshkey 用于 Github Actions 推送 Hugo 生成的静态文件至托管仓库</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#  -C 参数指定github用户的邮箱</span>
</span></span><span class=line><span class=cl>ssh-keygen -t rsa -C chenyinren@vip.qq.com
</span></span><span class=line><span class=cl><span class=c1># 以下内容为输出</span>
</span></span><span class=line><span class=cl>Generating public/private rsa key pair.
</span></span><span class=line><span class=cl><span class=c1># 此处输入保存新ssh key的文件路径,不要回车，否则使用默认文件名，会被覆盖。其他地方可一路回车</span>
</span></span><span class=line><span class=cl>Enter file in which to save the key <span class=o>(</span>/Users/chentong/.ssh/id_rsa<span class=o>)</span>: id_rsa_deploy_key
</span></span><span class=line><span class=cl>Enter passphrase <span class=o>(</span>empty <span class=k>for</span> no passphrase<span class=o>)</span>:
</span></span><span class=line><span class=cl>Enter same passphrase again:
</span></span><span class=line><span class=cl>Your identification has been saved in id_rsa_deploy_key
</span></span><span class=line><span class=cl>Your public key has been saved in id_rsa_deploy_key.pub
</span></span><span class=line><span class=cl>The key fingerprint is:
</span></span><span class=line><span class=cl>SHA256:iKKuSQt+jFiZc3UbeSDY………………tYrvgO+FRI7tSE waouooo@163.com
</span></span><span class=line><span class=cl>The key<span class=err>&#39;</span>s randomart image is:
</span></span><span class=line><span class=cl>+---<span class=o>[</span>RSA 3072<span class=o>]</span>----+
</span></span><span class=line><span class=cl><span class=p>|</span>     o           <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>    . o .        <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>     + . oE o    <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>    o.o.<span class=o>=</span> .<span class=o>=</span> o   <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>  .+.o. <span class=nv>S</span><span class=o>=</span>+.o.   <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> .<span class=o>=</span>.o . . <span class=o>=</span>o+..  <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>+o o     o O.  . <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>*o.o      +.+ .  <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>++.       .oo+   <span class=p>|</span>
</span></span><span class=line><span class=cl>+----<span class=o>[</span>SHA256<span class=o>]</span>-----+
</span></span></code></pre></div><p>为了能够将静态博客文件上传至<code>&lt;USERNAME>/&lt;USERNAME>.github.io</code>仓库，需要进行deploy key 的配置。首先在本地生成一对 SSH 密钥，然后将<strong>公钥</strong>配置到<strong>目标仓库</strong>，即在目标仓库的 settings 中添加 deploy key 的公钥。
<img src=https://s2.loli.net/2023/08/30/ZsbPgYVyXvQ2UDu.png alt>
然后在博客源文件的仓库中配置 deploy key 的私钥。从而让 action 脚本可以调用。在仓库的settings中新增 repository secret，将 deploy key 的私钥添加进去。
<img src=https://s2.loli.net/2023/08/30/l2iamRqFc4IGSfy.png alt></p></li></ol></article></div></main></body></html>