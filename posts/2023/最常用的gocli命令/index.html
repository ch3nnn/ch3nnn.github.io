<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="本文将介绍一些最基本的 Go 命令行命令。如果你刚接触 Go 语言，那你有必要记住它们，因为这些命令是 Go 开发者日常工作中所必备的。
Go version
开始 Go 项目前，我们应该确保开发机上已经安装好了 Go 编译器。这可以通过 https://go.dev/doc/install 进行下载安装。
通过执行以下命令可以查看安装的 Go 版本信息。
$ go version
go version go1.18 darwin/amd64
Go env
如果我们可能想查看一些 Go 相关的环境变量，例如 GOROOT 或者 GOPATH。你可以执行这个命令。
$ go env
当你想对某个环境变量进行更改，例如修改 Go 代理，你可以这样做。
$ go env -w GOPROXY=https://goproxy.io,direct
go mod
在你开始建立第一个 Go 程序时，在项目根目录下，你应该运行这样的命令。
$ go mod init <your project name>
例如
$ go mod init demo/firstProject
此时，项目根目录将增加 go.mod 文件，它的内容如下
$ cat go.mod 
module demo/firstProject

go 1.18
如果你有其他语言的经验，那么 go.mod 类似于 Python 中的 requirements.txt，Java 中的 pom.xml，它用于管理项目的依赖包。"><title>这些最常用的 Go CLI 命令，新手 Gopher 应该掌握
</title><link rel="shortcut icon" type=image/x-icon href=/img/icon.png><link rel=stylesheet href=/css/main.df4fc34cbb4964ffc7f5be01c4fd6b3531b8bcd68a132d90d82274e9bebb9847136b10f2dc3bd59d06d68d40882449f7309d5c7a6bc6bb9864605167f3269300.css integrity="sha512-30/DTLtJZP/H9b4BxP1rNTG4vNaKEy2Q2CJ06b67mEcTaxDy3DvVnQbWjUCIJEn3MJ1cemvGu5hkYFFn8yaTAA=="></head><body a=light><main class=page-content aria-label=Content><div class=w><a href=/>..</a><article><p class=post-meta><time datetime="2023-01-02 10:28:19 +0000 UTC">2023-01-02</time></p><h1>这些最常用的 Go CLI 命令，新手 Gopher 应该掌握</h1><p class=post-meta>阅读 </span></span>|<span class=post-date>共197字</span></p><p class=post-meta>预计阅读约: 1 分钟</p><p>本文将介绍一些最基本的 Go 命令行命令。如果你刚接触 Go 语言，那你有必要记住它们，因为这些命令是 Go 开发者日常工作中所必备的。</p><p><strong>Go version</strong></p><p>开始 Go 项目前，我们应该确保开发机上已经安装好了 Go 编译器。这可以通过 <a href=https://go.dev/doc/install>https://go.dev/doc/install</a> 进行下载安装。</p><p>通过执行以下命令可以查看安装的 Go 版本信息。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> version
</span></span><span style=display:flex><span><span style=color:#5317ac>go</span> version go1<span style=color:#0000c0>.18</span> darwin<span style=color:#00538b>/</span>amd64
</span></span></code></pre></div><p><strong>Go env</strong></p><p>如果我们可能想查看一些 Go 相关的环境变量，例如 GOROOT 或者 GOPATH。你可以执行这个命令。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> env
</span></span></code></pre></div><p>当你想对某个环境变量进行更改，例如修改 Go 代理，你可以这样做。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> env <span style=color:#00538b>-</span>w GOPROXY=https:<span style=color:#505050>//goproxy.io,direct</span>
</span></span></code></pre></div><p><strong>go mod</strong></p><p>在你开始建立第一个 Go 程序时，在项目根目录下，你应该运行这样的命令。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> mod init &lt;your project name&gt;
</span></span></code></pre></div><p>例如</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> mod init demo<span style=color:#00538b>/</span>firstProject
</span></span></code></pre></div><p>此时，项目根目录将增加 go.mod 文件，它的内容如下</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ cat <span style=color:#5317ac>go</span>.mod 
</span></span><span style=display:flex><span>module demo<span style=color:#00538b>/</span>firstProject
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5317ac>go</span> <span style=color:#0000c0>1.18</span>
</span></span></code></pre></div><p>如果你有其他语言的经验，那么 go.mod 类似于 Python 中的 requirements.txt，Java 中的 pom.xml，它用于管理项目的依赖包。</p><p><strong>go get</strong></p><p>当项目中有引入外部库，应该执行 go get 命令。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> get &lt;<span style=color:#5317ac>package</span> name&gt;
</span></span></code></pre></div><p>例如我们需要使用日志库 logrus，执行以下命令会将该库源代码下载至 mod cache 中，并将在 go.mod 文件中记录该库的依赖情况。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> get github.com<span style=color:#00538b>/</span>sirupsen<span style=color:#00538b>/</span>logrus
</span></span><span style=display:flex><span>$ cat <span style=color:#5317ac>go</span>.mod 
</span></span><span style=display:flex><span>module demo<span style=color:#00538b>/</span>firstProject
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5317ac>go</span> <span style=color:#0000c0>1.18</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#721045>require</span> (
</span></span><span style=display:flex><span>        github.com<span style=color:#00538b>/</span>sirupsen<span style=color:#00538b>/</span>logrus v1<span style=color:#0000c0>.9.0</span> <span style=color:#505050>// indirect</span>
</span></span><span style=display:flex><span>        golang.org<span style=color:#00538b>/</span>x<span style=color:#00538b>/</span>sys v0<span style=color:#0000c0>.0.0</span><span style=color:#00538b>-</span><span style=color:#0000c0>20220715151400</span><span style=color:#00538b>-</span>c0bba94af5f8 <span style=color:#505050>// indirect</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>go run/build</strong></p><p>当我们已经编写了一些 Go 代码，并希望在本地运行它以查看程序表现是否符合预期。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> run .
</span></span></code></pre></div><p>当然，我们也可以使用 go build 命令。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> build <span style=color:#00538b>-</span>o &lt;name of binary&gt; &lt;packages&gt;
</span></span><span style=display:flex><span>$ .<span style=color:#00538b>/</span>&lt;name of binary&gt;
</span></span></code></pre></div><p>两种命令方式都需要编译的过程，实质并无什么区别。go run只是将编译得到的可执行文件执行后销毁，而 go build 是将可执行文件保留下来，并不直接执行。</p><p><strong>go test</strong></p><p>如果你编写了一堆单元测试代码（在以_test.go 结尾的文件中），你想运行它们，只需要执行以下语句。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> test
</span></span></code></pre></div><p><strong>go mod tidy</strong></p><p>当项目中尝试引入过多个三方包，而其中部分包我们并不需要了，那就应该从代码依赖中删除。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> mod tidy
</span></span></code></pre></div><p><strong>go vet</strong></p><p>当完成了功能开发后，应该使用以下命令来帮助我们检测程序中可能存在问题的代码。更多 vet 知识可以查看文章Go工具之vet——静态诊断器。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span>$ <span style=color:#5317ac>go</span> vet
</span></span></code></pre></div><p><strong>go fmt</strong></p><p>当完成了功能开发，准备提交代码到公共仓库。我们应该确保项目代码遵循统一的官方代码风格。</p><div class=highlight><pre tabindex=0 style=color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-shell data-lang=shell><span style=display:flex><span>$ go fmt
</span></span></code></pre></div><p>当然更好的方式其实是使用检查套件，具体可以参见文章Gopher一定要会的代码自动化检查。</p><p><strong>总结</strong></p><p>Go 提供了非常多简单又实用的命令行工具，本文仅介绍了一些在项目开发中最可能被用到的命令。</p><p>想获取更多 Go 命令？可以执行 $ go 或者 $ go tool 获取命令列表，执行 go help 可了解特定命令的更多信息。</p></article></div></main></body></html>