

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filebeatè½»é‡å‹æ—¥å¿—é‡‡é›†å™¨åŠoutputæ’ä»¶å¼€å‘ [ Ch3nnnä¸ªäººåšå®¢ ]</title>

  <link rel="icon" href="/img/favicon.ico">


    <meta name="author" content="Ch3nnn">


    <meta name="subtitle" content="Ch3nnn ä¸ªäººåšå®¢ | æŠ˜è…¾ä¸æ¯ Â· ä¹æ­¤ä¸ç–².">


    <meta name="Description" content="å°ç«™ä¸»è¦ç”¨æ¥åˆ†äº«å’Œè®°å½•å­¦ä¹ ç»éªŒ,æ•™ç¨‹,è®°å½•ä¸ªäººç”Ÿæ´»çš„ç‚¹æ»´ä»¥åŠä¸€äº›éšç¬”.">


    <meta name="keywords" content=",linux, nginx, mysql, æœåŠ¡å™¨, ubuntu, shell, web, mac, python, django, es">


  <link rel="alternate" href="/feed.xml " title="Ch3nnnä¸ªäººåšå®¢" type="application/atom+xml">


  
    <link rel="stylesheet" href="/css/main.css">
  


<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

<meta name="generator" content="Hexo 6.3.0"></head>
  <body data-theme="light" class="notransition">
    <script>
      const body = document.body;
      const data = body.getAttribute("data-theme");
      const initTheme = (state) => {
        if (state === "dark") {
          body.setAttribute("data-theme", "dark");
        } else if (state === "light") {
          body.removeAttribute("data-theme");
        } else {
          localStorage.setItem("theme", data);
        }
      };
   
      initTheme(localStorage.getItem("theme"));
      
      setTimeout(() => body.classList.remove("notransition"), 75);
    </script>
  <div class="navbar" role="navigation">
    <nav class="menu">
      <input type="checkbox" id="menu-trigger" class="menu-trigger" />
      <label for="menu-trigger">
        <span class="menu-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 512 512"
          >
            <path
              d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
            />
          </svg>
        </span>
      </label>
      <a id="mode">
        <svg
          class="mode-sunny"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>LIGHT</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
        <svg
          class="mode-moon"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>DARK</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
      </a>
      <div class="trigger">
        <div class="trigger-container">
          
            
            
            
            
            
            
            <a class="menu-link " href="/"> Home ğŸ </a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/about/"> About ğŸ‘¨â€ğŸ’»</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/archives/"> Archives ğŸ“†</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/tags/"> Tags ğŸ·ï¸</a>
          
              <a class="menu-link" href="/feed.xml"><svg
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="17"
            viewBox="0 0 512 512"
            fill="#ED812E"
          >
            <title>RSS</title>
            <path
              d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z"
            />
            <path
              d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z"
            />
            <path
              d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z"
            />
          </svg></a>
        </div>
      </div>
    </nav>
  </div>

  
<div class="wrapper post">
  <main class="page-content" aria-label="Content">
      <header class="header">
        
          <div class="tags">
            <a href="/tags/Go/" class="tag"># Go</a><a href="/tags/Filebeat/" class="tag"># Filebeat</a>
          </div>
        
        <h1 class="header-title" itemprop="headline">Filebeatè½»é‡å‹æ—¥å¿—é‡‡é›†å™¨åŠoutputæ’ä»¶å¼€å‘</h1>
          <div class="post-meta">
            <time>1æœˆ 09, 2023</time>
            <span itemprop="author">
              <span itemprop="name">Ch3nnn</span>
            </span>
          </div>
        </header>

          <div class="page-content"><blockquote>
<p>æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯ OT è¿›è¡Œæ•°æ®æ”¶é›†ï¼ŒFilebeat éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚</p>
</blockquote>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Filebeat æ˜¯ä½¿ç”¨ Golang å®ç°çš„è½»é‡å‹æ—¥å¿—é‡‡é›†å™¨ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª agent ï¼Œå¯ä»¥å®‰è£…åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®é…ç½®è¯»å–å¯¹åº”ä½ç½®çš„æ—¥å¿—ï¼Œå¹¶ä¸ŠæŠ¥åˆ°ç›¸åº”çš„åœ°æ–¹å»ã€‚</p>
<h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><p>Filebeat å¹¶ä¸ä¾èµ–äº ElasticSearchï¼Œå¯ä»¥å•ç‹¬å­˜åœ¨ã€‚æˆ‘ä»¬å¯ä»¥å•ç‹¬ä½¿ç”¨Filebeatè¿›è¡Œæ—¥å¿—çš„ä¸ŠæŠ¥å’Œæœé›†ã€‚filebeat å†…ç½®äº†å¸¸ç”¨çš„ Output ç»„ä»¶, ä¾‹å¦‚ kafkaã€ElasticSearchã€redis ç­‰ï¼Œå‡ºäºè°ƒè¯•è€ƒè™‘ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºåˆ° console å’Œ file ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç°æœ‰çš„ Output ç»„ä»¶ï¼Œå°†æ—¥å¿—è¿›è¡Œä¸ŠæŠ¥ã€‚</p>
<h3 id="æ•´ä½“å·¥ä½œåŸç†"><a href="#æ•´ä½“å·¥ä½œåŸç†" class="headerlink" title="æ•´ä½“å·¥ä½œåŸç†"></a>æ•´ä½“å·¥ä½œåŸç†</h3><p>Filebeat ç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼šharvester å’Œ prospectorã€‚</p>
<ul>
<li>harvester (é‡‡é›†å™¨) çš„ä¸»è¦èŒè´£æ˜¯è¯»å–å•ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚è¯»å–æ¯ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹å‘é€åˆ° the outputã€‚ æ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterï¼Œharvester è´Ÿè´£æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶æ–‡ä»¶æè¿°ç¬¦ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚å¦‚æœæ–‡ä»¶åœ¨è¯»å–æ—¶è¢«åˆ é™¤æˆ–é‡å‘½åï¼ŒFilebeat å°†ç»§ç»­è¯»å–æ–‡ä»¶ã€‚</li>
<li>prospector (æŸ¥æ‰¾å™¨) çš„ä¸»è¦èŒè´£æ˜¯ç®¡ç† harvester å¹¶æ‰¾åˆ°æ‰€æœ‰è¦è¯»å–çš„æ–‡ä»¶æ¥æºã€‚å¦‚æœè¾“å…¥ç±»å‹ä¸ºæ—¥å¿—ï¼Œåˆ™æŸ¥æ‰¾å™¨å°†æŸ¥æ‰¾è·¯å¾„åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterã€‚æ¯ä¸ª prospector éƒ½åœ¨è‡ªå·±çš„ Go åç¨‹ä¸­è¿è¡Œã€‚<blockquote>
<p><em>æ³¨ï¼šFilebeat prospectoråªèƒ½è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œ æ²¡æœ‰åŠŸèƒ½å¯ä»¥è¿æ¥åˆ°è¿œç¨‹ä¸»æœºæ¥è¯»å–å­˜å‚¨çš„æ–‡ä»¶æˆ–æ—¥å¿—ã€‚</em></p>
</blockquote>
</li>
</ul>
<p>ç”±ä»¥ä¸Šä¸¤ä¸ªç»„ä»¶ä¸€èµ·å·¥ä½œæ¥è¯»å–æ–‡ä»¶ï¼ˆtail fileï¼‰å¹¶å°†äº‹ä»¶æ•°æ®å‘é€åˆ°æŒ‡å®šçš„è¾“å‡ºã€‚<br>ä¸‹å›¾æ˜¯ Filebeat å®˜æ–¹æä¾›çš„æ¶æ„å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/ch3nnn/picgo/blog/imgs20230109163928.png"></p>
<h4 id="FilebeatèƒŒåçš„â€œè€å¤§â€"><a href="#FilebeatèƒŒåçš„â€œè€å¤§â€" class="headerlink" title="FilebeatèƒŒåçš„â€œè€å¤§â€"></a>FilebeatèƒŒåçš„â€œè€å¤§â€</h4><p>è¯´åˆ°Filebeatï¼Œå®ƒå…¶å®åªæ˜¯<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://github.com/elastic/beats/tree/master/libbeat">beatså®¶æ—</a>ä¼—å¤šæˆå‘˜ä¸­çš„ä¸€ä¸ªã€‚é™¤äº†Filebeat, è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„beatå°ä¼™ä¼´ï¼š</p>
<table>
<thead>
<tr>
<th>beat</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td>Filebeat</td>
<td>æ”¶é›†æ—¥å¿—æ–‡ä»¶</td>
</tr>
<tr>
<td>Metricbeat</td>
<td>æ”¶é›†å„ç§æŒ‡æ ‡æ•°æ®</td>
</tr>
<tr>
<td>Packetbeat</td>
<td>æ”¶é›†ç½‘ç»œæ•°æ®åŒ…</td>
</tr>
<tr>
<td>Auditbeat</td>
<td>æ”¶é›†å®¡è®¡æ•°æ®</td>
</tr>
<tr>
<td>Heartbeat</td>
<td>æ”¶é›†æœåŠ¡è¿è¡ŒçŠ¶æ€ç›‘æµ‹æ•°æ®</td>
</tr>
<tr>
<td>â€¦</td>
<td>â€¦</td>
</tr>
</tbody></table>
<p>å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§beatçš„è§„èŒƒæ¥å†™è‡ªå·±çš„beatã€‚<br>èƒ½å®ç°ä»¥ä¸Šè¿™äº›beatï¼Œéƒ½ç¦»ä¸å¼€beatså®¶æ—çœŸæ­£çš„â€œè€å¤§â€â€”â€” libbeatï¼Œ å®ƒæ˜¯beatä½“ç³»çš„æ ¸å¿ƒåº“ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹libbeatåˆ°åº•éƒ½ä½œäº†äº›ä»€ä¹ˆ</p>
<ul>
<li>libbeatæä¾›äº†publisherç»„ä»¶ï¼Œç”¨äºå¯¹æ¥inputï¼›</li>
<li>æ”¶é›†åˆ°çš„æ•°æ®åœ¨è¿›å…¥åˆ°libbeatåï¼Œé¦–å…ˆä¼šç»è¿‡å„ç§ processorçš„åŠ å·¥å¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤æ·»åŠ å­—æ®µï¼Œå¤šè¡Œåˆå¹¶ç­‰ç­‰ï¼›</li>
<li>inputç»„ä»¶é€šè¿‡publisherç»„ä»¶å°†æ”¶é›†åˆ°çš„æ•°æ®æ¨é€åˆ°publisherå†…éƒ¨çš„é˜Ÿåˆ—ï¼›</li>
<li>libbeatæœ¬èº«å®ç°äº†å‰é¢ä»‹ç»è¿‡çš„å¤šç§output, å› æ­¤å®ƒè´Ÿè´£å°†å¤„ç†å¥½çš„æ•°æ®é€šè¿‡outputç»„ä»¶å‘é€å‡ºå»ï¼›</li>
<li>libbeatæœ¬èº«å°è£…äº†retryçš„é€»è¾‘ï¼›</li>
<li>libbeatè´Ÿè´£å°†ACKåé¦ˆé€šè¿‡åˆ°inputç»„ä»¶ ï¼›</li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œå¤§éƒ¨åˆ†æ´»å„¿éƒ½æ˜¯libbeatæ¥ä½œï¼Œå½“â€œè€å¤§â€ä¸å®¹æ˜“å•Šï½ã€‚<br>inputä»…éœ€è¦ä½œä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ä»ä¸åŒçš„ä»‹è´¨ä¸­æ”¶é›†æ•°æ®åæŠ•é€’ç»™libbeat;</li>
<li>æ¥æ”¶libbeatåé¦ˆå›æ¥çš„ACK, ä½œç›¸åº”çš„æŒä¹…åŒ–;</li>
</ul>
<h2 id="å®‰è£…ä¸ä½¿ç”¨"><a href="#å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="å®‰è£…ä¸ä½¿ç”¨"></a>å®‰è£…ä¸ä½¿ç”¨</h2><p>Filebeat åŸºäº Go è¯­è¨€å¼€å‘æ— å…¶ä»–ä¾èµ–ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ€§èƒ½ç¨³å®šã€é…ç½®ç®€å•ã€å ç”¨ç³»ç»Ÿèµ„æºå¾ˆå°‘ï¼Œå®‰è£…ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå¯è®¿é—® Elastic-Beats å®˜ç½‘è·å–å„ç‰ˆæœ¬ Filebeatã€‚å› ä¸º Filebeat å„ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚è¾ƒå¤§ï¼Œè¿™é‡Œæ¨è7ä»¥ä¸Šçš„æ–°ç‰ˆï¼Œé¦–å…ˆè¿›è¡Œä¸‹è½½è§£å‹ï¼š<br>tar -zxvf filebeat-7.tar.gz mv filebeat-7 filebeat cd filebeat</p>
<h3 id="FileBeatå¯åœæŒ‡ä»¤ï¼š"><a href="#FileBeatå¯åœæŒ‡ä»¤ï¼š" class="headerlink" title="FileBeatå¯åœæŒ‡ä»¤ï¼š"></a>FileBeatå¯åœæŒ‡ä»¤ï¼š</h3><ul>
<li>è°ƒè¯•æ¨¡å¼ä¸‹é‡‡ç”¨ï¼šç»ˆç«¯å¯åŠ¨ï¼ˆé€€å‡ºç»ˆç«¯æˆ– ctrl+c ä¼šé€€å‡ºè¿è¡Œï¼‰</li>
</ul>
<p><code>./filebeat -e -c filebeat.yml</code></p>
<ul>
<li>çº¿ä¸Šç¯å¢ƒé…åˆ error çº§åˆ«ä½¿ç”¨ï¼šä»¥åå°å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨å¯åŠ¨ filebeats</li>
</ul>
<p><code>nohup ./filebeat -e -c filebeat.yml &amp;</code></p>
<ul>
<li>é›¶è¾“å‡ºå¯åŠ¨ï¼ˆä¸æ¨èï¼‰ï¼šå°†æ‰€æœ‰æ ‡å‡†è¾“å‡ºåŠæ ‡å‡†é”™è¯¯è¾“å‡ºåˆ°&#x2F;dev&#x2F;nullç©ºè®¾å¤‡ï¼Œå³æ²¡æœ‰ä»»ä½•è¾“å‡ºä¿¡æ¯ã€‚</li>
</ul>
<p><code>nohup ./filebeat -e -c filebeat.yml &gt;/dev/null 2&gt;&amp;1 &amp;</code></p>
<ul>
<li>åœæ­¢è¿è¡Œ FileBeat è¿›ç¨‹</li>
</ul>
<p><code>ps -ef | grep filebeat Kill -9 çº¿ç¨‹å·</code></p>
<h3 id="FileBeaté…ç½®æ–‡ä»¶"><a href="#FileBeaté…ç½®æ–‡ä»¶" class="headerlink" title="FileBeaté…ç½®æ–‡ä»¶"></a>FileBeaté…ç½®æ–‡ä»¶</h3><p>FileBeat çš„é…ç½®æ–‡ä»¶å®šä¹‰äº†åœ¨è¯»å–æ–‡ä»¶çš„ä½ç½®ï¼Œè¾“å‡ºæµçš„ä½ç½®ä»¥åŠç›¸åº”çš„æ€§èƒ½å‚æ•°ï¼Œæœ¬å®ä¾‹æ˜¯ä»¥ Kafka æ¶ˆæ¯ä¸­é—´ä»¶ä½œä¸ºç¼“å†²ï¼Œæ‰€æœ‰çš„æ—¥å¿—æ”¶é›†å™¨éƒ½å‘ Kafka è¾“é€æ—¥å¿—æµï¼Œç›¸åº”çš„é…ç½®é¡¹å¦‚ä¸‹ï¼Œå¹¶é™„é…ç½®è¯´æ˜ï¼š</p>
<p>filebeat.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">filebeat.inputs:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">log</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/wls/applogs/rtlog/app.log</span></span><br><span class="line">  <span class="attr">fields:</span> </span><br><span class="line">    <span class="attr">log_topic:</span> <span class="string">appName</span></span><br><span class="line">  <span class="attr">multiline:</span></span><br><span class="line">        <span class="comment"># pattern for error log, if start with space or cause by </span></span><br><span class="line">        <span class="attr">pattern:</span> <span class="string">&#x27;^[[:space:]]+(at|\.&#123;3&#125;)\b|^Caused by:&#x27;</span></span><br><span class="line">        <span class="attr">negate:</span>  <span class="literal">false</span></span><br><span class="line">        <span class="attr">match:</span>   <span class="string">after</span></span><br><span class="line"></span><br><span class="line"><span class="attr">output.kafka:</span></span><br><span class="line">   <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">hosts:</span> [<span class="string">&quot;kafka-1:9092&quot;</span>,<span class="string">&quot;kafka-2:9092&quot;</span>]</span><br><span class="line">   <span class="attr">topic:</span> <span class="string">applog</span></span><br><span class="line">   <span class="attr">version:</span> <span class="string">&quot;0.10.2.0&quot;</span></span><br><span class="line">   <span class="attr">compression:</span> <span class="string">gzip</span></span><br><span class="line"></span><br><span class="line"><span class="attr">processors:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">drop_fields:</span> </span><br><span class="line">   <span class="attr">fields:</span> [<span class="string">&quot;beat&quot;</span>, <span class="string">&quot;input&quot;</span>, <span class="string">&quot;source&quot;</span>, <span class="string">&quot;offset&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">logging.level:</span> <span class="string">error</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">app-server-ip</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>paths</strong>:å®šä¹‰äº†æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥é‡‡ç”¨æ¨¡ç³ŠåŒ¹é…æ¨¡å¼ï¼Œå¦‚*.log</li>
<li><strong>fields</strong>ï¼štopic å¯¹åº”çš„æ¶ˆæ¯å­—æ®µæˆ–è‡ªå®šä¹‰å¢åŠ çš„å­—æ®µã€‚</li>
<li><strong>output.kafka</strong>ï¼šfilebeat æ”¯æŒå¤šç§è¾“å‡ºï¼Œæ”¯æŒå‘ kafkaï¼Œlogstashï¼Œelasticsearch è¾“å‡ºæ•°æ®ï¼Œæ­¤å¤„è®¾ç½®æ•°æ®è¾“å‡ºåˆ° kafkaã€‚</li>
<li><strong>enabled</strong>ï¼šè¿™ä¸ªå¯åŠ¨è¿™ä¸ªæ¨¡å—ã€‚</li>
<li><strong>topic</strong>ï¼šæŒ‡å®šè¦å‘é€æ•°æ®ç»™ kafka é›†ç¾¤çš„å“ªä¸ª topicï¼Œè‹¥æŒ‡å®šçš„ topic ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºæ­¤ topicã€‚</li>
<li><strong>version</strong>ï¼šæŒ‡å®š kafka çš„ç‰ˆæœ¬ã€‚</li>
<li><strong>drop_fields</strong>ï¼šèˆå¼ƒå­—æ®µï¼Œfilebeat ä¼š json æ—¥å¿—ä¿¡æ¯ï¼Œé€‚å½“èˆå¼ƒæ— ç”¨å­—æ®µèŠ‚çœç©ºé—´èµ„æºã€‚</li>
<li><strong>name</strong>ï¼šæ”¶é›†æ—¥å¿—ä¸­å¯¹åº”ä¸»æœºçš„åå­—ï¼Œ<strong>å»ºè®® name è¿™é‡Œè®¾ç½®ä¸º IP</strong>ï¼Œä¾¿äºåŒºåˆ†å¤šå°ä¸»æœºçš„æ—¥å¿—ä¿¡æ¯ã€‚</li>
</ul>
<p>ä»¥ä¸Šå‚æ•°ä¿¡æ¯ï¼Œéœ€è¦ç”¨æˆ·ä¸ªæ€§åŒ–ä¿®æ”¹çš„ä¸»è¦æ˜¯ï¼špathsï¼Œhostsï¼Œtopicï¼Œversion å’Œ nameã€‚</p>
<h3 id="Filebeat-input-é…ç½®çƒ­åŠ è½½"><a href="#Filebeat-input-é…ç½®çƒ­åŠ è½½" class="headerlink" title="Filebeat input é…ç½®çƒ­åŠ è½½"></a>Filebeat input é…ç½®çƒ­åŠ è½½</h3><p>filebeat.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">filebeat.config.inputs:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">../configs/input*.yml</span></span><br><span class="line">  <span class="attr">reload.enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">reload.period:</span> <span class="string">5s</span></span><br><span class="line"></span><br><span class="line"><span class="attr">output.syslog:</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">tcp</span></span><br><span class="line">  <span class="attr">addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:5140</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">tag</span></span><br><span class="line"></span><br><span class="line"><span class="attr">fields:</span></span><br><span class="line">  <span class="attr">prober_id:</span> <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>input.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">log</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/Users/chentong/project/log-prober-go/prober-filebeat/cmd/filebeat/example.log</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Filebeat-å†™å…¥-kafka-ç¤ºä¾‹"><a href="#Filebeat-å†™å…¥-kafka-ç¤ºä¾‹" class="headerlink" title="Filebeat å†™å…¥ kafka ç¤ºä¾‹"></a>Filebeat å†™å…¥ kafka ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">filebeat.inputs:</span><br><span class="line">    - type: log</span><br><span class="line">      paths:</span><br><span class="line">        - /var/log/*.log</span><br><span class="line">        - /Users/chentong/project/log-prober-go/logs/app.log</span><br><span class="line">output.kafka:</span><br><span class="line">    hosts:</span><br><span class="line">        - 127.0.0.1:9092</span><br><span class="line">    topic: test_filebeat</span><br><span class="line">    keep_alive: 10s</span><br><span class="line">fields:</span><br><span class="line">    prober_id: 999</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Filebeat-output-syslogæ’ä»¶å¼€å‘"><a href="#Filebeat-output-syslogæ’ä»¶å¼€å‘" class="headerlink" title="Filebeat output syslogæ’ä»¶å¼€å‘"></a>Filebeat output syslogæ’ä»¶å¼€å‘</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><blockquote>
<p>filebeat è‡ªå¸¦åªæ”¯æŒ esã€logstashã€kafkaã€redisã€fileã€console æ•°æ®è¾“å‡º. éœ€è¦è‡ªå®šä¹‰è¾“å‡º syslog </p>
</blockquote>
<h3 id="å·¥ç¨‹æ­å»º"><a href="#å·¥ç¨‹æ­å»º" class="headerlink" title="å·¥ç¨‹æ­å»º"></a>å·¥ç¨‹æ­å»º</h3><h4 id="å¼•å…¥å¯¹beatçš„ä¾èµ–"><a href="#å¼•å…¥å¯¹beatçš„ä¾èµ–" class="headerlink" title="å¼•å…¥å¯¹beatçš„ä¾èµ–"></a>å¼•å…¥å¯¹<code>beat</code>çš„ä¾èµ–</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get github.com/elastic/beats/v7</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰åœ¨filebeatä¸­çš„é…ç½®æ–‡ä»¶<br><code>filebeat</code>é€šå¸¸ä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼åŠ è½½æ’ä»¶ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸‹å¿…é¡»çš„é…ç½®ï¼Œå°±åƒ<code>elasticsearch</code>ä¸­çš„è¿æ¥åœ°å€ç­‰ç­‰ä¸€æ ·ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">output.syslog:</span></span><br><span class="line">  <span class="comment"># æ¥æ”¶æ–¹å¼</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">tcp</span>   </span><br><span class="line">  <span class="comment"># syslog åœ°å€</span></span><br><span class="line">  <span class="attr">addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:5140</span></span><br><span class="line">  <span class="comment"># è‡ªå®šä¹‰æ¶ˆæ¯tag</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">tag</span></span><br></pre></td></tr></table></figure>
<h4 id="goæ–‡ä»¶ä¸­çš„é…ç½®"><a href="#goæ–‡ä»¶ä¸­çš„é…ç½®" class="headerlink" title="goæ–‡ä»¶ä¸­çš„é…ç½®"></a>goæ–‡ä»¶ä¸­çš„é…ç½®</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> syslogConfig <span class="keyword">struct</span> &#123;</span><br><span class="line">	Network <span class="type">string</span> <span class="string">`config:&quot;network&quot;`</span></span><br><span class="line">	Addr    <span class="type">string</span> <span class="string">`config:&quot;addr&quot;`</span></span><br><span class="line">	Tag     <span class="type">string</span> <span class="string">`config:&quot;tag&quot;`</span></span><br><span class="line">	<span class="comment">// å‘å¸ƒæ—¥å¿—äº‹ä»¶çš„ worker goroutines æ•°é‡</span></span><br><span class="line">	Workers <span class="type">int</span> <span class="string">`config:&quot;workers&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line">	<span class="comment">// Max number of events in a batch to send to a single client</span></span><br><span class="line">	BatchSize <span class="type">int</span> <span class="string">`config:&quot;batch_size&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line">	<span class="comment">// Max number of retries for single batch of events</span></span><br><span class="line">	RetryLimit <span class="type">int</span> <span class="string">`config:&quot;retry_limit&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–åŠ è½½æ’ä»¶"><a href="#åˆå§‹åŒ–åŠ è½½æ’ä»¶" class="headerlink" title="åˆå§‹åŒ–åŠ è½½æ’ä»¶"></a>åˆå§‹åŒ–åŠ è½½æ’ä»¶</h4><h4 id="åŠ è½½æ’ä»¶"><a href="#åŠ è½½æ’ä»¶" class="headerlink" title="åŠ è½½æ’ä»¶"></a>åŠ è½½æ’ä»¶</h4><p>åœ¨æŸä¸ªinitå‡½æ•°ä¸­æ³¨å†Œæ’ä»¶</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	outputs.RegisterType(<span class="string">&quot;syslog&quot;</span>, newSyslogOutPut)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>newSyslogOutPut</code>ä¸­å¸è½½é…ç½®ï¼Œå¹¶æä¾›é…ç½®ç»™<code>Syslog</code>å®¢æˆ·ç«¯</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newSyslogOutPut</span><span class="params">(_ outputs.IndexManager, _ beat.Info, stats outputs.Observer, cfg *common.Config)</span></span> (outputs.Group, <span class="type">error</span>) &#123;</span><br><span class="line">	config := syslogConfig&#123;Workers: <span class="number">1</span>, BatchSize: <span class="number">1</span>, RetryLimit: <span class="number">1</span>&#125;</span><br><span class="line">	<span class="keyword">if</span> err := cfg.Unpack(&amp;config); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> outputs.Fail(err)</span><br><span class="line">	&#125;</span><br><span class="line">	clients := <span class="built_in">make</span>([]outputs.NetworkClient, config.Workers)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; config.Workers; i++ &#123;</span><br><span class="line">		clients[i] = &amp;SyslogClient&#123;</span><br><span class="line">			network: config.Network,</span><br><span class="line">			addr:    config.Addr,</span><br><span class="line">			tag:     config.Tag,</span><br><span class="line">			stats:   stats,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> outputs.SuccessNet(<span class="literal">true</span>, config.BatchSize, config.RetryLimit, clients)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–syslogå®¢æˆ·ç«¯"><a href="#åˆå§‹åŒ–syslogå®¢æˆ·ç«¯" class="headerlink" title="åˆå§‹åŒ–syslogå®¢æˆ·ç«¯"></a>åˆå§‹åŒ–<code>syslog</code>å®¢æˆ·ç«¯</h4><p><code>syslog</code>å®¢æˆ·ç«¯ä¸ä»…ä»…æ˜¯ä¸€ä¸ª<code>syslog</code>å®¢æˆ·ç«¯ï¼Œè€Œä¸”è¿˜éœ€è¦å®ç°<code>filebeat</code>ä¸­çš„<code>NetworkClient</code>æ¥å£ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥å…³æ³¨æ¥å£ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•çš„ä½œç”¨åŠå®ç°</p>
<h3 id="String-æ¥å£"><a href="#String-æ¥å£" class="headerlink" title="String()æ¥å£"></a>String()æ¥å£</h3><p><code>String</code>ä½œä¸ºå®¢æˆ·ç«¯çš„åå­—ï¼Œç”¨æ¥æ ‡è¯†æ—¥å¿—ä»¥åŠæŒ‡æ ‡ã€‚æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªæ¥å£</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Connect-æ¥å£"><a href="#Connect-æ¥å£" class="headerlink" title="Connect()æ¥å£"></a>Connect()æ¥å£</h3><p><code>Connect</code>ç”¨æ¥åˆå§‹åŒ–å®¢æˆ·ç«¯</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Connect() <span class="type">error</span> &#123;</span><br><span class="line">	dial, err := gsyslog.DialLogger(c.network, c.addr, gsyslog.LOG_NOTICE, <span class="string">&quot;LOCAL0&quot;</span>, c.tag)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	c.client = dial</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œè¿™é‡Œåˆå§‹åŒ–å¤±è´¥ï¼Œéœ€è¦<code>Sleep</code>ä¸€æ®µæ—¶é—´ï¼Œå¦åˆ™ï¼Œfilebeatä¼šä¸€ç›´é‡è¯•ã€‚è¿™ç»éæ˜¯ä½ æƒ³è¦çš„ã€‚æˆ–è®¸å¯¹äºåœºæ™¯æ¥è¯´ï¼Œé€€é¿é‡è¯•å¯èƒ½ä¼šæ›´å¥½</p>
<h3 id="Close-æ¥å£"><a href="#Close-æ¥å£" class="headerlink" title="Close()æ¥å£"></a>Close()æ¥å£</h3><p>å…³é—­å®¢æˆ·ç«¯ï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„æ¥å£</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Close() <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> c.client.Close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Publish-æ¥å£"><a href="#Publish-æ¥å£" class="headerlink" title="Publish()æ¥å£"></a>Publish()æ¥å£</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Publish(_ context.Context, batch publisher.Batch) <span class="type">error</span> &#123;</span><br><span class="line">	events := batch.Events()</span><br><span class="line">	<span class="comment">// è®°å½•è¿™æ‰¹æ—¥å¿—</span></span><br><span class="line">	c.stats.NewBatch(<span class="built_in">len</span>(events))</span><br><span class="line">	retryEvents, err := c.PublishEvents(events)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">// å‘é€å¤±è´¥ï¼Œåˆ™é‡è¯• å—RetryLimitçš„é™åˆ¶</span></span><br><span class="line">		batch.RetryEvents(retryEvents)</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		c.stats.Acked(<span class="built_in">len</span>(events))</span><br><span class="line">		batch.ACK()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‘å¸ƒ syslog æ•°æ®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> PublishEvents(events []publisher.Event) ([]publisher.Event, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">for</span> i, event := <span class="keyword">range</span> events &#123;</span><br><span class="line">		message, err := event.Content.Fields.GetValue(<span class="string">&quot;message&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> events[i:], err</span><br><span class="line">		&#125;</span><br><span class="line">		m, ok := message.(<span class="type">string</span>)</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			<span class="keyword">return</span> events[i:], errors.New(<span class="string">&quot;cast log to str failed&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// syslog å‘é€æ•°æ®</span></span><br><span class="line">		_, err = c.client.Write([]<span class="type">byte</span>(m))</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> events[i:], err</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€åæ˜¯SyslogClient"><a href="#æœ€åæ˜¯SyslogClient" class="headerlink" title="æœ€åæ˜¯SyslogClient"></a>æœ€åæ˜¯<code>SyslogClient</code></h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> SyslogClient <span class="keyword">struct</span> &#123;</span><br><span class="line">	network <span class="type">string</span></span><br><span class="line">	addr    <span class="type">string</span></span><br><span class="line">	tag     <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	stats  outputs.Observer</span><br><span class="line">	client gsyslog.Syslogger</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



</div>
          <nav class="post-nav">
    
    <a class="post-nav-item post-nav-prev" href="/2023/01/09/Golang-%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/">
      <div class="nav-arrow">&lt;&nbsp;NEWER</div>
      <span class="post-title">Golang:å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’</span>
    </a>
    
    
    <a class="post-nav-item post-nav-next" href="/2023/01/02/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84GoCLI%E5%91%BD%E4%BB%A4/">
      <div class="nav-arrow">OLDER&nbsp;&gt;</div>
      <span class="post-title">è¿™äº›æœ€å¸¸ç”¨çš„ Go CLI å‘½ä»¤ï¼Œæ–°æ‰‹ Gopher åº”è¯¥æŒæ¡</span>
    </a>
    
  </nav>
          <div class="dis">
    
        <div class="btn" id="comments-btn">ç»™æˆ‘ç•™è¨€</div>
      
     
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
    <div id="waline"></div>
    <script>
        window.onload = function () {
            var loadWaline = function () {
                new Waline({
                el: '#waline',
                path: location.pathname,
                avatarCDN: '',
                serverURL: 'comment-vercel.ch3nnn.cn',
                avatar: 'monsterid',
                placeholder: "Let me know what you thinkï¼"
            });
            }
            if (true) {
                document.getElementById("comments-btn").onclick=function(){
                    document.getElementById("comments-btn").style.display="none";
                    loadWaline();
		    }} else {
            loadWaline();
            }
        };
    </script>


  </div>

   </main>
</div>

  <footer class="footer">
    <small class="footer_copyright">
      <div id="bottom-inner">
        Â© 2021 Site by Ch3nnn using
        <a target="_blank" rel="noopener" href="http://hexo.io">Hexo Blog Framework</a>.
        <br>
        <span> Theme is <a target="_blank" rel="noopener" href="https://github.com/dewjohn/hexo-theme-klise">Klise</a></span>
        |
        <span id="busuanzi_container_site_pv">
          Total view <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> times
        </span>
      </div>
      <!-- å¤‡æ¡ˆä¸»ä½“-->
      <a href="https://beian.miit.gov.cn/" rel="nofollow" target="_blank">
            <p style=" height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">
                äº¬ICPå¤‡19017311å·
            </p>
        </a>
    </small>
  </footer>

  

    
      <script src="/js/main.js"></script>
    
  
  <script>
    window.FPConfig = {
      delay: 0,
      ignoreKeywords: [],
      maxRPS: 3,
      hoverDelay: 50,
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>
  <!-- ä¸è’œå­è®¡æ•°å™¨ http://busuanzi.ibruce.info/  -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>
</html>
