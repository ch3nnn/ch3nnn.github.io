

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golang-è¯­è¨€æºç çº§è°ƒè¯•å™¨ Delve [ Ch3nnnä¸ªäººåšå®¢ ]</title>

  <link rel="icon" href="/img/favicon.ico">


    <meta name="author" content="Ch3nnn">


    <meta name="subtitle" content="Ch3nnn ä¸ªäººåšå®¢ | æŠ˜è…¾ä¸æ¯ Â· ä¹æ­¤ä¸ç–².">


    <meta name="Description" content="å°ç«™ä¸»è¦ç”¨æ¥åˆ†äº«å’Œè®°å½•å­¦ä¹ ç»éªŒ,æ•™ç¨‹,è®°å½•ä¸ªäººç”Ÿæ´»çš„ç‚¹æ»´ä»¥åŠä¸€äº›éšç¬”.">


    <meta name="keywords" content=",linux, nginx, mysql, æœåŠ¡å™¨, ubuntu, shell, web, mac, python, django, es">


  <link rel="alternate" href="/feed.xml " title="Ch3nnnä¸ªäººåšå®¢" type="application/atom+xml">


  
    <link rel="stylesheet" href="/css/main.css">
  


<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

<meta name="generator" content="Hexo 6.3.0"></head>
  <body data-theme="light" class="notransition">
    <script>
      const body = document.body;
      const data = body.getAttribute("data-theme");
      const initTheme = (state) => {
        if (state === "dark") {
          body.setAttribute("data-theme", "dark");
        } else if (state === "light") {
          body.removeAttribute("data-theme");
        } else {
          localStorage.setItem("theme", data);
        }
      };
   
      initTheme(localStorage.getItem("theme"));
      
      setTimeout(() => body.classList.remove("notransition"), 75);
    </script>
  <div class="navbar" role="navigation">
    <nav class="menu">
      <input type="checkbox" id="menu-trigger" class="menu-trigger" />
      <label for="menu-trigger">
        <span class="menu-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 512 512"
          >
            <path
              d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
            />
          </svg>
        </span>
      </label>
      <a id="mode">
        <svg
          class="mode-sunny"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>LIGHT</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
        <svg
          class="mode-moon"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>DARK</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
      </a>
      <div class="trigger">
        <div class="trigger-container">
          
            
            
            
            
            
            
            <a class="menu-link " href="/"> Home ğŸ </a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/about/"> About ğŸ‘¨â€ğŸ’»</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/archives/"> Archives ğŸ“†</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/tags/"> Tags ğŸ·ï¸</a>
          
              <a class="menu-link" href="/feed.xml"><svg
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="17"
            viewBox="0 0 512 512"
            fill="#ED812E"
          >
            <title>RSS</title>
            <path
              d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z"
            />
            <path
              d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z"
            />
            <path
              d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z"
            />
          </svg></a>
        </div>
      </div>
    </nav>
  </div>

  
<div class="wrapper post">
  <main class="page-content" aria-label="Content">
      <header class="header">
        
          <div class="tags">
            <a href="/tags/Go/" class="tag"># Go</a>
          </div>
        
        <h1 class="header-title" itemprop="headline">Golang-è¯­è¨€æºç çº§è°ƒè¯•å™¨ Delve</h1>
          <div class="post-meta">
            <time>8æœˆ 11, 2023</time>
            <span itemprop="author">
              <span itemprop="name">Ch3nnn</span>
            </span>
          </div>
        </header>

          <div class="page-content"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Go ç›®å‰çš„è°ƒè¯•å™¨æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><code>GDB</code> æœ€æ—©æœŸçš„è°ƒè¯•å·¥å…·ï¼Œç°åœ¨ç”¨çš„å¾ˆå°‘ã€‚</li>
<li><code>LLDB</code> macOS ç³»ç»Ÿæ¨èçš„æ ‡å‡†è°ƒè¯•å·¥å…·ï¼Œå• Go çš„ä¸€äº›ä¸“æœ‰ç‰¹æ€§æ”¯æŒçš„æ¯”è¾ƒå°‘ã€‚</li>
<li><code>Delve</code> ä¸“é—¨ä¸º Go è¯­è¨€æ‰“é€ çš„è°ƒè¯•å·¥å…·ï¼Œä½¿ç”¨æœ€ä¸ºå¹¿æ³›ã€‚</li>
</ul>
<p>æœ¬ç¯‡ç®€å•è¯´æ˜å¦‚ä½•ä½¿ç”¨ <code>Delve</code> å·¥å…·æ¥è°ƒè¯• Go ç¨‹åºï¼Œä½¿ç”¨çš„ <code>delve</code> ç‰ˆæœ¬ä¸º 1.20.1ã€‚</p>
<p>delve çš„æ±‰è¯­æ„æ€æ˜¯ï¼šé’»ç ”ã€æ¢ç´¢ï¼›ç”¨è¿™ä¸ªæ¥å‘½åä¸€ä¸ªdebugå·¥å…·è¿˜æ˜¯éå¸¸çš„å½¢è±¡ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å·²çŸ¥ä»¥ä¸‹è¯´æ˜é€‚ç”¨äº Linuxã€macOSã€Windows å’Œ FreeBSDã€‚</p>
<p>å…‹éš† git å­˜å‚¨åº“å¹¶æ„å»ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/go-delve/delve</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> delve</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go install github.com/go-delve/delve/cmd/dlv</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ï¼Œåœ¨ Go ç‰ˆæœ¬ 1.16 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šï¼š</p>
<p><strong>Install the latest release:</strong><br><code>$ go install github.com/go-delve/delve/cmd/dlv@latest</code></p>
<p><strong>Install at tree head:</strong><br><code>$ go install github.com/go-delve/delve/cmd/dlv@master</code></p>
<p><strong>å®‰è£…åœ¨ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬æˆ–:</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go install github.com/go-delve/delve/cmd/dlv@v1.7.3</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go install github.com/go-delve/delve/cmd/dlv@v1.7.4-0.20211208103735-2f13672765fe</span></span><br></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Usage:</span><br><span class="line">  dlv [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  attach      é™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å¹¶å¼€å§‹è°ƒè¯•.</span><br><span class="line">  connect     ä½¿ç”¨ç»ˆç«¯å®¢æˆ·ç«¯è¿æ¥åˆ°æ— å¤´è°ƒè¯•æœåŠ¡å™¨.</span><br><span class="line">  core        æ£€æŸ¥æ ¸å¿ƒè½¬å‚¨.</span><br><span class="line">  dap         å¯åŠ¨ä¸€ä¸ªé€šè¿‡è°ƒè¯•é€‚é…å™¨åè®®(DAP)é€šä¿¡çš„æ— å¤´TCPæœåŠ¡å™¨.</span><br><span class="line">  debug       ç¼–è¯‘å¹¶å¼€å§‹è°ƒè¯•å½“å‰ç›®å½•ä¸­çš„ä¸»åŒ…æˆ–æŒ‡å®šçš„åŒ….</span><br><span class="line">  exec        æ‰§è¡Œé¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å¼€å§‹è°ƒè¯•ä¼šè¯.</span><br><span class="line">  help        Help about any command</span><br><span class="line">  run         å¼ƒç”¨çš„å‘½ä»¤ã€‚ä½¿ç”¨&#x27;debug&#x27;ä»£æ›¿.</span><br><span class="line">  test        ç¼–è¯‘æµ‹è¯•äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å¼€å§‹è°ƒè¯•ç¨‹åº.</span><br><span class="line">  trace       ç¼–è¯‘å¹¶å¼€å§‹è·Ÿè¸ªç¨‹åº.</span><br><span class="line">  version     Prints version.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ“ä½œ-ç¤ºä¾‹ä»£ç "><a href="#æ“ä½œ-ç¤ºä¾‹ä»£ç " class="headerlink" title="[æ“ä½œ] ç¤ºä¾‹ä»£ç "></a>[æ“ä½œ] ç¤ºä¾‹ä»£ç </h2><p>ä¸‹é¢æ˜¯æ£€æŸ¥æ“ä½œçš„ä»£ç </p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">.test/</span><br><span class="line">â”œâ”€â”€ go.mod</span><br><span class="line">â”œâ”€â”€ main.go</span><br><span class="line">â””â”€â”€ main_test.go</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">module debug_sample</span><br><span class="line"></span><br><span class="line">go 1.18</span><br></pre></td></tr></table></figure>
<p><code>main.go</code> æ‰§è¡Œä»¥ä¸‹å¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> abc <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	abc = <span class="string">&quot;wakuwaku bank&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;func add %v\n&quot;</span>, abc)</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;func sub %v\n&quot;</span>, abc)</span><br><span class="line">	<span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculate</span><span class="params">(a, b <span class="type">int</span>)</span></span> (addValue, subValue <span class="type">int</span>) &#123;</span><br><span class="line">	addValue = add(a, b)</span><br><span class="line">	subValue = sub(a, b)</span><br><span class="line">	<span class="keyword">return</span> addValue, subValue</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sampleFunc1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a := i + <span class="number">10</span></span><br><span class="line">		b := i</span><br><span class="line">		addValue, subValue := calculate(a, b)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;addValue: %v subValue: %v\n&quot;</span>, addValue, subValue)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sampleFunc1()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>main_test.go æ‰§è¡Œä»¥ä¸‹å¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_add</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">		a <span class="type">int</span></span><br><span class="line">		b <span class="type">int</span></span><br><span class="line">	&#125;</span><br><span class="line">	tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">		args args</span><br><span class="line">		want <span class="type">int</span></span><br><span class="line">	&#125;&#123;&#123;name: <span class="string">&quot;Both positive values&quot;</span>, args: args&#123;<span class="number">10</span>, <span class="number">3</span>&#125;, want: <span class="number">13</span>&#125;&#125;</span><br><span class="line">	<span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">		t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">			<span class="keyword">if</span> got := add(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">				t.Errorf(<span class="string">&quot;add() = %v, want %v&quot;</span>, got, tt.want)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_sub</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">		a <span class="type">int</span></span><br><span class="line">		b <span class="type">int</span></span><br><span class="line">	&#125;</span><br><span class="line">	tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">		args args</span><br><span class="line">		want <span class="type">int</span></span><br><span class="line">	&#125;&#123;&#123;name: <span class="string">&quot;Both positive values&quot;</span>, args: args&#123;<span class="number">10</span>, <span class="number">3</span>&#125;, want: <span class="number">7</span>&#125;&#125;</span><br><span class="line">	<span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">		t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">			<span class="keyword">if</span> got := sub(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">				t.Errorf(<span class="string">&quot;sub() = %v, want %v&quot;</span>, got, tt.want)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒè¯•-dlv-è°ƒè¯•"><a href="#è°ƒè¯•-dlv-è°ƒè¯•" class="headerlink" title="[è°ƒè¯•] dlv è°ƒè¯•"></a>[è°ƒè¯•] dlv è°ƒè¯•</h2><h3 id="å¼€å§‹è°ƒè¯•"><a href="#å¼€å§‹è°ƒè¯•" class="headerlink" title="å¼€å§‹è°ƒè¯•"></a>å¼€å§‹è°ƒè¯•</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">dlv debug main.go</span></span><br><span class="line">Type &#x27;help&#x27; for list of commands.</span><br><span class="line">(dlv) </span><br></pre></td></tr></table></figure>

<h3 id="æ£€æŸ¥åŠŸèƒ½-x2F-ä»£ç -funcs-list"><a href="#æ£€æŸ¥åŠŸèƒ½-x2F-ä»£ç -funcs-list" class="headerlink" title="æ£€æŸ¥åŠŸèƒ½&#x2F;ä»£ç ( funcs list )"></a>æ£€æŸ¥åŠŸèƒ½&#x2F;ä»£ç ( funcs list )</h3><p><code>funcs main\..*</code> æŸ¥çœ‹ main æ–‡ä»¶ æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) funcs main\..*</span><br><span class="line">main.add</span><br><span class="line">main.calculate</span><br><span class="line">main.init.0</span><br><span class="line">main.main</span><br><span class="line">main.sampleFunc1</span><br><span class="line">main.sub</span><br><span class="line">runtime.main.func1</span><br><span class="line">runtime.main.func2</span><br></pre></td></tr></table></figure>
<p><code>list</code> æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹æŸä¸ªæ–¹æ³•æºä»£ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) list main.main</span><br><span class="line">Showing /debug_sample/main.go:38 (PC: 0x1029dda10)</span><br><span class="line">    33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br><span class="line">    38: func main() &#123;</span><br><span class="line">    39:         sampleFunc1()</span><br><span class="line">    40: &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) list main.sampleFunc1:3</span><br><span class="line">Showing /debug_sample/main.go:32 (PC: 0x1029dd8c0)</span><br><span class="line">    27: &#125;</span><br><span class="line">    28: </span><br><span class="line">    29: func sampleFunc1() &#123;</span><br><span class="line">    30:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:                 a := i + 10</span><br><span class="line">    32:                 b := i</span><br><span class="line">    33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®-x2F-åˆ é™¤æ–­ç‚¹-break-clear"><a href="#è®¾ç½®-x2F-åˆ é™¤æ–­ç‚¹-break-clear" class="headerlink" title="è®¾ç½®&#x2F;åˆ é™¤æ–­ç‚¹ (  break clear )"></a>è®¾ç½®&#x2F;åˆ é™¤æ–­ç‚¹ (  break clear )</h3><p><code>break</code> æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®æ–­ç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) break main.main</span><br><span class="line">Breakpoint 1 set at 0x1029dda10 for main.main() ./main.go:38</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) break main.sampleFunc1:3</span><br><span class="line">Breakpoint 2 set at 0x1029dd8c0 for main.sampleFunc1() ./main.go:32</span><br></pre></td></tr></table></figure>

<p><code>breakpoints</code> æ‚¨å¯ä»¥æ£€æŸ¥ä¸­è®¾ç½®çš„æ–­ç‚¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) breakpoints</span><br><span class="line">Breakpoint runtime-fatal-throw (enabled) at 0x10296c880 for runtime.throw() /Users/w/.gvm/gos/go1.18/src/runtime/panic.go:982 (0)</span><br><span class="line">Breakpoint unrecovered-panic (enabled) at 0x10296cb90 for runtime.fatalpanic() /Users/w/.gvm/gos/go1.18/src/runtime/panic.go:1065 (0)</span><br><span class="line">        print runtime.curg._panic.arg</span><br><span class="line">Breakpoint 1 (enabled) at 0x1029dda10 for main.main() ./main.go:38 (0)</span><br><span class="line">Breakpoint 2 (enabled) at 0x1029dd8c0 for main.sampleFunc1() ./main.go:32 (0)</span><br></pre></td></tr></table></figure>

<p><code>clear</code> æ‚¨å¯ä»¥ä½¿ç”¨ åˆ é™¤æŒ‡å®šçš„æ–­ç‚¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) clear 1</span><br><span class="line">Breakpoint 1 cleared at 0x1029dda10 for main.main() ./main.go:38</span><br><span class="line">(dlv) breakpoints</span><br><span class="line">Breakpoint runtime-fatal-throw (enabled) at 0x10296c880 for runtime.throw() /Users/w/.gvm/gos/go1.18/src/runtime/panic.go:982 (0)</span><br><span class="line">Breakpoint unrecovered-panic (enabled) at 0x10296cb90 for runtime.fatalpanic() /Users/w/.gvm/gos/go1.18/src/runtime/panic.go:1065 (0)</span><br><span class="line">        print runtime.curg._panic.arg</span><br><span class="line">Breakpoint 2 (enabled) at 0x1029dd8c0 for main.sampleFunc1() ./main.go:32 (0)</span><br></pre></td></tr></table></figure>

<p><code>clearall</code> åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) clearall</span><br><span class="line">Breakpoint 1 cleared at 0x4986e6 for main.main() ./main.go:38</span><br><span class="line">Breakpoint 5 cleared at 0x49858c for main.sampleFunc1() ./main.go:32</span><br></pre></td></tr></table></figure>

<h3 id="æå‰å¤„ç†åˆ°æ–­ç‚¹-continue"><a href="#æå‰å¤„ç†åˆ°æ–­ç‚¹-continue" class="headerlink" title="æå‰å¤„ç†åˆ°æ–­ç‚¹(  continue )"></a>æå‰å¤„ç†åˆ°æ–­ç‚¹(  continue )</h3><p><code>continue</code> è®©æˆ‘ä»¬ç»§ç»­æ‰§è¡Œä¸­è®¾ç½®çš„æ–­ç‚¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) continue</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.sampleFunc1() ./main.go:32 (hits goroutine(1):1 total:1) (PC: 0x1029dd8c0)</span></span><br><span class="line">    27: &#125;</span><br><span class="line">    28: </span><br><span class="line">    29: func sampleFunc1() &#123;</span><br><span class="line">    30:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:                 a := i + 10</span><br><span class="line">=&gt;  32:                 b := i</span><br><span class="line">    33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br></pre></td></tr></table></figure>

<p><code>continue</code> æˆ–è€…ï¼Œæ‚¨å¯ä»¥ç»§ç»­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p>
<p><code>next</code><br>å‘å‰è¿ˆå‡ºä¸€è¡Œï¼ˆè·¨è¿‡ï¼‰ã€‚<br><code>step</code><br>å‰è¿›ä¸€è¡Œã€‚<br><code>stepout</code><br>é€€å‡ºå½“å‰åŠŸèƒ½ã€‚</p>
<h3 id="æ£€æŸ¥å¹¶è¦†ç›–å˜é‡-locals-set"><a href="#æ£€æŸ¥å¹¶è¦†ç›–å˜é‡-locals-set" class="headerlink" title="æ£€æŸ¥å¹¶è¦†ç›–å˜é‡ (  locals set )"></a>æ£€æŸ¥å¹¶è¦†ç›–å˜é‡ (  locals set )</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@cdh2 test]# dlv debug main.go  // è°ƒè¯•</span><br><span class="line">Type &#x27;help&#x27; for list of commands.</span><br><span class="line"></span><br><span class="line">(dlv) break main.sampleFunc1:3  // è®¾ç½®æ–­ç‚¹</span><br><span class="line">Breakpoint 1 set at 0x49858c for main.sampleFunc1() ./main.go:32</span><br><span class="line"></span><br><span class="line">(dlv) c  // è·³åˆ°æ–­ç‚¹</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.sampleFunc1() ./main.go:32 (hits goroutine(1):1 total:1) (PC: 0x49858c)</span></span><br><span class="line">    27:	&#125;</span><br><span class="line">    28:</span><br><span class="line">    29:	func sampleFunc1() &#123;</span><br><span class="line">    30:		for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:			a := i + 10</span><br><span class="line">=&gt;  32:			b := i</span><br><span class="line">    33:			addValue, subValue := calculate(a, b)</span><br><span class="line">    34:			fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:		&#125;</span><br><span class="line">    36:	&#125;</span><br><span class="line">    37:</span><br><span class="line">    </span><br><span class="line">(dlv) locals  // æ‰“å°å±€éƒ¨å˜é‡</span><br><span class="line">i = 0</span><br><span class="line">a = 10</span><br><span class="line"></span><br><span class="line">(dlv) vars main.abc</span><br><span class="line">main.abc = &quot;wakuwaku bank&quot;</span><br><span class="line"></span><br><span class="line">(dlv) print i</span><br><span class="line">0</span><br><span class="line">(dlv) print a</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">(dlv) set i = 2  // é‡æ–°ç»™å˜é‡èµ‹å€¼</span><br><span class="line">(dlv) print i</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h3 id="å †æ ˆè·Ÿè¸ªæ˜¾ç¤º-stack-frame"><a href="#å †æ ˆè·Ÿè¸ªæ˜¾ç¤º-stack-frame" class="headerlink" title="å †æ ˆè·Ÿè¸ªæ˜¾ç¤º(  stack frame )"></a>å †æ ˆè·Ÿè¸ªæ˜¾ç¤º(  stack frame )</h3><p>é¦–å…ˆï¼Œè¦æ£€æŸ¥æ“ä½œï¼Œè¯·ç»§ç»­æ·»åŠ åŠŸèƒ½ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) break main.add</span><br><span class="line">Breakpoint 3 set at 0x1029dd610 for main.add() ./main.go:13</span><br><span class="line">(dlv) c</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.add() ./main.go:13 (hits goroutine(1):1 total:1) (PC: 0x1029dd610)</span></span><br><span class="line">     8: </span><br><span class="line">     9: func init() &#123;</span><br><span class="line">    10:         abc = &quot;wakuwaku bank&quot;</span><br><span class="line">    11: &#125;</span><br><span class="line">    12: </span><br><span class="line">=&gt;  13: func add(a, b int) int &#123;</span><br><span class="line">    14:         fmt.Printf(&quot;func add %v\n&quot;, abc)</span><br><span class="line">    15:         return a + b</span><br><span class="line">    16: &#125;</span><br><span class="line">    17: </span><br><span class="line">    18: func sub(a, b int) int &#123;</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç¤ºå †æ ˆè·Ÿè¸ª</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) stack</span><br><span class="line">0  0x00000000004982aa in main.add</span><br><span class="line">   at ./main.go:13</span><br><span class="line">1  0x00000000004984df in main.calculate</span><br><span class="line">   at ./main.go:24</span><br><span class="line">2  0x00000000004985a5 in main.sampleFunc1</span><br><span class="line">   at ./main.go:33</span><br><span class="line">3  0x00000000004986f7 in main.main</span><br><span class="line">   at ./main.go:39</span><br><span class="line">4  0x00000000004372d8 in runtime.main</span><br><span class="line">   at /root/.go/src/runtime/proc.go:250</span><br><span class="line">5  0x0000000000461661 in runtime.goexit</span><br><span class="line">   at /root/.go/src/runtime/asm_amd64.s:1571</span><br></pre></td></tr></table></figure>

<p><code>frame</code> æ‚¨å¯ä»¥é€šè¿‡æŒ‡å®šå †æ ˆè·Ÿè¸ªç¼–å·æ¥æ£€æŸ¥ä»£ç å’Œå˜é‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) frame 2 ls</span><br><span class="line">Goroutine 1 frame 2 at /debug_sample/main.go:33 (PC: 0x1029dd8d0)</span><br><span class="line">    28: </span><br><span class="line">    29: func sampleFunc1() &#123;</span><br><span class="line">    30:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:                 a := i + 10</span><br><span class="line">    32:                 b := i</span><br><span class="line">=&gt;  33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br><span class="line">    38: func main() &#123;</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) frame 2 locals</span><br><span class="line">i = 2</span><br><span class="line">a = 10</span><br><span class="line">b = 2</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡å®šæ¡ä»¶-condition"><a href="#æŒ‡å®šæ¡ä»¶-condition" class="headerlink" title="æŒ‡å®šæ¡ä»¶ (  condition )"></a>æŒ‡å®šæ¡ä»¶ (  condition )</h3><p>é¦–å…ˆï¼Œè¿›è¡Œforè¯­å¥çš„å¤„ç†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">dlv debug main.go</span></span><br><span class="line">Type &#x27;help&#x27; for list of commands.</span><br><span class="line">(dlv) b main.sampleFunc1:3</span><br><span class="line">Breakpoint 1 set at 0x1050958c0 for main.sampleFunc1() ./main.go:32</span><br><span class="line">(dlv) c</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.sampleFunc1() ./main.go:32 (hits goroutine(1):1 total:1) (PC: 0x1050958c0)</span></span><br><span class="line">    27: &#125;</span><br><span class="line">    28: </span><br><span class="line">    29: func sampleFunc1() &#123;</span><br><span class="line">    30:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:                 a := i + 10</span><br><span class="line">=&gt;  32:                 b := i</span><br><span class="line">    33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br><span class="line">(dlv) locals</span><br><span class="line">i = 0</span><br><span class="line">a = 10</span><br></pre></td></tr></table></figure>
<p><code>condition</code> æ‚¨å¯ä»¥ä½¿ç”¨ è®¾ç½®æ–­ç‚¹æ¡ä»¶ã€‚<br><code>i==5</code> è®©æˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºåœæ­¢æ—¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) condition 1 i==5</span><br><span class="line"></span><br><span class="line">(dlv) c</span><br><span class="line">func add wakuwaku bank</span><br><span class="line">func sub wakuwaku bank</span><br><span class="line">addValue: 10 subValue: 10</span><br><span class="line">func add wakuwaku bank</span><br><span class="line">func sub wakuwaku bank</span><br><span class="line">addValue: 12 subValue: 10</span><br><span class="line">func add wakuwaku bank</span><br><span class="line">func sub wakuwaku bank</span><br><span class="line">addValue: 14 subValue: 10</span><br><span class="line">func add wakuwaku bank</span><br><span class="line">func sub wakuwaku bank</span><br><span class="line">addValue: 16 subValue: 10</span><br><span class="line">func add wakuwaku bank</span><br><span class="line">func sub wakuwaku bank</span><br><span class="line">addValue: 18 subValue: 10</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.sampleFunc1() ./main.go:32 (hits goroutine(1):2 total:2) (PC: 0x1050958c0)</span></span><br><span class="line">    27: &#125;</span><br><span class="line">    28: </span><br><span class="line">    29: func sampleFunc1() &#123;</span><br><span class="line">    30:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    31:                 a := i + 10</span><br><span class="line">=&gt;  32:                 b := i</span><br><span class="line">    33:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    34:                 fmt.Printf(&quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br><span class="line">    35:         &#125;</span><br><span class="line">    36: &#125;</span><br><span class="line">    37: </span><br><span class="line">    </span><br><span class="line">(dlv) locals</span><br><span class="line">i = 5</span><br><span class="line">a = 15</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒè¯•ç»“æŸ-exit"><a href="#è°ƒè¯•ç»“æŸ-exit" class="headerlink" title="è°ƒè¯•ç»“æŸ(  exit )"></a>è°ƒè¯•ç»“æŸ(  exit )</h3><p>exit æ‚¨å¯ä»¥ä½¿ç”¨ å®Œæˆè°ƒè¯•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) exit</span><br></pre></td></tr></table></figure>
<h2 id="debug-dlvæµ‹è¯•ï¼ˆè°ƒè¯•æµ‹è¯•ï¼‰"><a href="#debug-dlvæµ‹è¯•ï¼ˆè°ƒè¯•æµ‹è¯•ï¼‰" class="headerlink" title="[debug] dlvæµ‹è¯•ï¼ˆè°ƒè¯•æµ‹è¯•ï¼‰"></a>[debug] dlvæµ‹è¯•ï¼ˆè°ƒè¯•æµ‹è¯•ï¼‰</h2><p>dlv test æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è°ƒè¯•æ‚¨çš„æµ‹è¯•ä»£ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">dlv <span class="built_in">test</span></span></span><br><span class="line">Type &#x27;help&#x27; for list of commands.</span><br><span class="line">(dlv) funcs test.Test*  // test.Test*  test åŒ…å« Xxx_test.go æ–‡ä»¶å¤¹</span><br><span class="line">debug_sample.Test_add</span><br><span class="line">debug_sample.Test_add.func1</span><br><span class="line">debug_sample.Test_sub</span><br><span class="line">debug_sample.Test_sub.func1</span><br><span class="line"></span><br><span class="line">(dlv) b test.Test_add</span><br><span class="line">Breakpoint 1 set at 0x104891e90 for debug_sample.Test_add() ./main_test.go:5</span><br><span class="line"></span><br><span class="line">(dlv) c</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">debug_sample.Test_add() ./main_test.go:5 (hits goroutine(4):1 total:1) (PC: 0x104891e90)</span></span><br><span class="line">     1: package main</span><br><span class="line">     2: </span><br><span class="line">     3: import &quot;testing&quot;</span><br><span class="line">     4: </span><br><span class="line">=&gt;   5: func Test_add(t *testing.T) &#123;</span><br><span class="line">     6:         type args struct &#123;</span><br><span class="line">     7:                 a int</span><br><span class="line">     8:                 b int</span><br><span class="line">     9:         &#125;</span><br><span class="line">    10:         tests := []struct &#123; </span><br></pre></td></tr></table></figure>

<h2 id="debug-dlv-Attachï¼ˆè°ƒè¯•è¿è¡Œè¿›ç¨‹ï¼‰"><a href="#debug-dlv-Attachï¼ˆè°ƒè¯•è¿è¡Œè¿›ç¨‹ï¼‰" class="headerlink" title="[debug] dlv Attachï¼ˆè°ƒè¯•è¿è¡Œè¿›ç¨‹ï¼‰"></a>[debug] dlv Attachï¼ˆè°ƒè¯•è¿è¡Œè¿›ç¨‹ï¼‰</h2><p>æ›´æ­£æ“ä½œæ£€æŸ¥ä»£ç </p>
<p>å¯¹å…¶è¿›è¡Œä¿®æ”¹ä»¥ä¿æŒä½œä¸º Web æœåŠ¡å™¨è¿è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> abc <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	abc = <span class="string">&quot;wakuwaku bank&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;func add %v\n&quot;</span>, abc)</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;func sub %v\n&quot;</span>, abc)</span><br><span class="line">	<span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculate</span><span class="params">(a, b <span class="type">int</span>)</span></span> (addValue, subValue <span class="type">int</span>) &#123;</span><br><span class="line">	addValue = add(a, b)</span><br><span class="line">	subValue = sub(a, b)</span><br><span class="line">	<span class="keyword">return</span> addValue, subValue</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sampleFunc1</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a := i * <span class="number">2</span></span><br><span class="line">		b := i</span><br><span class="line">		addValue, subValue := calculate(a, b)</span><br><span class="line">		fmt.Fprintf(w, <span class="string">&quot;addValue: %v subValue: %v\n&quot;</span>, addValue, subValue)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/sample_func_1&quot;</span>, sampleFunc1)</span><br><span class="line">	http.ListenAndServe(<span class="string">&quot;:80&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go build</span>     </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test</span></span><br></pre></td></tr></table></figure>

<h3 id="è°ƒè¯•è¿è¡Œè¿›ç¨‹"><a href="#è°ƒè¯•è¿è¡Œè¿›ç¨‹" class="headerlink" title="è°ƒè¯•è¿è¡Œè¿›ç¨‹"></a>è°ƒè¯•è¿è¡Œè¿›ç¨‹</h3><p>æ£€æŸ¥è¿›ç¨‹ IDã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ps -ef | grep <span class="string">&quot;test&quot;</span></span></span><br><span class="line">root     254882  56889  0 15:24 pts/2    00:00:00 ./test</span><br><span class="line">root     257090  18100  0 15:25 pts/0    00:00:00 grep --color=auto test</span><br></pre></td></tr></table></figure>

<p>è°ƒè¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dlv attach 254882</span></span><br><span class="line">Type &#x27;help&#x27; for list of commands.</span><br><span class="line">(dlv)</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®æ–­ç‚¹å¹¶ç­‰å¾…è¿›ç¨‹è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) b main.sampleFunc1</span><br><span class="line">Breakpoint 1 set at 0x1010e8470 for main.sampleFunc1() ./main.go:30</span><br><span class="line"></span><br><span class="line">(dlv) c</span><br></pre></td></tr></table></figure>

<p>å°è¯•åœ¨å¦ä¸€ä¸ªæ§åˆ¶å°ä¸­å‘ç«¯ç‚¹å‘å‡ºè¯·æ±‚ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl http://localhost/sample_func_1</span></span><br></pre></td></tr></table></figure>
<p>å¤„ç†åœ¨è®¾ç½®çš„æ–­ç‚¹å¤„åœæ­¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) c</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">main.sampleFunc1() ./main.go:30 (hits goroutine(21):1 total:1) (PC: 0x1010e8470)</span></span><br><span class="line">Warning: debugging optimized function</span><br><span class="line">    25:         addValue = add(a, b)</span><br><span class="line">    26:         subValue = sub(a, b)</span><br><span class="line">    27:         return addValue, subValue</span><br><span class="line">    28: &#125;</span><br><span class="line">    29: </span><br><span class="line">=&gt;  30: func sampleFunc1(w http.ResponseWriter, r *http.Request) &#123;</span><br><span class="line">    31:         for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    32:                 a := i * 2</span><br><span class="line">    33:                 b := i</span><br><span class="line">    34:                 addValue, subValue := calculate(a, b)</span><br><span class="line">    35:                 fmt.Fprintf(w, &quot;addValue: %v subValue: %v\n&quot;, addValue, subValue)</span><br></pre></td></tr></table></figure>

<h2 id="å‘½ä»¤è¯´æ˜"><a href="#å‘½ä»¤è¯´æ˜" class="headerlink" title="å‘½ä»¤è¯´æ˜"></a>å‘½ä»¤è¯´æ˜</h2><p>ä»¥ä¸‹æ˜¯ä¸€äº›æœ€å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<h3 id="æ–­ç‚¹ç›¸å…³"><a href="#æ–­ç‚¹ç›¸å…³" class="headerlink" title="æ–­ç‚¹ç›¸å…³"></a>æ–­ç‚¹ç›¸å…³</h3><table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th>åˆ«å</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">break</td>
<td>b</td>
<td>è®¾ç½®æ–­ç‚¹</td>
</tr>
<tr>
<td align="left">breakpoints</td>
<td>bp</td>
<td>æ˜¾ç¤ºæ´»åŠ¨æ–­ç‚¹</td>
</tr>
<tr>
<td align="left">clear</td>
<td></td>
<td>åˆ é™¤æ–­ç‚¹</td>
</tr>
<tr>
<td align="left">clearall</td>
<td></td>
<td>åˆ é™¤æ‰€æœ‰æ–­ç‚¹</td>
</tr>
<tr>
<td align="left">condition</td>
<td>cond</td>
<td>è®¾ç½®æ–­ç‚¹æ¡ä»¶</td>
</tr>
</tbody></table>
<h3 id="ç»§ç»­"><a href="#ç»§ç»­" class="headerlink" title="ç»§ç»­"></a>ç»§ç»­</h3><table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th>åˆ«å</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">continue</td>
<td>c</td>
<td>ç»§ç»­åˆ°â€œä¸‹ä¸€ä¸ªæ–­ç‚¹â€æˆ–â€œç¨‹åºç»“æŸâ€æˆ–â€œæŒ‡å®šç‚¹â€ã€‚ï¼ˆä¾‹å¦‚ c main.add:1 ï¼‰</td>
</tr>
<tr>
<td align="left">next</td>
<td>n</td>
<td>å‘å‰è¿ˆå‡ºä¸€è¡Œï¼ˆè·¨è¿‡ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left">step</td>
<td>s</td>
<td>å‰è¿›ä¸€è¡Œã€‚</td>
</tr>
<tr>
<td align="left">stepout</td>
<td>so</td>
<td>é€€å‡ºå½“å‰åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td align="left">restart</td>
<td></td>
<td>æ¢å¤è¯¥è¿‡ç¨‹ã€‚</td>
</tr>
<tr>
<td align="left">exit</td>
<td>q</td>
<td>é€€å‡ºè°ƒè¯•å™¨ã€‚</td>
</tr>
</tbody></table>
<h2 id="å…¶ä»–çš„"><a href="#å…¶ä»–çš„" class="headerlink" title="å…¶ä»–çš„"></a>å…¶ä»–çš„</h2><table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th>åˆ«å</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">funcs</td>
<td></td>
<td>æ£€æŸ¥åŠŸèƒ½åˆ—è¡¨ã€‚ï¼ˆä¾‹å¦‚ funcs main..* ï¼‰</td>
</tr>
<tr>
<td align="left">list</td>
<td>l</td>
<td>æ˜¾ç¤ºä»£ç ã€‚ï¼ˆä¾‹å¦‚ l 10 l main.main:3 ï¼‰</td>
</tr>
<tr>
<td align="left">locals</td>
<td></td>
<td>æ£€æŸ¥å±€éƒ¨å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left">vars</td>
<td></td>
<td>æ£€æŸ¥åŒ…å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left">print</td>
<td>p</td>
<td>è¯„ä¼°ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td align="left">set</td>
<td></td>
<td>è¦†ç›–å˜é‡ã€‚</td>
</tr>
<tr>
<td align="left">stack</td>
<td>bt</td>
<td>æ˜¾ç¤ºå †æ ˆè·Ÿè¸ªã€‚</td>
</tr>
</tbody></table>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­æ‰§è¡Œæ¥æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨å…¶ä»–å‘½ä»¤ <code>help </code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(dlv) help</span><br><span class="line">The following commands are available:</span><br><span class="line"></span><br><span class="line">Running the program:</span><br><span class="line">    call ------------------------ Resumes process, injecting a function call (EXPERIMENTAL!!!)</span><br><span class="line">    continue (alias: c) --------- Run until breakpoint or program termination.</span><br><span class="line">    next (alias: n) ------------- Step over to next source line.</span><br><span class="line">    rebuild --------------------- Rebuild the target executable and restarts it. It does not work if the executable was not built by delve.</span><br><span class="line">    restart (alias: r) ---------- Restart process.</span><br><span class="line">    step (alias: s) ------------- Single step through program.</span><br><span class="line">    step-instruction (alias: si)  Single step a single cpu instruction.</span><br><span class="line">    stepout (alias: so) --------- Step out of the current function.</span><br><span class="line"></span><br><span class="line">Manipulating breakpoints:</span><br><span class="line">    break (alias: b) ------- Sets a breakpoint.</span><br><span class="line">    breakpoints (alias: bp)  Print out info for active breakpoints.</span><br><span class="line">    clear ------------------ Deletes breakpoint.</span><br><span class="line">    clearall --------------- Deletes multiple breakpoints.</span><br><span class="line">    condition (alias: cond)  Set breakpoint condition.</span><br><span class="line">    on --------------------- Executes a command when a breakpoint is hit.</span><br><span class="line">    toggle ----------------- Toggles on or off a breakpoint.</span><br><span class="line">    trace (alias: t) ------- Set tracepoint.</span><br><span class="line">    watch ------------------ Set watchpoint.</span><br><span class="line"></span><br><span class="line">Viewing program variables and memory:</span><br><span class="line">    args ----------------- Print function arguments.</span><br><span class="line">    display -------------- Print value of an expression every time the program stops.</span><br><span class="line">    examinemem (alias: x)  Examine raw memory at the given address.</span><br><span class="line">    locals --------------- Print local variables.</span><br><span class="line">    print (alias: p) ----- Evaluate an expression.</span><br><span class="line">    regs ----------------- Print contents of CPU registers.</span><br><span class="line">    set ------------------ Changes the value of a variable.</span><br><span class="line">    vars ----------------- Print package variables.</span><br><span class="line">    whatis --------------- Prints type of an expression.</span><br><span class="line"></span><br><span class="line">Listing and switching between threads and goroutines:</span><br><span class="line">    goroutine (alias: gr) -- Shows or changes current goroutine</span><br><span class="line">    goroutines (alias: grs)  List program goroutines.</span><br><span class="line">    thread (alias: tr) ----- Switch to the specified thread.</span><br><span class="line">    threads ---------------- Print out info for every traced thread.</span><br><span class="line"></span><br><span class="line">Viewing the call stack and selecting frames:</span><br><span class="line">    deferred --------- Executes command in the context of a deferred call.</span><br><span class="line">    down ------------- Move the current frame down.</span><br><span class="line">    frame ------------ Set the current frame, or execute command on a different frame.</span><br><span class="line">    stack (alias: bt)  Print stack trace.</span><br><span class="line">    up --------------- Move the current frame up.</span><br><span class="line"></span><br><span class="line">Other commands:</span><br><span class="line">    config --------------------- Changes configuration parameters.</span><br><span class="line">    disassemble (alias: disass)  Disassembler.</span><br><span class="line">    dump ----------------------- Creates a core dump from the current process state</span><br><span class="line">    edit (alias: ed) ----------- Open where you are in $DELVE_EDITOR or $EDITOR</span><br><span class="line">    exit (alias: quit | q) ----- Exit the debugger.</span><br><span class="line">    funcs ---------------------- Print list of functions.</span><br><span class="line">    help (alias: h) ------------ Prints the help message.</span><br><span class="line">    libraries ------------------ List loaded dynamic libraries</span><br><span class="line">    list (alias: ls | l) ------- Show source code.</span><br><span class="line">    source --------------------- Executes a file containing a list of delve commands</span><br><span class="line">    sources -------------------- Print list of source files.</span><br><span class="line">    transcript ----------------- Appends command output to a file.</span><br><span class="line">    types ---------------------- Print list of types</span><br><span class="line"></span><br><span class="line">Type help followed by a command for full documentation.</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a target="_blank" rel="noopener" href="https://github.com/go-delve/delve">go-delve&#x2F;delveï¼šDelve æ˜¯ Go ç¼–ç¨‹è¯­è¨€çš„è°ƒè¯•å™¨</a></p>
</div>
          <nav class="post-nav">
    
    
    <a class="post-nav-item post-nav-next" href="/2023/05/13/Golang-%E4%B8%8A%E4%B8%8B%E6%96%87/">
      <div class="nav-arrow">OLDER&nbsp;&gt;</div>
      <span class="post-title">Golang-ä¸Šä¸‹æ–‡</span>
    </a>
    
  </nav>
          <div class="dis">
    
        <div class="btn" id="comments-btn">ç»™æˆ‘ç•™è¨€</div>
      
     
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
    <div id="waline"></div>
    <script>
        window.onload = function () {
            var loadWaline = function () {
                new Waline({
                el: '#waline',
                path: location.pathname,
                avatarCDN: '',
                serverURL: 'comment-vercel.ch3nnn.cn',
                avatar: 'monsterid',
                placeholder: "Let me know what you thinkï¼"
            });
            }
            if (true) {
                document.getElementById("comments-btn").onclick=function(){
                    document.getElementById("comments-btn").style.display="none";
                    loadWaline();
		    }} else {
            loadWaline();
            }
        };
    </script>


  </div>

   </main>
</div>

  <footer class="footer">
    <small class="footer_copyright">
      <div id="bottom-inner">
        Â© 2021 Site by Ch3nnn using
        <a target="_blank" rel="noopener" href="http://hexo.io">Hexo Blog Framework</a>.
        <br>
        <span> Theme is <a target="_blank" rel="noopener" href="https://github.com/dewjohn/hexo-theme-klise">Klise</a></span>
        |
        <span id="busuanzi_container_site_pv">
          Total view <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> times
        </span>
      </div>
      <!-- å¤‡æ¡ˆä¸»ä½“-->
      <a href="https://beian.miit.gov.cn/" rel="nofollow" target="_blank">
            <p style=" height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">
                äº¬ICPå¤‡19017311å·
            </p>
        </a>
    </small>
  </footer>

  

    
      <script src="/js/main.js"></script>
    
  
  <script>
    window.FPConfig = {
      delay: 0,
      ignoreKeywords: [],
      maxRPS: 3,
      hoverDelay: 50,
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>
  <!-- ä¸è’œå­è®¡æ•°å™¨ http://busuanzi.ibruce.info/  -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>
</html>
