

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golang-使用gvm进行版本控制 [ Ch3nnn个人博客 ]</title>

  <link rel="icon" href="/img/favicon.ico">


    <meta name="author" content="Ch3nnn">


    <meta name="subtitle" content="Ch3nnn 个人博客 | 折腾不息 · 乐此不疲.">


    <meta name="Description" content="小站主要用来分享和记录学习经验,教程,记录个人生活的点滴以及一些随笔.">


    <meta name="keywords" content=",linux, nginx, mysql, 服务器, ubuntu, shell, web, mac, python, django, es">


  <link rel="alternate" href="/feed.xml " title="Ch3nnn个人博客" type="application/atom+xml">


  
    <link rel="stylesheet" href="/css/main.css">
  


<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

<meta name="generator" content="Hexo 6.3.0"></head>
  <body data-theme="light" class="notransition">
    <script>
      const body = document.body;
      const data = body.getAttribute("data-theme");
      const initTheme = (state) => {
        if (state === "dark") {
          body.setAttribute("data-theme", "dark");
        } else if (state === "light") {
          body.removeAttribute("data-theme");
        } else {
          localStorage.setItem("theme", data);
        }
      };
   
      initTheme(localStorage.getItem("theme"));
      
      setTimeout(() => body.classList.remove("notransition"), 75);
    </script>
  <div class="navbar" role="navigation">
    <nav class="menu">
      <input type="checkbox" id="menu-trigger" class="menu-trigger" />
      <label for="menu-trigger">
        <span class="menu-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 512 512"
          >
            <path
              d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
            />
          </svg>
        </span>
      </label>
      <a id="mode">
        <svg
          class="mode-sunny"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>LIGHT</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
        <svg
          class="mode-moon"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <title>DARK</title>
          <line
            x1="256"
            y1="48"
            x2="256"
            y2="96"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="256"
            y1="416"
            x2="256"
            y2="464"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="108.92"
            x2="369.14"
            y2="142.86"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="369.14"
            x2="108.92"
            y2="403.08"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="464"
            y1="256"
            x2="416"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="96"
            y1="256"
            x2="48"
            y2="256"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="403.08"
            y1="403.08"
            x2="369.14"
            y2="369.14"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <line
            x1="142.86"
            y1="142.86"
            x2="108.92"
            y2="108.92"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
          <circle
            cx="256"
            cy="256"
            r="80"
            style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"
          />
        </svg>
      </a>
      <div class="trigger">
        <div class="trigger-container">
          
            
            
            
            
            
            
            <a class="menu-link " href="/"> Home 🏠</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/about/"> About 👨‍💻</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/archives/"> Archives 📆</a>
          
            
            
            
            
            
            
            <a class="menu-link " href="/tags/"> Tags 🏷️</a>
          
              <a class="menu-link" href="/feed.xml"><svg
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="17"
            viewBox="0 0 512 512"
            fill="#ED812E"
          >
            <title>RSS</title>
            <path
              d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z"
            />
            <path
              d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z"
            />
            <path
              d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z"
            />
          </svg></a>
        </div>
      </div>
    </nav>
  </div>

  
<div class="wrapper post">
  <main class="page-content" aria-label="Content">
      <header class="header">
        
          <div class="tags">
            <a href="/tags/Go/" class="tag"># Go</a>
          </div>
        
        <h1 class="header-title" itemprop="headline">Golang-使用gvm进行版本控制</h1>
          <div class="post-meta">
            <time>8月 14, 2023</time>
            <span itemprop="author">
              <span itemprop="name">Ch3nnn</span>
            </span>
          </div>
        </header>

          <div class="page-content"><p>当你想为每个项目切换 go 版本时，gvm (Go Version Manager) 很方便。</p>
<p>这里，我将介绍“如何在Mac上安装gvm”和“如何使用gvm”</p>
<h2 id="使用准备"><a href="#使用准备" class="headerlink" title="使用准备"></a>使用准备</h2><h3 id="仅适用于-Mac-的准备工作"><a href="#仅适用于-Mac-的准备工作" class="headerlink" title="仅适用于 Mac 的准备工作"></a>仅适用于 Mac 的准备工作</h3><p>按照MacOSX 要求中的说明执行以下命令。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xcode-select --install</span><br><span class="line">brew update</span><br><span class="line">brew install mercurial</span><br></pre></td></tr></table></figure>

<h3 id="gvm安装"><a href="#gvm安装" class="headerlink" title="gvm安装"></a>gvm安装</h3><p>我使用 zsh 作为我的 shell。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span></span><br><span class="line">/bin/zsh</span><br></pre></td></tr></table></figure>

<p>对于 zsh，您可以这样安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">zsh &lt; &lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)</span></span><br><span class="line">Cloning from https://github.com/moovweb/gvm.git to /Users/user_name/.gvm</span><br><span class="line">No existing Go versions detected</span><br><span class="line">Installed GVM v1.0.22</span><br><span class="line"></span><br><span class="line">Please restart your terminal session or to get started right away run</span><br><span class="line"> `source /Users/user_name/.gvm/scripts/gvm`</span><br></pre></td></tr></table></figure>

<p><code>~/.zshrc</code> 以下行被添加到最后一行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[[ -s &quot;/Users/user_name/.gvm/scripts/gvm&quot; ]] &amp;&amp; source &quot;/Users/user_name/.gvm/scripts/gvm&quot;</span><br></pre></td></tr></table></figure>

<p>重新启动终端 gvm 即可使用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gvm <span class="built_in">help</span></span></span><br><span class="line">Usage: gvm [command]</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">  GVM is the Go Version Manager</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  version    - print the gvm version number</span><br><span class="line">  get        - gets the latest code (for debugging)</span><br><span class="line">  use        - select a go version to use (--default to set permanently)</span><br><span class="line">  diff       - view changes to Go root</span><br><span class="line">  help       - display this usage text</span><br><span class="line">  implode    - completely remove gvm</span><br><span class="line">  install    - install go versions</span><br><span class="line">  uninstall  - uninstall go versions</span><br><span class="line">  cross      - install go cross compilers</span><br><span class="line">  linkthis   - link this directory into GOPATH</span><br><span class="line">  list       - list installed go versions</span><br><span class="line">  listall    - list available versions</span><br><span class="line">  alias      - manage go version aliases</span><br><span class="line">  pkgset     - manage go packages sets</span><br><span class="line">  pkgenv     - edit the environment for a package set</span><br></pre></td></tr></table></figure>

<h2 id="如何使用gvm"><a href="#如何使用gvm" class="headerlink" title="如何使用gvm"></a>如何使用gvm</h2><h3 id="查看可以安装的版本"><a href="#查看可以安装的版本" class="headerlink" title="查看可以安装的版本"></a>查看可以安装的版本</h3><p><code>gvm listall</code> 您可以检查可以安装哪个版本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gvm listall</span></span><br><span class="line"></span><br><span class="line">gvm gos (available)</span><br><span class="line"></span><br><span class="line">   go1</span><br><span class="line">   go1.0.1</span><br><span class="line">   go1.0.2</span><br><span class="line">   go1.0.3</span><br><span class="line">   go1.1</span><br><span class="line">   go1.1rc2</span><br><span class="line">   go1.1rc3</span><br><span class="line">   :</span><br></pre></td></tr></table></figure>

<h3 id="安装-go-版本"><a href="#安装-go-版本" class="headerlink" title="安装 go 版本"></a>安装 go 版本</h3><p>M1 Mac 我正在使用，但是当我执行以下命令时，出现错误</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gvm install go1.16.15 -B</span></span><br><span class="line">Installing go1.16.15 from binary source</span><br><span class="line">ERROR: Binary Go unavailable for this platform</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ gvm install go1.17.5 -B</span> </span><br><span class="line">Installing go1.17.5 from binary source</span><br><span class="line">ERROR: Binary Go unavailable for this platform</span><br></pre></td></tr></table></figure>
<p> 我在以下方面取得了成功：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install go</span></span><br><span class="line">==&gt; Downloading https://ghcr.io/v2/homebrew/core/go/manifests/1.18</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">    :</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ gvm install go1.16.15</span>   </span><br><span class="line">Installing go1.16.15...</span><br><span class="line"> * Compiling...</span><br><span class="line">go1.16.15 successfully installed!</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ gvm use go1.16.15 --default</span></span><br><span class="line">Now using version go1.16.15</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ go version</span>          </span><br><span class="line">go version go1.16.15 darwin/arm64</span><br></pre></td></tr></table></figure>

<p>之后，即使我卸载了用brew安装的go，我也能够安装另一个版本的go。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew uninstall go</span>          </span><br><span class="line">Uninstalling /opt/homebrew/Cellar/go/1.18... (11,947 files, 595.3MB)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ gvm install go1.17.5</span>   </span><br><span class="line">Installing go1.17.5...</span><br><span class="line"> * Compiling...</span><br><span class="line">go1.17.5 successfully installed!</span><br></pre></td></tr></table></figure>
<p>1.16.15 已安装 1.17.5 ，但为每个版本生成了一个文件夹，如下所示。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> ~/.gvm/gos</span> </span><br><span class="line">go1.16.15       go1.17.5</span><br></pre></td></tr></table></figure>
<h3 id="切换go版本来使用"><a href="#切换go版本来使用" class="headerlink" title="切换go版本来使用"></a>切换go版本来使用</h3><p>我目前正在go1.16.15 使用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gvm list</span></span><br><span class="line"></span><br><span class="line">gvm gos (installed)</span><br><span class="line"></span><br><span class="line">=&gt; go1.16.15</span><br><span class="line">   go1.17.5</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">echo</span> <span class="variable">$GOPATH</span></span></span><br><span class="line">/Users/user_name/.gvm/pkgsets/go1.16.15/global</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">echo</span> <span class="variable">$GOROOT</span></span></span><br><span class="line">/Users/user_name/.gvm/gos/go1.16.15</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ go version</span></span><br><span class="line">go version go1.16.15 darwin/arm64</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">which</span> go</span></span><br><span class="line">/Users/user_name/.gvm/gos/go1.16.15/bin/go</span><br></pre></td></tr></table></figure>
<p><code>1.17.5</code> 我会尝试切换到</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gvm use go1.17.5 --default</span> </span><br><span class="line">Now using version go1.17.5</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ gvm list</span>                  </span><br><span class="line"></span><br><span class="line">gvm gos (installed)</span><br><span class="line"></span><br><span class="line">   go1.16.15</span><br><span class="line">=&gt; go1.17.5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">echo</span> <span class="variable">$GOPATH</span></span></span><br><span class="line">/Users/user_name/.gvm/pkgsets/go1.17.5/global</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">echo</span> <span class="variable">$GOROOT</span></span></span><br><span class="line">/Users/user_name/.gvm/gos/go1.17.5</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ go version</span></span><br><span class="line">go version go1.17.5 darwin/arm64</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">which</span> go</span></span><br><span class="line">/Users/user_name/.gvm/gos/go1.17.5/bin/go</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://github.com/moovweb/gvm">https://github.com/moovweb/gvm</a></p>
</div>
          <nav class="post-nav">
    
    
    <a class="post-nav-item post-nav-next" href="/2023/08/11/Golang-%E8%AF%AD%E8%A8%80%E6%BA%90%E7%A0%81%E7%BA%A7%E8%B0%83%E8%AF%95%E5%99%A8-Delve/">
      <div class="nav-arrow">OLDER&nbsp;&gt;</div>
      <span class="post-title">Golang-语言源码级调试器 Delve</span>
    </a>
    
  </nav>
          <div class="dis">
    
        <div class="btn" id="comments-btn">给我留言</div>
      
     
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
    <div id="waline"></div>
    <script>
        window.onload = function () {
            var loadWaline = function () {
                new Waline({
                el: '#waline',
                path: location.pathname,
                avatarCDN: '',
                serverURL: 'comment-vercel.ch3nnn.cn',
                avatar: 'monsterid',
                placeholder: "Let me know what you think！"
            });
            }
            if (true) {
                document.getElementById("comments-btn").onclick=function(){
                    document.getElementById("comments-btn").style.display="none";
                    loadWaline();
		    }} else {
            loadWaline();
            }
        };
    </script>


  </div>

   </main>
</div>

  <footer class="footer">
    <small class="footer_copyright">
      <div id="bottom-inner">
        © 2021 Site by Ch3nnn using
        <a target="_blank" rel="noopener" href="http://hexo.io">Hexo Blog Framework</a>.
        <br>
        <span> Theme is <a target="_blank" rel="noopener" href="https://github.com/dewjohn/hexo-theme-klise">Klise</a></span>
        |
        <span id="busuanzi_container_site_pv">
          Total view <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> times
        </span>
      </div>
      <!-- 备案主体-->
      <a href="https://beian.miit.gov.cn/" rel="nofollow" target="_blank">
            <p style=" height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">
                京ICP备19017311号
            </p>
        </a>
    </small>
  </footer>

  

    
      <script src="/js/main.js"></script>
    
  
  <script>
    window.FPConfig = {
      delay: 0,
      ignoreKeywords: [],
      maxRPS: 3,
      hoverDelay: 50,
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>
  <!-- 不蒜子计数器 http://busuanzi.ibruce.info/  -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>
</html>
