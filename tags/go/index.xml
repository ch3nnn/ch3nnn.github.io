<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Go on Ch3nnn!Blog</title><link>https://blog.ch3nnn.cn/tags/go/</link><description>Recent content in Go on Ch3nnn!Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Thu, 20 Feb 2025 11:05:31 +0800</lastBuildDate><atom:link href="https://blog.ch3nnn.cn/tags/go/index.xml" rel="self" type="application/rss+xml"/><item><title>ä¼˜åŒ–ç»“æ„ä½“å†…å­˜å¯¹é½çš„é™æ€åˆ†æå·¥å…·-fieldalignment</title><link>https://blog.ch3nnn.cn/posts/2025/%E5%B7%A5%E5%85%B7-fieldalignment%E4%BC%98%E5%8C%96%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E7%9A%84%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/</link><pubDate>Thu, 20 Feb 2025 11:05:31 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2025/%E5%B7%A5%E5%85%B7-fieldalignment%E4%BC%98%E5%8C%96%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E7%9A%84%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/</guid><description>&lt;p>&lt;code>fieldalignment&lt;/code> æ˜¯ Go å®˜æ–¹å·¥å…·é“¾ä¸­ç”¨äºä¼˜åŒ–ç»“æ„ä½“å†…å­˜å¯¹é½çš„é™æ€åˆ†æå·¥å…·ï¼Œå¯è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤ç»“æ„ä½“å­—æ®µæ’åˆ—é¡ºåºé—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒè¦ç‚¹ï¼š&lt;/p>
&lt;hr>
&lt;h3 id="-å®‰è£…æ–¹å¼">ğŸ”§ å®‰è£…æ–¹å¼&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>go install golang.org/x/tools/go/analysis/passes/fieldalignment/cmd/fieldalignment@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="-åŸºç¡€ç”¨æ³•">ğŸš€ åŸºç¡€ç”¨æ³•&lt;/h3>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>å‘½ä»¤&lt;/th>
 &lt;th>ä½œç”¨&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>fieldalignment ./...&lt;/code>&lt;/td>
 &lt;td>æ‰«æå½“å‰é¡¹ç›®æ‰€æœ‰ç»“æ„ä½“&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>fieldalignment -fix ./...&lt;/code>&lt;/td>
 &lt;td>&lt;strong>è‡ªåŠ¨ä¿®å¤&lt;/strong>å¯ä¼˜åŒ–çš„ç»“æ„ä½“å­—æ®µé¡ºåº&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>fieldalignment -json ./...&lt;/code>&lt;/td>
 &lt;td>è¾“å‡º JSON æ ¼å¼æŠ¥å‘Š&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-åŠŸèƒ½ç‰¹æ€§">ğŸ” åŠŸèƒ½ç‰¹æ€§&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ™ºèƒ½æ£€æµ‹&lt;/strong>&lt;br>
è¯†åˆ«å­—æ®µæ’åˆ—é¡ºåºå¯¼è‡´å†…å­˜æµªè´¹çš„ç»“æ„ä½“ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// æ£€æµ‹å‰ (24 bytes)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">type&lt;/span> User &lt;span style="color:#5317ac">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> active &lt;span style="color:#005a5f">bool&lt;/span> &lt;span style="color:#505050">// 1å­—èŠ‚ (å¯¼è‡´åç»­å¡«å……)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id &lt;span style="color:#005a5f">int64&lt;/span> &lt;span style="color:#505050">// 8å­—èŠ‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> age &lt;span style="color:#005a5f">int32&lt;/span> &lt;span style="color:#505050">// 4å­—èŠ‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// æ£€æµ‹åè‡ªåŠ¨ä¼˜åŒ– (16 bytes)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">type&lt;/span> User &lt;span style="color:#5317ac">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id &lt;span style="color:#005a5f">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> age &lt;span style="color:#005a5f">int32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> active &lt;span style="color:#005a5f">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>èŠ‚çœè®¡ç®—&lt;/strong>&lt;br>
æŠ¥å‘Šæ½œåœ¨å†…å­˜èŠ‚çœé‡ï¼Œå¦‚ï¼š&lt;code>24 -&amp;gt; 16 bytes (saves 33%)&lt;/code>&lt;/p></description></item><item><title>Gorm åˆ†è¡¨ä¸­é—´ä»¶(Sharding)</title><link>https://blog.ch3nnn.cn/posts/2024/gorm-%E5%88%86%E8%A1%A8%E4%B8%AD%E9%97%B4%E4%BB%B6/</link><pubDate>Tue, 27 Aug 2024 00:51:35 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2024/gorm-%E5%88%86%E8%A1%A8%E4%B8%AD%E9%97%B4%E4%BB%B6/</guid><description>&lt;blockquote>
&lt;p>&lt;a href="https://github.com/go-gorm/sharding">Sharding&lt;/a> æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Gorm åˆ†è¡¨ä¸­é—´ä»¶ã€‚å®ƒåŸºäº Conn å±‚åš SQL æ‹¦æˆªã€AST è§£æã€åˆ†è¡¨è·¯ç”±ã€è‡ªå¢ä¸»é”®å¡«å……ï¼Œå¸¦æ¥çš„é¢å¤–å¼€é”€æå°ã€‚å¯¹å¼€å‘è€…å‹å¥½ã€é€æ˜ï¼Œä½¿ç”¨ä¸Šä¸æ™®é€š
SQLã€Gorm æŸ¥è¯¢æ— å·®åˆ«ï¼Œåªéœ€è¦é¢å¤–æ³¨æ„ä¸€ä¸‹åˆ†è¡¨é”®æ¡ä»¶ã€‚ ä¸ºæ‚¨æä¾›é«˜æ€§èƒ½çš„æ•°æ®åº“è®¿é—®&lt;/p>&lt;/blockquote>
&lt;h2 id="ä¸€åŠŸèƒ½ç‰¹ç‚¹">ä¸€ã€åŠŸèƒ½ç‰¹ç‚¹&lt;/h2>
&lt;ul>
&lt;li>éä¾µå…¥å¼è®¾è®¡ï¼Œ åŠ è½½æ’ä»¶ï¼ŒæŒ‡å®šé…ç½®ï¼Œæ—¢å¯å®ç°åˆ†è¡¨ã€‚&lt;/li>
&lt;li>è½»å¿«ï¼Œ éåŸºäºç½‘ç»œå±‚çš„ä¸­é—´ä»¶ï¼Œåƒ Go ä¸€æ ·å¿«&lt;/li>
&lt;li>æ”¯æŒå¤šç§æ•°æ®åº“ã€‚ PostgreSQL å·²é€šè¿‡æµ‹è¯•ï¼ŒMySQL å’Œ SQLite ä¹Ÿåœ¨è·¯ä¸Šã€‚&lt;/li>
&lt;li>å¤šç§ä¸»é”®ç”Ÿæˆæ–¹å¼æ”¯æŒï¼ˆSnowflake, PostgreSQL Sequence, ä»¥åŠè‡ªå®šä¹‰æ”¯æŒï¼‰Snowflake æ”¯æŒä»ä¸»é”®ä¸­ç¡®å®šåˆ†è¡¨é”®ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="äºŒç¤ºä¾‹ä»£ç ">äºŒã€ç¤ºä¾‹ä»£ç &lt;/h2>
&lt;p>æ³¨æ„: ä¾ç„¶ä¿æŒåŸæ¥çš„æ–¹å¼ä½¿ç”¨ db æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚ ä½ åªéœ€è¦æ³¨æ„åœ¨ CURD åŠ¨ä½œçš„æ—¶å€™ï¼Œæ˜ç¡®çŸ¥é“ &lt;strong>Sharding Key&lt;/strong> å¯¹åº”çš„åˆ†è¡¨ï¼Œ&lt;strong>æŸ¥è¯¢æ¡ä»¶å¸¦ Sharding Keyï¼Œä»¥ç¡®ä¿
Sharding èƒ½ç†è§£æ•°æ®éœ€è¦å¯¹åº”åˆ°å“ªä¸€ä¸ªå­è¡¨&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;h3 id="mysql">Mysql&lt;/h3>
&lt;p>Gorm Sharding ä¸­å†…ç½®äº† MySQL åºåˆ—ä¸»é”®å®ç°ï¼Œåªéœ€é…ç½®PrimaryKeyGenerator: sharding.PKMySQLSequenceå³å¯ä½¿ç”¨ã€‚&lt;/p>
&lt;p>æ‚¨ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºåºåˆ—ï¼Œå½“ MySQL åºåˆ—ä¸å­˜åœ¨æ—¶ï¼ŒGorm Sharding ä¼šæ£€æŸ¥å¹¶åˆ›å»ºã€‚&lt;/p>
&lt;p>è¿™ä¸ªåºåˆ—ååé¢è·Ÿç€gorm_sharding_${table_name}_id_seqï¼Œä¾‹å¦‚ordersè¡¨ï¼Œåºåˆ—åå°±æ˜¯gorm_sharding_orders_id_seqã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050"> * @Author: chentong
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050"> * @Date: 2024/08/27 00:09
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;gorm.io/driver/mysql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;gorm.io/gorm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;gorm.io/sharding&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">type&lt;/span> Order &lt;span style="color:#5317ac">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ID &lt;span style="color:#005a5f">int64&lt;/span> &lt;span style="color:#2544bb">`gorm:&amp;#34;primarykey&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UserID &lt;span style="color:#005a5f">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ProductID &lt;span style="color:#005a5f">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">TestSharding_Mysql&lt;/span>(t &lt;span style="color:#00538b">*&lt;/span>testing.T) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dsn &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#2544bb">&amp;#34;root:123456@tcp(localhost:3306)/dev?parseTime=True&amp;amp;timeout=5s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> db, err &lt;span style="color:#00538b">:=&lt;/span> gorm.&lt;span style="color:#721045">Open&lt;/span>(mysql.&lt;span style="color:#721045">Open&lt;/span>(dsn))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">if&lt;/span> err &lt;span style="color:#00538b">!=&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">panic&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>; i &amp;lt; &lt;span style="color:#0000c0">2&lt;/span>; i &lt;span style="color:#00538b">+=&lt;/span> &lt;span style="color:#0000c0">1&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> table &lt;span style="color:#00538b">:=&lt;/span> fmt.&lt;span style="color:#721045">Sprintf&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;orders_%d&amp;#34;&lt;/span>, i)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">`DROP TABLE IF EXISTS `&lt;/span> &lt;span style="color:#00538b">+&lt;/span> table)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;CREATE TABLE &amp;#34;&lt;/span> &lt;span style="color:#00538b">+&lt;/span> table &lt;span style="color:#00538b">+&lt;/span> &lt;span style="color:#2544bb">&amp;#34; ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `product_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> db.&lt;span style="color:#721045">Use&lt;/span>(sharding.&lt;span style="color:#721045">Register&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sharding.Config{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ShardingKey: &lt;span style="color:#2544bb">&amp;#34;user_id&amp;#34;&lt;/span>, &lt;span style="color:#505050">// åˆ†ç‰‡key&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NumberOfShards: &lt;span style="color:#0000c0">2&lt;/span>, &lt;span style="color:#505050">// åˆ†ç‰‡æ•°é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PrimaryKeyGenerator: sharding.PKMySQLSequence, &lt;span style="color:#505050">// ä¸»é”®ç”Ÿæˆå™¨, è¿™é‡Œä½¿ç”¨ mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> []&lt;span style="color:#005a5f">string&lt;/span>{&lt;span style="color:#2544bb">&amp;#34;orders&amp;#34;&lt;/span>}, &lt;span style="color:#505050">// éœ€è¦åˆ†ç‰‡ tables &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// this record will insert to orders_02&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Create&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>Order{UserID: &lt;span style="color:#0000c0">2&lt;/span>}).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">if&lt;/span> err &lt;span style="color:#00538b">!=&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// this record will insert to orders_03&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;INSERT INTO orders(user_id) VALUES(?)&amp;#34;&lt;/span>, &lt;span style="color:#8f0075">int64&lt;/span>(&lt;span style="color:#0000c0">3&lt;/span>)).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">if&lt;/span> err &lt;span style="color:#00538b">!=&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// this will throw ErrMissingShardingKey error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;INSERT INTO orders(product_id) VALUES(1)&amp;#34;&lt;/span>).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// this will redirect query to orders_02&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> orders []Order
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Model&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>Order{}).&lt;span style="color:#721045">Where&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;user_id&amp;#34;&lt;/span>, &lt;span style="color:#8f0075">int64&lt;/span>(&lt;span style="color:#0000c0">2&lt;/span>)).&lt;span style="color:#721045">Find&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>orders).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">if&lt;/span> err &lt;span style="color:#00538b">!=&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Printf&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;%#v\n&amp;#34;&lt;/span>, orders)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// Raw SQL also supported&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> db.&lt;span style="color:#721045">Raw&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;SELECT * FROM orders WHERE user_id = ?&amp;#34;&lt;/span>, &lt;span style="color:#8f0075">int64&lt;/span>(&lt;span style="color:#0000c0">3&lt;/span>)).&lt;span style="color:#721045">Scan&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>orders)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Printf&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;%#v\n&amp;#34;&lt;/span>, orders)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// this will throw ErrMissingShardingKey error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Model&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>Order{}).&lt;span style="color:#721045">Where&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;product_id&amp;#34;&lt;/span>, &lt;span style="color:#2544bb">&amp;#34;1&amp;#34;&lt;/span>).&lt;span style="color:#721045">Find&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>orders).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// Update and Delete are similar to create and query&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;UPDATE orders SET product_id = ? WHERE user_id = ?&amp;#34;&lt;/span>, &lt;span style="color:#0000c0">2&lt;/span>, &lt;span style="color:#8f0075">int64&lt;/span>(&lt;span style="color:#0000c0">3&lt;/span>)).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err) &lt;span style="color:#505050">// nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> err = db.&lt;span style="color:#721045">Exec&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;DELETE FROM orders WHERE product_id = 3&amp;#34;&lt;/span>).Error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fmt.&lt;span style="color:#721045">Println&lt;/span>(err) &lt;span style="color:#505050">// ErrMissingShardingKey&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Go ç¼–ç¨‹é£æ ¼æŒ‡å— - æœ€ä½³å®è·µ</title><link>https://blog.ch3nnn.cn/posts/2024/go%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</link><pubDate>Mon, 03 Jun 2024 10:42:06 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2024/go%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</guid><description>&lt;p>åŸæ–‡ï¼š&lt;a href="https://google.github.io/styleguide/go">https://google.github.io/styleguide/go&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://gocn.github.io/styleguide/docs/01-overview/">æ¦‚è¿°&lt;/a> | &lt;a href="https://gocn.github.io/styleguide/docs/02-guide/">é£æ ¼æŒ‡å—&lt;/a> | &lt;a href="https://gocn.github.io/styleguide/docs/03-decisions/">é£æ ¼å†³ç­–&lt;/a> | &lt;a href="https://gocn.github.io/styleguide/docs/04-best-practices/">æœ€ä½³å®è·µ&lt;/a>&lt;/p>
&lt;p>&lt;strong>æ³¨æ„ï¼š&lt;/strong> æœ¬æ–‡æ˜¯ Google &lt;a href="https://gocn.github.io/styleguide/docs/01-overview/">Go é£æ ¼&lt;/a> ç³»åˆ—æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚æœ¬æ–‡æ¡£æ˜¯ *
&lt;em>&lt;a href="https://gocn.github.io/styleguide/docs/01-overview/#%E6%A0%87%E5%87%86normative">è§„èŒƒæ€§(normative)&lt;/a>
ä½†ä¸æ˜¯&lt;a href="https://gocn.github.io/styleguide/docs/01-overview/#%E8%A7%84%E8%8C%83canonical">å¼ºåˆ¶è§„èŒƒ(canonical)&lt;/a>&lt;/em>*
ï¼Œå¹¶ä¸”ä»å±äº&lt;a href="https://gocn.github.io/styleguide/docs/02-guide/">Google é£æ ¼æŒ‡å—&lt;/a>
ã€‚è¯·å‚é˜…&lt;a href="https://gocn.github.io/styleguide/docs/01-overview/#%E5%85%B3%E4%BA%8E">æ¦‚è¿°&lt;/a>è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="å…³äº">å…³äº&lt;/h2>
&lt;p>æœ¬æ–‡ä»¶è®°å½•äº†&lt;strong>å…³äºå¦‚ä½•æ›´å¥½åœ°åº”ç”¨ Go é£æ ¼æŒ‡å—çš„æŒ‡å¯¼æ„è§&lt;/strong>ã€‚è¯¥æŒ‡å¯¼æ—¨åœ¨è§£å†³ç»å¸¸å‡ºç°çš„é€šç”¨é—®é¢˜ï¼Œä½†ä¸ä¸€å®šé€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¤šç§æ›¿ä»£æ–¹æ³•ï¼Œä»¥åŠå†³å®šä½•æ—¶è¯¥ç”¨å’Œä½•æ—¶ä¸è¯¥ç”¨è¿™äº›æ–¹æ³•çš„è€ƒè™‘å› ç´ ã€‚&lt;/p>
&lt;p>æŸ¥çœ‹&lt;a href="https://gocn.github.io/styleguide/docs/01-overview/#%E5%85%B3%E4%BA%8E">æ¦‚è¿°&lt;/a>æ¥è·å–å®Œæ•´çš„é£æ ¼æŒ‡å¯¼æ–‡æ¡£&lt;/p>
&lt;h2 id="å‘½å">å‘½å&lt;/h2>
&lt;h3 id="å‡½æ•°å’Œæ–¹æ³•åç§°">å‡½æ•°å’Œæ–¹æ³•åç§°&lt;/h3>
&lt;h4 id="é¿å…é‡å¤">é¿å…é‡å¤&lt;/h4>
&lt;p>åœ¨ä¸ºä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•é€‰æ‹©åç§°æ—¶ï¼Œè¦è€ƒè™‘è¯¥åç§°å°†è¢«é˜…è¯»çš„ç¯å¢ƒã€‚è¯·è€ƒè™‘ä»¥ä¸‹å»ºè®®ï¼Œä»¥é¿å…åœ¨è°ƒç”¨åœ°ç‚¹å‡ºç°è¿‡å¤šçš„&lt;a href="https://gocn.github.io/styleguide/docs/03-decisions/#%E9%87%8D%E5%A4%8Drepetition">é‡å¤&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä»¥ä¸‹å†…å®¹ä¸€èˆ¬å¯ä»¥ä»å‡½æ•°å’Œæ–¹æ³•åç§°ä¸­çœç•¥ã€‚&lt;/p>
&lt;ul>
&lt;li>è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹ï¼ˆå½“æ²¡æœ‰å†²çªçš„æ—¶å€™ï¼‰&lt;/li>
&lt;li>æ–¹æ³•çš„æ¥æ”¶å™¨çš„ç±»å‹&lt;/li>
&lt;li>ä¸€ä¸ªè¾“å…¥æˆ–è¾“å‡ºæ˜¯å¦æ˜¯ä¸€ä¸ªæŒ‡é’ˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºå‡½æ•°ï¼Œä¸è¦&lt;a href="https://gocn.github.io/styleguide/docs/03-decisions/#%E5%8C%85%E5%90%8D-vs-%E5%8F%AF%E5%AF%BC%E5%87%BA%E7%AC%A6%E5%8F%B7%E5%90%8Dpackage-vs-exported-symbol-name">é‡å¤è½¯ä»¶åŒ…çš„åç§°&lt;/a>ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Bad:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> yamlconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">ParseYAMLConfig&lt;/span>(input &lt;span style="color:#005a5f">string&lt;/span>) (&lt;span style="color:#00538b">*&lt;/span>Config, &lt;span style="color:#005a5f">error&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Good:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> yamlconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">Parse&lt;/span>(input &lt;span style="color:#005a5f">string&lt;/span>) (&lt;span style="color:#00538b">*&lt;/span>Config, &lt;span style="color:#005a5f">error&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¯¹äºæ–¹æ³•ä¸è¦é‡å¤æ–¹æ³•æ¥æ”¶å™¨çš„åç§°ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Bad:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> (c &lt;span style="color:#00538b">*&lt;/span>Config) &lt;span style="color:#721045">WriteConfigTo&lt;/span>(w io.Writer) (&lt;span style="color:#005a5f">int64&lt;/span>, &lt;span style="color:#005a5f">error&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Good:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> (c &lt;span style="color:#00538b">*&lt;/span>Config) &lt;span style="color:#721045">WriteTo&lt;/span>(w io.Writer) (&lt;span style="color:#005a5f">int64&lt;/span>, &lt;span style="color:#005a5f">error&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¸è¦é‡å¤ä¼ å‚çš„å˜é‡åç§°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Bad:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">OverrideFirstWithSecond&lt;/span>(dest, source &lt;span style="color:#00538b">*&lt;/span>Config) &lt;span style="color:#005a5f">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Good:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">Override&lt;/span>(dest, source &lt;span style="color:#00538b">*&lt;/span>Config) &lt;span style="color:#005a5f">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¸è¦é‡å¤è¿”å›å€¼çš„åç§°å’Œç±»å‹&lt;/p></description></item><item><title>Protobuf æ–‡æ¡£ç”Ÿæˆå™¨æ’ä»¶</title><link>https://blog.ch3nnn.cn/posts/2024/%E5%B7%A5%E5%85%B7-protobuf%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E5%99%A8%E6%8F%92%E4%BB%B6/</link><pubDate>Wed, 28 Feb 2024 16:20:31 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2024/%E5%B7%A5%E5%85%B7-protobuf%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E5%99%A8%E6%8F%92%E4%BB%B6/</guid><description>&lt;blockquote>
&lt;p>è¿™æ˜¯ Google Protocol Buffers æ–‡æ¡£ç”Ÿæˆå™¨æ’ä»¶ (protoc)ã€‚
è¯¥æ’ä»¶å¯ä»¥æ ¹æ®æ–‡ä»¶ä¸­çš„æ³¨é‡Šç”Ÿæˆ HTMLã€JSONã€DocBook å’Œ Markdown æ–‡æ¡£ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€&lt;/h2>
&lt;p>æ¯«æ— ç–‘é—®, ç›®å‰åå°å¼€å‘æ¥å£åè®®åº”ç”¨æœ€å¹¿æ³›çš„é™¤äº† HTTP ä¹‹å¤–å°±æ˜¯ gRPC äº†, HTTP æ¥å£æœ‰æˆç†Ÿçš„&lt;code>swagger&lt;/code>å·¥å…·å¯ä»¥ç”Ÿæˆç•Œé¢ç¾è§‚å’Œä½¿ç”¨å‹å¥½çš„æ–‡æ¡£ï¼Œé‚£ä¹ˆå¯¹äºgRPCå‘¢ï¼Ÿ&lt;/p>
&lt;p>æ‰€ä»¥é€šè¿‡ .proto æ–‡ä»¶èƒ½å¦ç”Ÿæˆæ›´æ˜“é˜…è¯»çš„ HTML æ¥å£æ–‡æ¡£ï¼Ÿ&lt;/p>
&lt;h2 id="äºŒå®‰è£…">äºŒã€å®‰è£…&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>go install github.com/pseudomuto/protoc-gen-doc/cmd/protoc-gen-doc@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ä¸‰ä½¿ç”¨">ä¸‰ã€ä½¿ç”¨&lt;/h2>
&lt;h3 id="userproto-æ–‡ä»¶">user.proto æ–‡ä»¶&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>ä»¥&lt;code>user.proto&lt;/code>ä¸ºä¾‹, å¦‚ä¸‹å†…å®¹:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span style="display:flex;">&lt;span>syntax &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#2544bb">&amp;#34;proto3&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">option&lt;/span> go_package &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#2544bb">&amp;#34;./pb&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> user;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// ------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Messages
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// ------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">//--------------------------------ç”¨æˆ·--------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">message&lt;/span> SysUser {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#005a5f">int64&lt;/span> id &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">1&lt;/span>; &lt;span style="color:#505050">// ID
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">string&lt;/span> username &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">2&lt;/span>; &lt;span style="color:#505050">// ç”¨æˆ·å
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">string&lt;/span> password &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">3&lt;/span>; &lt;span style="color:#505050">// å¯†ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> create_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">4&lt;/span>; &lt;span style="color:#505050">// åˆ›å»ºæ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> update_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">5&lt;/span>; &lt;span style="color:#505050">// ä¿®æ”¹æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> delete_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">6&lt;/span>; &lt;span style="color:#505050">// åˆ é™¤æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">message&lt;/span> SysUserFilter {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> id &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">1&lt;/span>; &lt;span style="color:#505050">// ID
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">string&lt;/span> username &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">2&lt;/span>; &lt;span style="color:#505050">// ç”¨æˆ·å
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">string&lt;/span> password &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">3&lt;/span>; &lt;span style="color:#505050">// å¯†ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> create_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">4&lt;/span>; &lt;span style="color:#505050">// åˆ›å»ºæ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> update_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">5&lt;/span>; &lt;span style="color:#505050">// ä¿®æ”¹æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> delete_at &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">6&lt;/span>; &lt;span style="color:#505050">// åˆ é™¤æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">message&lt;/span> SelectSysUserListReq {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#005a5f">int64&lt;/span> page &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">1&lt;/span>; &lt;span style="color:#505050">// é¡µç 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> page_size &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">2&lt;/span>; &lt;span style="color:#505050">// æ¯é¡µæ•°é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">optional&lt;/span> SysUserFilter filter &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">3&lt;/span>; &lt;span style="color:#505050">// SysUserFilter
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">message&lt;/span> SelectSysUserListResp {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#005a5f">int64&lt;/span> count &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">1&lt;/span>; &lt;span style="color:#505050">// æ€»æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#005a5f">int64&lt;/span> page_count &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">2&lt;/span>; &lt;span style="color:#505050">// é¡µç æ€»æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">repeated&lt;/span> SysUser results &lt;span style="color:#00538b">=&lt;/span> &lt;span style="color:#0000c0">3&lt;/span>; &lt;span style="color:#505050">// sys_user
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// ------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Rpc Func
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// ------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">service&lt;/span> User {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">//-----------------------ç”¨æˆ·-----------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// ç”¨æˆ· åˆ—è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">&lt;/span> &lt;span style="color:#5317ac">rpc&lt;/span> SelectSysUserList(SelectSysUserListReq) &lt;span style="color:#5317ac">returns&lt;/span> (SelectSysUserListResp);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="1-ç”Ÿæˆ-markdown-æ–‡æ¡£">1. ç”Ÿæˆ markdown æ–‡æ¡£&lt;/h3>
&lt;ol>
&lt;li>å‘½ä»¤:
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>protoc --doc_out&lt;span style="color:#00538b">=&lt;/span>. --doc_opt&lt;span style="color:#00538b">=&lt;/span>markdown,index.md pb/*.proto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>æ•ˆæœ:
&lt;img src="https://s2.loli.net/2024/02/28/TwXqVdFvJyNZnfp.png" alt="20240228172356.png">&lt;/li>
&lt;/ol>
&lt;h3 id="2-ç”Ÿæˆ-html-æ–‡æ¡£">2. ç”Ÿæˆ html æ–‡æ¡£&lt;/h3>
&lt;ol>
&lt;li>å‘½ä»¤:
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>protoc --doc_out&lt;span style="color:#00538b">=&lt;/span>. --doc_opt&lt;span style="color:#00538b">=&lt;/span>html,index.html pb/*.proto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>æ•ˆæœ:
&lt;img src="https://s2.loli.net/2024/02/28/Jv67NT9cpYdCjre.png" alt="">&lt;/li>
&lt;/ol>
&lt;h2 id="å››è‡ªå®šä¹‰æ¨¡æ¿">å››ã€è‡ªå®šä¹‰æ¨¡æ¿&lt;/h2>
&lt;p>å¦‚æœæƒ³ä½¿ç”¨è‡ªå·±çš„æ¨¡æ¿, åªéœ€ä½¿ç”¨æ¨¡æ¿æ–‡ä»¶çš„è·¯å¾„è€Œä¸æ˜¯ç±»å‹ã€‚&lt;/p></description></item><item><title>æ›´ä¸¥æ ¼çš„ä»£ç æ ¼å¼åŒ–å·¥å…·-gofumpt</title><link>https://blog.ch3nnn.cn/posts/2024/golang-%E6%9B%B4%E4%B8%A5%E6%A0%BC%E7%9A%84%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B7%A5%E5%85%B7gofumpt/</link><pubDate>Mon, 19 Feb 2024 19:56:22 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2024/golang-%E6%9B%B4%E4%B8%A5%E6%A0%BC%E7%9A%84%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B7%A5%E5%85%B7gofumpt/</guid><description>&lt;h2 id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€&lt;/h2>
&lt;p>gofmt æ˜¯ golang è‡ªå¸¦çš„ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼Œæ˜¯ä¿è¯ Go ä»£ç é£æ ¼ä¸€è‡´çš„å¤§æ€å™¨ã€‚æˆ‘ä»¬è¿™æ¬¡è¦æ¨èçš„ gofumpt åœ¨ gofmt çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€ç³»åˆ—æ›´åŠ ä¸¥æ ¼çš„æ ¼å¼åŒ–è§„åˆ™ï¼Œå¹¶ä¿è¯äº†å¯¹
gofmt çš„å…¼å®¹ã€‚&lt;/p>
&lt;h2 id="äºŒgofumpt-ç®€ä»‹">äºŒã€gofumpt ç®€ä»‹&lt;/h2>
&lt;p>gofumpt(&lt;a href="https://github.com/mvdan/gofumpt">https://github.com/mvdan/gofumpt&lt;/a>) fork è‡ª gofmtï¼Œæ”¯æŒä¸ gofmt å‡ ä¹ç›¸åŒçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå› æ­¤å¯ä»¥ä½œä¸º gofmt çš„ç›´æ¥æ›¿ä»£å“ä½¿ç”¨ã€‚gofumpt æ˜¯
gofmt çš„&amp;quot;è¶…é›†&amp;quot;ï¼Œç»è¿‡ gofumpt æ ¼å¼åŒ–çš„ä»£ç ä¹Ÿç¬¦åˆ gofmt çš„è¦æ±‚ï¼Œå…¶æœ¬èº«æ‰€æ‰©å±•çš„æ ¼å¼åŒ–è§„åˆ™ä¹Ÿå¯èƒ½åœ¨åç»­è¢«é›†æˆè¿› gofmtã€‚&lt;/p>
&lt;p>gofumpt æœ‰ä»¥ä¸‹ç‰¹ç‚¹:&lt;/p>
&lt;ul>
&lt;li>æ›´å¤šçš„æ ¼å¼åŒ–è§„åˆ™(å‚è§ &lt;a href="https://github.com/mvdan/gofumpt#Added-rules">https://github.com/mvdan/gofumpt#Added-rules&lt;/a>)&lt;/li>
&lt;li>é»˜è®¤è·³è¿‡å¯¹ vendor çš„æ ¼å¼åŒ–&lt;/li>
&lt;li>ä¸å¯¹è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç åº”ç”¨æ‰©å±•è§„åˆ™&lt;/li>
&lt;li>ä¸æ”¯æŒ -r å‚æ•°&lt;/li>
&lt;/ul>
&lt;h2 id="ä¸‰å®‰è£…ä½¿ç”¨å‘½ä»¤">ä¸‰ã€å®‰è£…ã€ä½¿ç”¨å‘½ä»¤&lt;/h2>
&lt;p>å®‰è£…å‘½ä»¤:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>go install mvdan.cc/gofumpt@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰§è¡Œå‘½ä»¤:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>gofumpt -l -w .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å››ä½¿ç”¨ä¸¾ä¾‹">å››ã€ä½¿ç”¨ä¸¾ä¾‹&lt;/h2>
&lt;p>&lt;strong>èµ‹å€¼è¿ç®—ç¬¦åé¢æ²¡æœ‰ç©ºè¡Œ&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">foo&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>foo &lt;span style="color:#00538b">:=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#2544bb">&amp;#34;bar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ”¹ä¸º gofumpt æ ¼å¼åŒ–åï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">foo&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>foo &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#2544bb">&amp;#34;bar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>å‡½æ•°ä½“å‘¨å›´æ²¡æœ‰ç©ºè¡Œ&lt;/strong>&lt;/p></description></item><item><title>æºç çº§è°ƒè¯•å™¨ Delve</title><link>https://blog.ch3nnn.cn/posts/2023/golang-%E8%AF%AD%E8%A8%80%E6%BA%90%E7%A0%81%E7%BA%A7%E8%B0%83%E8%AF%95%E5%99%A8-delve/</link><pubDate>Fri, 11 Aug 2023 15:43:40 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2023/golang-%E8%AF%AD%E8%A8%80%E6%BA%90%E7%A0%81%E7%BA%A7%E8%B0%83%E8%AF%95%E5%99%A8-delve/</guid><description>&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;p>Go ç›®å‰çš„è°ƒè¯•å™¨æœ‰å¦‚ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>GDB&lt;/code> æœ€æ—©æœŸçš„è°ƒè¯•å·¥å…·ï¼Œç°åœ¨ç”¨çš„å¾ˆå°‘ã€‚&lt;/li>
&lt;li>&lt;code>LLDB&lt;/code> macOS ç³»ç»Ÿæ¨èçš„æ ‡å‡†è°ƒè¯•å·¥å…·ï¼Œå• Go çš„ä¸€äº›ä¸“æœ‰ç‰¹æ€§æ”¯æŒçš„æ¯”è¾ƒå°‘ã€‚&lt;/li>
&lt;li>&lt;code>Delve&lt;/code> ä¸“é—¨ä¸º Go è¯­è¨€æ‰“é€ çš„è°ƒè¯•å·¥å…·ï¼Œä½¿ç”¨æœ€ä¸ºå¹¿æ³›ã€‚&lt;/li>
&lt;/ul>
&lt;p>æœ¬ç¯‡ç®€å•è¯´æ˜å¦‚ä½•ä½¿ç”¨ &lt;code>Delve&lt;/code> å·¥å…·æ¥è°ƒè¯• Go ç¨‹åºï¼Œä½¿ç”¨çš„ &lt;code>delve&lt;/code> ç‰ˆæœ¬ä¸º 1.20.1ã€‚&lt;/p>
&lt;p>delve çš„æ±‰è¯­æ„æ€æ˜¯ï¼šé’»ç ”ã€æ¢ç´¢ï¼›ç”¨è¿™ä¸ªæ¥å‘½åä¸€ä¸ªdebugå·¥å…·è¿˜æ˜¯éå¸¸çš„å½¢è±¡ã€‚&lt;/p>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;p>å·²çŸ¥ä»¥ä¸‹è¯´æ˜é€‚ç”¨äº Linuxã€macOSã€Windows å’Œ FreeBSDã€‚&lt;/p>
&lt;p>å…‹éš† git å­˜å‚¨åº“å¹¶æ„å»ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ git clone https://github.com/go-delve/delve
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#8f0075">cd&lt;/span> delve
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ go install github.com/go-delve/delve/cmd/dlv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ–è€…ï¼Œåœ¨ Go ç‰ˆæœ¬ 1.16 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šï¼š&lt;/p>
&lt;p>&lt;strong>Install the latest release:&lt;/strong>
&lt;code>$ go install github.com/go-delve/delve/cmd/dlv@latest&lt;/code>&lt;/p>
&lt;p>&lt;strong>Install at tree head:&lt;/strong>
&lt;code>$ go install github.com/go-delve/delve/cmd/dlv@master&lt;/code>&lt;/p>
&lt;p>&lt;strong>å®‰è£…åœ¨ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬æˆ–:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ go install github.com/go-delve/delve/cmd/dlv@v1.7.3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ go install github.com/go-delve/delve/cmd/dlv@v1.7.4-0.20211208103735-2f13672765fe
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‘½ä»¤">å‘½ä»¤&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>Usage:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dlv &lt;span style="color:#00538b">[&lt;/span>command&lt;span style="color:#00538b">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Available Commands:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> attach é™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å¹¶å¼€å§‹è°ƒè¯•.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connect ä½¿ç”¨ç»ˆç«¯å®¢æˆ·ç«¯è¿æ¥åˆ°æ— å¤´è°ƒè¯•æœåŠ¡å™¨.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> core æ£€æŸ¥æ ¸å¿ƒè½¬å‚¨.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dap å¯åŠ¨ä¸€ä¸ªé€šè¿‡è°ƒè¯•é€‚é…å™¨åè®®&lt;span style="color:#00538b">(&lt;/span>DAP&lt;span style="color:#00538b">)&lt;/span>é€šä¿¡çš„æ— å¤´TCPæœåŠ¡å™¨.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> debug ç¼–è¯‘å¹¶å¼€å§‹è°ƒè¯•å½“å‰ç›®å½•ä¸­çš„ä¸»åŒ…æˆ–æŒ‡å®šçš„åŒ….
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">exec&lt;/span> æ‰§è¡Œé¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å¼€å§‹è°ƒè¯•ä¼šè¯.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">help&lt;/span> Help about any &lt;span style="color:#8f0075">command&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> run å¼ƒç”¨çš„å‘½ä»¤ã€‚ä½¿ç”¨&lt;span style="color:#2544bb">&amp;#39;debug&amp;#39;&lt;/span>ä»£æ›¿.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">test&lt;/span> ç¼–è¯‘æµ‹è¯•äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å¼€å§‹è°ƒè¯•ç¨‹åº.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trace ç¼–è¯‘å¹¶å¼€å§‹è·Ÿè¸ªç¨‹åº.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version Prints version.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ“ä½œ-ç¤ºä¾‹ä»£ç ">[æ“ä½œ] ç¤ºä¾‹ä»£ç &lt;/h2>
&lt;p>ä¸‹é¢æ˜¯æ£€æŸ¥æ“ä½œçš„ä»£ç &lt;/p></description></item><item><title>Facebook å¼€æº Golang å®ä½“æ¡†æ¶ Ent</title><link>https://blog.ch3nnn.cn/posts/2023/facebook-ent%E5%BC%80%E6%BA%90%E5%AE%9E%E4%BD%93%E6%A1%86%E6%9E%B6/</link><pubDate>Mon, 16 Jan 2023 17:29:45 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2023/facebook-ent%E5%BC%80%E6%BA%90%E5%AE%9E%E4%BD%93%E6%A1%86%E6%9E%B6/</guid><description>&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/ch3nnn/picgo/blog/imgs16738590832901.jpg" alt="">&lt;/p>
&lt;p>entæ˜¯ä¸€ä¸ªç®€å•è€ŒåˆåŠŸèƒ½å¼ºå¤§çš„Goè¯­è¨€å®ä½“æ¡†æ¶ï¼Œentæ˜“äºæ„å»ºå’Œç»´æŠ¤åº”ç”¨ç¨‹åºä¸å¤§æ•°æ®æ¨¡å‹ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å›¾å°±æ˜¯ä»£ç &lt;/strong> - å°†ä»»ä½•æ•°æ®åº“è¡¨å»ºæ¨¡ä¸ºGoå¯¹è±¡ã€‚&lt;/li>
&lt;li>&lt;strong>è½»æ¾åœ°éå†ä»»ä½•å›¾å½¢&lt;/strong> - å¯ä»¥è½»æ¾åœ°è¿è¡ŒæŸ¥è¯¢ã€èšåˆå’Œéå†ä»»ä½•å›¾å½¢ç»“æ„ã€‚&lt;/li>
&lt;li>&lt;strong>é™æ€ç±»å‹å’Œæ˜¾å¼API&lt;/strong> - ä½¿ç”¨ä»£ç ç”Ÿæˆé™æ€ç±»å‹å’Œæ˜¾å¼APIï¼ŒæŸ¥è¯¢æ•°æ®æ›´åŠ ä¾¿æ·ã€‚&lt;/li>
&lt;li>&lt;strong>å¤šå­˜å‚¨é©±åŠ¨ç¨‹åº&lt;/strong> - æ”¯æŒMySQL, PostgreSQL, SQLite å’Œ Gremlinã€‚&lt;/li>
&lt;li>&lt;strong>å¯æ‰©å±•&lt;/strong> - ç®€å•åœ°æ‰©å±•å’Œä½¿ç”¨Goæ¨¡æ¿è‡ªå®šä¹‰ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-console" data-lang="console">&lt;span style="display:flex;">&lt;span>go install entgo.io/ent/cmd/ent@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>go mod init &amp;lt;project&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®">åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®&lt;/h3>
&lt;p>è¿›å…¥ä½ é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶åè¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>go run -mod&lt;span style="color:#00538b">=&lt;/span>mod entgo.io/ent/cmd/ent init User
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»¥ä¸Šçš„å‘½ä»¤ä¼šåœ¨&lt;code>&amp;lt;project&amp;gt;/ent/schema/&lt;/code>ç›®å½•ä¸‹äº§ç”Ÿ&lt;code>User&lt;/code>çš„æ•°æ®æ¨¡å¼ï¼ˆæ•°æ®æ¨¡å¼æ˜¯æ•°æ®åº“ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸“ä¸šæœ¯è¯­ï¼Œè‹¥å¯¹è¯¥éƒ¨åˆ†æœ‰ä»»ä½•ç†è§£é—®é¢˜ï¼Œè¯·æŸ¥é˜…æ•°æ®åº“ç³»ç»Ÿçš„ç›¸å…³ä¹¦ç±ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> schema
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> &lt;span style="color:#2544bb">&amp;#34;entgo.io/ent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Useråœ¨Userå®ä½“ä¸­ç»„åˆäº†enté»˜è®¤çš„æ•°æ®åº“æ¨¡å¼å®šä¹‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">type&lt;/span> User &lt;span style="color:#5317ac">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ent.Schema
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Userçš„å­—æ®µ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> (User) &lt;span style="color:#721045">Fields&lt;/span>() []ent.Field {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">return&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Userçš„è¾¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> (User) &lt;span style="color:#721045">Edges&lt;/span>() []ent.Edge {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">return&lt;/span> &lt;span style="color:#0000c0">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸º&lt;code>User&lt;/code> æ¨¡å¼æ·»åŠ ä¸¤ä¸ªå­—æ®µï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> schema
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;entgo.io/ent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">&amp;#34;entgo.io/ent/schema/field&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// Userçš„å­—æ®µ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> (User) &lt;span style="color:#721045">Fields&lt;/span>() []ent.Field {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">return&lt;/span> []ent.Field{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> field.&lt;span style="color:#721045">Int&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;age&amp;#34;&lt;/span>).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#721045">Positive&lt;/span>(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> field.&lt;span style="color:#721045">String&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;name&amp;#34;&lt;/span>).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#721045">Default&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;unknown&amp;#34;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åƒå¦‚ä¸‹å‘½ä»¤é‚£æ ·ï¼Œè¿è¡Œ&lt;code>go generate&lt;/code>ï¼š&lt;/p></description></item><item><title>Filebeatè½»é‡å‹æ—¥å¿—é‡‡é›†å™¨åŠoutputæ’ä»¶å¼€å‘</title><link>https://blog.ch3nnn.cn/posts/2023/filebeat%E8%BD%BB%E9%87%8F%E5%9E%8B%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8%E5%8F%8Aoutput%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</link><pubDate>Mon, 09 Jan 2023 16:36:01 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2023/filebeat%E8%BD%BB%E9%87%8F%E5%9E%8B%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8%E5%8F%8Aoutput%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</guid><description>&lt;blockquote>
&lt;p>æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯ OT è¿›è¡Œæ•°æ®æ”¶é›†ï¼ŒFilebeat éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="ä»‹ç»">ä»‹ç»&lt;/h2>
&lt;p>Filebeat æ˜¯ä½¿ç”¨ Golang å®ç°çš„è½»é‡å‹æ—¥å¿—é‡‡é›†å™¨ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª agent ï¼Œå¯ä»¥å®‰è£…åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®é…ç½®è¯»å–å¯¹åº”ä½ç½®çš„æ—¥å¿—ï¼Œå¹¶ä¸ŠæŠ¥åˆ°ç›¸åº”çš„åœ°æ–¹å»ã€‚&lt;/p>
&lt;h3 id="æ¦‚è¦">æ¦‚è¦&lt;/h3>
&lt;p>Filebeat å¹¶ä¸ä¾èµ–äº ElasticSearchï¼Œå¯ä»¥å•ç‹¬å­˜åœ¨ã€‚æˆ‘ä»¬å¯ä»¥å•ç‹¬ä½¿ç”¨Filebeatè¿›è¡Œæ—¥å¿—çš„ä¸ŠæŠ¥å’Œæœé›†ã€‚filebeat å†…ç½®äº†å¸¸ç”¨çš„ Output ç»„ä»¶, ä¾‹å¦‚ kafkaã€ElasticSearchã€redis ç­‰ï¼Œå‡ºäºè°ƒè¯•è€ƒè™‘ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºåˆ° console å’Œ file ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç°æœ‰çš„ Output ç»„ä»¶ï¼Œå°†æ—¥å¿—è¿›è¡Œä¸ŠæŠ¥ã€‚&lt;/p>
&lt;h3 id="æ•´ä½“å·¥ä½œåŸç†">æ•´ä½“å·¥ä½œåŸç†&lt;/h3>
&lt;p>Filebeat ç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼šharvester å’Œ prospectorã€‚&lt;/p>
&lt;ul>
&lt;li>harvester (é‡‡é›†å™¨) çš„ä¸»è¦èŒè´£æ˜¯è¯»å–å•ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚è¯»å–æ¯ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹å‘é€åˆ° the outputã€‚ æ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterï¼Œharvester è´Ÿè´£æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶æ–‡ä»¶æè¿°ç¬¦ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚å¦‚æœæ–‡ä»¶åœ¨è¯»å–æ—¶è¢«åˆ é™¤æˆ–é‡å‘½åï¼ŒFilebeat å°†ç»§ç»­è¯»å–æ–‡ä»¶ã€‚&lt;/li>
&lt;li>prospector (æŸ¥æ‰¾å™¨) çš„ä¸»è¦èŒè´£æ˜¯ç®¡ç† harvester å¹¶æ‰¾åˆ°æ‰€æœ‰è¦è¯»å–çš„æ–‡ä»¶æ¥æºã€‚å¦‚æœè¾“å…¥ç±»å‹ä¸ºæ—¥å¿—ï¼Œåˆ™æŸ¥æ‰¾å™¨å°†æŸ¥æ‰¾è·¯å¾„åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterã€‚æ¯ä¸ª prospector éƒ½åœ¨è‡ªå·±çš„ Go åç¨‹ä¸­è¿è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;em>æ³¨ï¼šFilebeat prospectoråªèƒ½è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œ æ²¡æœ‰åŠŸèƒ½å¯ä»¥è¿æ¥åˆ°è¿œç¨‹ä¸»æœºæ¥è¯»å–å­˜å‚¨çš„æ–‡ä»¶æˆ–æ—¥å¿—ã€‚&lt;/em>&lt;/p>&lt;/blockquote>
&lt;p>ç”±ä»¥ä¸Šä¸¤ä¸ªç»„ä»¶ä¸€èµ·å·¥ä½œæ¥è¯»å–æ–‡ä»¶ï¼ˆtail fileï¼‰å¹¶å°†äº‹ä»¶æ•°æ®å‘é€åˆ°æŒ‡å®šçš„è¾“å‡ºã€‚
ä¸‹å›¾æ˜¯ Filebeat å®˜æ–¹æä¾›çš„æ¶æ„å›¾ï¼š
&lt;img src="https://cdn.jsdelivr.net/gh/ch3nnn/picgo/blog/imgs20230109163928.png" alt="">&lt;/p>
&lt;h4 id="filebeatèƒŒåçš„è€å¤§">FilebeatèƒŒåçš„â€œè€å¤§â€&lt;/h4>
&lt;p>è¯´åˆ°Filebeatï¼Œå®ƒå…¶å®åªæ˜¯&lt;a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Felastic%2Fbeats%2Ftree%2Fmaster%2Flibbeat">beatså®¶æ—&lt;/a>ä¼—å¤šæˆå‘˜ä¸­çš„ä¸€ä¸ªã€‚é™¤äº†Filebeat, è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„beatå°ä¼™ä¼´ï¼š&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>beat&lt;/th>
 &lt;th>åŠŸèƒ½&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>Filebeat&lt;/td>
 &lt;td>æ”¶é›†æ—¥å¿—æ–‡ä»¶&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Metricbeat&lt;/td>
 &lt;td>æ”¶é›†å„ç§æŒ‡æ ‡æ•°æ®&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Packetbeat&lt;/td>
 &lt;td>æ”¶é›†ç½‘ç»œæ•°æ®åŒ…&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Auditbeat&lt;/td>
 &lt;td>æ”¶é›†å®¡è®¡æ•°æ®&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Heartbeat&lt;/td>
 &lt;td>æ”¶é›†æœåŠ¡è¿è¡ŒçŠ¶æ€ç›‘æµ‹æ•°æ®&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&amp;hellip;&lt;/td>
 &lt;td>&amp;hellip;&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§beatçš„è§„èŒƒæ¥å†™è‡ªå·±çš„beatã€‚
èƒ½å®ç°ä»¥ä¸Šè¿™äº›beatï¼Œéƒ½ç¦»ä¸å¼€beatså®¶æ—çœŸæ­£çš„â€œè€å¤§â€â€”â€” libbeatï¼Œ å®ƒæ˜¯beatä½“ç³»çš„æ ¸å¿ƒåº“ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹libbeatåˆ°åº•éƒ½ä½œäº†äº›ä»€ä¹ˆ&lt;/p></description></item><item><title>è¿™äº›æœ€å¸¸ç”¨çš„ Go CLI å‘½ä»¤ï¼Œæ–°æ‰‹ Gopher åº”è¯¥æŒæ¡</title><link>https://blog.ch3nnn.cn/posts/2023/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84gocli%E5%91%BD%E4%BB%A4/</link><pubDate>Mon, 02 Jan 2023 10:28:19 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2023/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84gocli%E5%91%BD%E4%BB%A4/</guid><description>&lt;p>æœ¬æ–‡å°†ä»‹ç»ä¸€äº›æœ€åŸºæœ¬çš„ Go å‘½ä»¤è¡Œå‘½ä»¤ã€‚å¦‚æœä½ åˆšæ¥è§¦ Go è¯­è¨€ï¼Œé‚£ä½ æœ‰å¿…è¦è®°ä½å®ƒä»¬ï¼Œå› ä¸ºè¿™äº›å‘½ä»¤æ˜¯ Go å¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­æ‰€å¿…å¤‡çš„ã€‚&lt;/p>
&lt;p>&lt;strong>Go version&lt;/strong>&lt;/p>
&lt;p>å¼€å§‹ Go é¡¹ç›®å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¡®ä¿å¼€å‘æœºä¸Šå·²ç»å®‰è£…å¥½äº† Go ç¼–è¯‘å™¨ã€‚è¿™å¯ä»¥é€šè¿‡ &lt;a href="https://go.dev/doc/install">https://go.dev/doc/install&lt;/a> è¿›è¡Œä¸‹è½½å®‰è£…ã€‚&lt;/p>
&lt;p>é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹å®‰è£…çš„ Go ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#5317ac">go&lt;/span> version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">go&lt;/span> version go1&lt;span style="color:#0000c0">.18&lt;/span> darwin&lt;span style="color:#00538b">/&lt;/span>amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Go env&lt;/strong>&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬å¯èƒ½æƒ³æŸ¥çœ‹ä¸€äº› Go ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ GOROOT æˆ–è€… GOPATHã€‚ä½ å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#5317ac">go&lt;/span> env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“ä½ æƒ³å¯¹æŸä¸ªç¯å¢ƒå˜é‡è¿›è¡Œæ›´æ”¹ï¼Œä¾‹å¦‚ä¿®æ”¹ Go ä»£ç†ï¼Œä½ å¯ä»¥è¿™æ ·åšã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#5317ac">go&lt;/span> env &lt;span style="color:#00538b">-&lt;/span>w GOPROXY=https:&lt;span style="color:#505050">//goproxy.io,direct&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>go mod&lt;/strong>&lt;/p>
&lt;p>åœ¨ä½ å¼€å§‹å»ºç«‹ç¬¬ä¸€ä¸ª Go ç¨‹åºæ—¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä½ åº”è¯¥è¿è¡Œè¿™æ ·çš„å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#5317ac">go&lt;/span> mod init &amp;lt;your project name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¾‹å¦‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#5317ac">go&lt;/span> mod init demo&lt;span style="color:#00538b">/&lt;/span>firstProject
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ­¤æ—¶ï¼Œé¡¹ç›®æ ¹ç›®å½•å°†å¢åŠ  go.mod æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>$ cat &lt;span style="color:#5317ac">go&lt;/span>.mod 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>module demo&lt;span style="color:#00538b">/&lt;/span>firstProject
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">go&lt;/span> &lt;span style="color:#0000c0">1.18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœä½ æœ‰å…¶ä»–è¯­è¨€çš„ç»éªŒï¼Œé‚£ä¹ˆ go.mod ç±»ä¼¼äº Python ä¸­çš„ requirements.txtï¼ŒJava ä¸­çš„ pom.xmlï¼Œå®ƒç”¨äºç®¡ç†é¡¹ç›®çš„ä¾èµ–åŒ…ã€‚&lt;/p></description></item><item><title>Golang-ä»£ç æ£€æŸ¥å·¥å…·(golangci-lint)</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7golangci-lint/</link><pubDate>Thu, 22 Dec 2022 11:05:22 +0800</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7golangci-lint/</guid><description>&lt;h2 id="ä¸€ä»‹ç»">ä¸€ã€ä»‹ç»&lt;/h2>
&lt;p>&lt;code>golangci-lint&lt;/code> æ˜¯ä¸€ä¸ªä»£ç æ£€æŸ¥å·¥å…·çš„é›†åˆï¼Œèšé›†äº†å¤šç§ Go ä»£ç æ£€æŸ¥å·¥å…·ï¼Œå¦‚ &lt;code>golint&lt;/code>ã€&lt;code>go vet&lt;/code> ç­‰ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>è¿è¡Œé€Ÿåº¦å¿«&lt;/li>
&lt;li>å¯ä»¥é›†æˆåˆ° vscodeã€goland ç­‰å¼€å‘å·¥å…·ä¸­&lt;/li>
&lt;li>åŒ…å«äº†éå¸¸å¤šç§ä»£ç æ£€æŸ¥å™¨&lt;/li>
&lt;li>å¯ä»¥é›†æˆåˆ° CI ä¸­&lt;/li>
&lt;li>è¿™æ˜¯åŒ…å«çš„ä»£ç æ£€æŸ¥å™¨åˆ—è¡¨ï¼šLinters&lt;/li>
&lt;/ul>
&lt;h2 id="äºŒå®‰è£…">äºŒã€å®‰è£…&lt;/h2>
&lt;p>&lt;code>golangci-lint&lt;/code> å®˜æ–¹ä¸å»ºè®®ä½¿ç”¨ &lt;code>go get&lt;/code> æ–¹å¼å®‰è£…ï¼Œæ¨èä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…ã€‚&lt;/p>
&lt;h3 id="macos">MacOS&lt;/h3>
&lt;p>ç›´æ¥ä½¿ç”¨ homebrew å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>brew install golangci-lint
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew upgrade golangci-lint
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="linux-å’Œ-windows">Linux å’Œ Windows&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050"># binary will be $(go env GOPATH)/bin/golangci-lint&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -sSfL https://raw.githubusercontent.com/Goci/golangci-lint/master/install.sh | sh -s -- -b &lt;span style="color:#5317ac">$(&lt;/span>go env GOPATH&lt;span style="color:#5317ac">)&lt;/span>/bin v1.42.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>golangci-lint --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>golangci-lint&lt;/code> å°†ä¼šè¢«å®‰è£…åˆ° &lt;strong>GOPATH/bin&lt;/strong> ç›®å½•ä¸­ï¼Œå¦‚æœæ­¤ç›®å½•ä¸åœ¨ç¯å¢ƒå˜é‡è·¯å¾„ä¸­éœ€è¦åŠ ä¸Šã€‚&lt;/p>
&lt;h2 id="ä¸‰ä½¿ç”¨æ–¹å¼">ä¸‰ã€ä½¿ç”¨æ–¹å¼&lt;/h2>
&lt;h3 id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ&lt;/h3>
&lt;p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ•´ä¸ªé¡¹ç›®çš„ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>golangci-lint run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ç­‰ä»·äº:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>golangci-lint run ./...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ–è€…å¯ä»¥æŒ‡å®šæ£€æŸ¥æŸä¸ªç›®å½•ä¸‹çš„ä»£ç æ–‡ä»¶ï¼ŒæŒ‡å®šç›®å½•æ—¶ä¸ä¼šé€’å½’åˆ†æå…¶å­ç›®å½•ï¼Œè¦é€’å½’åˆ†æå…¶å­ç›®å½•éœ€è¦åŠ ä¸Š /&amp;hellip;ï¼š&lt;/p></description></item><item><title>Golang-ä½¿ç”¨gvmè¿›è¡Œç‰ˆæœ¬æ§åˆ¶</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BD%BF%E7%94%A8gvm%E8%BF%9B%E8%A1%8C%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/</link><pubDate>Sun, 14 Aug 2022 18:00:01 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BD%BF%E7%94%A8gvm%E8%BF%9B%E8%A1%8C%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/</guid><description>&lt;p>å½“ä½ æƒ³ä¸ºæ¯ä¸ªé¡¹ç›®åˆ‡æ¢ go ç‰ˆæœ¬æ—¶ï¼Œgvm (Go Version Manager) å¾ˆæ–¹ä¾¿ã€‚&lt;/p>
&lt;p>è¿™é‡Œï¼Œæˆ‘å°†ä»‹ç»â€œå¦‚ä½•åœ¨Macä¸Šå®‰è£…gvmâ€å’Œâ€œå¦‚ä½•ä½¿ç”¨gvmâ€&lt;/p>
&lt;h2 id="ä½¿ç”¨å‡†å¤‡">ä½¿ç”¨å‡†å¤‡&lt;/h2>
&lt;h3 id="ä»…é€‚ç”¨äº-mac-çš„å‡†å¤‡å·¥ä½œ">ä»…é€‚ç”¨äº Mac çš„å‡†å¤‡å·¥ä½œ&lt;/h3>
&lt;p>æŒ‰ç…§MacOSX è¦æ±‚ä¸­çš„è¯´æ˜æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>xcode-select --install
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install mercurial
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="gvmå®‰è£…">gvmå®‰è£…&lt;/h3>
&lt;p>æˆ‘ä½¿ç”¨ zsh ä½œä¸ºæˆ‘çš„ shellã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#8f0075">echo&lt;/span> &lt;span style="color:#00538b">$SHELL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/bin/zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äº zshï¼Œæ‚¨å¯ä»¥è¿™æ ·å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ zsh &amp;lt; &amp;lt;&lt;span style="color:#00538b">(&lt;/span>curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer&lt;span style="color:#00538b">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Cloning from https://github.com/moovweb/gvm.git to /Users/user_name/.gvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>No existing Go versions detected
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Installed GVM v1.0.22
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Please restart your terminal session or to get started right away run
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#2544bb">`&lt;/span>&lt;span style="color:#8f0075">source&lt;/span> /Users/user_name/.gvm/scripts/gvm&lt;span style="color:#2544bb">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>~/.zshrc&lt;/code> ä»¥ä¸‹è¡Œè¢«æ·»åŠ åˆ°æœ€åä¸€è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00538b">[[&lt;/span> -s &lt;span style="color:#2544bb">&amp;#34;/Users/user_name/.gvm/scripts/gvm&amp;#34;&lt;/span> &lt;span style="color:#00538b">]]&lt;/span> &lt;span style="color:#00538b">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8f0075">source&lt;/span> &lt;span style="color:#2544bb">&amp;#34;/Users/user_name/.gvm/scripts/gvm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‡æ–°å¯åŠ¨ç»ˆç«¯ gvm å³å¯ä½¿ç”¨&lt;/p></description></item><item><title>Golang-å¸¸è§æ•°æ®ç»“æ„ Slice</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84slice/</link><pubDate>Sat, 30 Apr 2022 00:56:46 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84slice/</guid><description>&lt;h1 id="golang-å¸¸è§æ•°æ®ç»“æ„slice">Golang-å¸¸è§æ•°æ®ç»“æ„Slice&lt;/h1>
&lt;h2 id="slice">Slice&lt;/h2>
&lt;p>slice ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯åˆ‡ç‰‡ï¼Œå®ƒå’Œæ•°ç»„ï¼ˆarrayï¼‰å¾ˆç±»ä¼¼ï¼Œå¯ä»¥ç”¨ä¸‹æ ‡çš„æ–¹å¼è¿›è¡Œè®¿é—®ï¼Œå¦‚æœè¶Šç•Œï¼Œå°±ä¼šäº§ç”Ÿ panicã€‚ä½†æ˜¯å®ƒæ¯”æ•°ç»„æ›´çµæ´»ï¼Œå¯ä»¥è‡ªåŠ¨åœ°è¿›è¡Œæ‰©å®¹ã€‚&lt;/p>
&lt;p>äº†è§£ slice çš„æœ¬è´¨, æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯çœ‹å®ƒçš„æºç :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// runtime/slice.go&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">type&lt;/span> slice &lt;span style="color:#5317ac">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> array unsafe.Pointer &lt;span style="color:#505050">// å…ƒç´ æŒ‡é’ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> len &lt;span style="color:#005a5f">int&lt;/span> &lt;span style="color:#505050">// é•¿åº¦ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cap &lt;span style="color:#005a5f">int&lt;/span> &lt;span style="color:#505050">// å®¹é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>slice å…±æœ‰ä¸‰ä¸ªå±æ€§:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æŒ‡é’ˆ&lt;/strong> æŒ‡å‘åº•å±‚æ•°ç»„&lt;/li>
&lt;li>&lt;strong>é•¿åº¦&lt;/strong> è¡¨ç¤ºåˆ‡ç‰‡å¯ç”¨å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ä¸‹æ ‡å¯¹ slice çš„å…ƒç´ è¿›è¡Œè®¿é—®æ—¶ï¼Œä¸‹æ ‡ä¸èƒ½è¶…è¿‡ slice çš„é•¿åº¦&lt;/li>
&lt;li>&lt;strong>å®¹é‡&lt;/strong> åº•å±‚æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼Œå®¹é‡ &amp;gt;= é•¿åº¦ã€‚åœ¨åº•å±‚æ•°ç»„ä¸è¿›è¡Œæ‰©å®¹çš„æƒ…å†µä¸‹ï¼Œå®¹é‡ä¹Ÿæ˜¯ slice å¯ä»¥æ‰©å¼ çš„æœ€å¤§é™åº¦ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://cdn.ch3nnn.cn/blog/202304191511106.png" alt="">&lt;/p>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>: åº•å±‚æ•°ç»„æ˜¯å¯ä»¥è¢«å¤šä¸ª slice åŒæ—¶æŒ‡å‘çš„ï¼Œå› æ­¤å¯¹ä¸€ä¸ª slice çš„å…ƒç´ è¿›è¡Œæ“ä½œæ˜¯æœ‰å¯èƒ½å½±å“åˆ°å…¶ä»– slice çš„ã€‚&lt;/p>
&lt;h2 id="slice-åˆ›å»º">slice åˆ›å»º&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>æ–¹å¼&lt;/th>
 &lt;th>ä»£ç ç¤ºä¾‹&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>ç›´æ¥å£°æ˜&lt;/td>
 &lt;td>var slice []int&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>new&lt;/td>
 &lt;td>slice := *new([]int)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>å­—é¢é‡&lt;/td>
 &lt;td>slice := []int{1,2,3,4}&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>make&lt;/td>
 &lt;td>slice := make(int[], 5, 10)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>ä»åˆ‡ç‰‡æˆ–è€…æ•°ç»„&amp;quot;æˆªå–&amp;quot;&lt;/td>
 &lt;td>slice := array[1:5] æˆ– slice := sourceSlice[1:5]&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>ç›´æ¥å£°æ˜&lt;/strong>&lt;/p></description></item><item><title>Golang-å¸¸è§æ•°æ®ç»“æ„ Map</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84map/</link><pubDate>Mon, 11 Apr 2022 10:07:33 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84map/</guid><description>&lt;h2 id="map">Map&lt;/h2>
&lt;p>map æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼šä¸€ç§å…ƒç´ å¯¹ï¼ˆpairï¼‰çš„æ— åºé›†åˆï¼Œpair çš„ä¸€ä¸ªå…ƒç´ æ˜¯ keyï¼Œå¯¹åº”çš„å¦ä¸€ä¸ªå…ƒç´ æ˜¯ valueï¼Œæ‰€ä»¥è¿™ä¸ªç»“æ„ä¹Ÿç§°ä¸ºå…³è”æ•°ç»„æˆ–å­—å…¸ã€‚è¿™æ˜¯ä¸€ç§å¿«é€Ÿå¯»æ‰¾å€¼çš„ç†æƒ³ç»“æ„ï¼šç»™å®š keyï¼Œå¯¹åº”çš„ value å¯ä»¥è¿…é€Ÿå®šä½ã€‚&lt;/p>
&lt;p>map è¿™ç§æ•°æ®ç»“æ„åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿç§°ä¸ºå­—å…¸ï¼ˆPythonï¼‰ã€hash å’Œ HashTable ç­‰ã€‚&lt;/p>
&lt;h2 id="å“ˆå¸Œè¡¨">å“ˆå¸Œè¡¨&lt;/h2>
&lt;p>å“ˆå¸Œï¼Œä¹Ÿå°±æ˜¯ Map çš„å®ç°åŸç†ï¼›å“ˆå¸Œè¡¨æ˜¯é™¤äº†æ•°ç»„ä¹‹å¤–ï¼Œæœ€å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå‡ ä¹æ‰€æœ‰çš„è¯­è¨€éƒ½ä¼šæœ‰æ•°ç»„å’Œå“ˆå¸Œè¡¨è¿™ä¸¤ç§é›†åˆå…ƒç´ ï¼Œæœ‰çš„è¯­è¨€å°†æ•°ç»„å®ç°æˆåˆ—è¡¨ï¼Œ æœ‰çš„è¯­è¨€å°†å“ˆå¸Œè¡¨ç§°ä½œç»“æ„ä½“æˆ–è€…å­—å…¸ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯ä¸¤ç§è®¾è®¡é›†åˆå…ƒç´ çš„æ€è·¯ï¼Œæ•°ç»„ç”¨äºè¡¨ç¤ºå…ƒç´ çš„åºåˆ—ï¼Œè€Œå“ˆå¸Œè¡¨ç¤ºçš„æ˜¯é”®å€¼å¯¹ä¹‹é—´æ˜ å°„å…³ç³»ï¼Œåªæ˜¯ä¸åŒè¯­è¨€çš„å«æ³•å’Œå®ç°ç¨å¾®æœ‰äº›ä¸åŒã€‚&lt;/p>
&lt;h2 id="è®¾è®¡åŸç†">è®¾è®¡åŸç†&lt;/h2>
&lt;p>å“ˆå¸Œè¡¨æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„æœ€é‡è¦æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œè¿™ä¸ä»…å› ä¸ºå®ƒ &lt;code>O(1)&lt;/code> çš„è¯»å†™æ€§èƒ½éå¸¸ä¼˜ç§€ï¼Œè¿˜å› ä¸ºå®ƒæä¾›äº†é”®å€¼ä¹‹é—´çš„æ˜ å°„ã€‚æƒ³è¦å®ç°ä¸€ä¸ªæ€§èƒ½ä¼˜å¼‚çš„å“ˆå¸Œè¡¨ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªå…³é”®ç‚¹ â€”â€” å“ˆå¸Œå‡½æ•°å’Œå†²çªè§£å†³æ–¹æ³•ã€‚&lt;/p>
&lt;h3 id="å“ˆå¸Œå‡½æ•°">å“ˆå¸Œå‡½æ•°&lt;/h3>
&lt;p>å®ç°å“ˆå¸Œè¡¨çš„å…³é”®ç‚¹åœ¨äºå¦‚ä½•é€‰æ‹©å“ˆå¸Œå‡½æ•°ï¼Œå“ˆå¸Œå‡½æ•°çš„é€‰æ‹©åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šèƒ½å¤Ÿå†³å®šå“ˆå¸Œè¡¨çš„è¯»å†™æ€§èƒ½ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œå“ˆå¸Œå‡½æ•°åº”è¯¥èƒ½å¤Ÿå°†ä¸åŒé”®èƒ½å¤Ÿåœ°æ˜ å°„åˆ°ä¸åŒçš„ç´¢å¼•ä¸Šï¼Œè¿™è¦æ±‚å“ˆå¸Œå‡½æ•°è¾“å‡ºèŒƒå›´å¤§äºè¾“å…¥èŒƒå›´ï¼Œä½†æ˜¯ç”±äºé”®çš„æ•°é‡ä¼šè¿œè¿œå¤§äºæ˜ å°„çš„èŒƒå›´ï¼Œæ‰€ä»¥åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œè¿™ä¸ªç†æƒ³çš„ç»“æœæ˜¯ä¸å¯èƒ½å®ç°çš„ã€‚&lt;/p>
&lt;p>å®Œç¾å“ˆå¸Œå‡½æ•°å¦‚å›¾:
&lt;img src="https://cdn.ch3nnn.cn/img202304111020765.png" alt="">&lt;/p>
&lt;p>æ¯”è¾ƒå®é™…çš„æ–¹å¼æ˜¯è®©å“ˆå¸Œå‡½æ•°çš„ç»“æœèƒ½å¤Ÿå°½å¯èƒ½çš„å‡åŒ€åˆ†å¸ƒï¼Œç„¶åé€šè¿‡å·¥ç¨‹ä¸Šçš„æ‰‹æ®µè§£å†³å“ˆå¸Œç¢°æ’çš„é—®é¢˜ï¼Œä½†æ˜¯å“ˆå¸Œçš„ç»“æœä¸€å®šè¦å°½å¯èƒ½å‡åŒ€ï¼Œç»“æœä¸å‡åŒ€çš„å“ˆå¸Œå‡½æ•°ä¼šé€ æˆæ›´å¤šçš„å†²çªå¹¶å¯¼è‡´æ›´å·®çš„è¯»å†™æ€§èƒ½ã€‚&lt;/p>
&lt;p>ä¸å‡åŒ€å“ˆå¸Œå‡½æ•°å¦‚å›¾:
&lt;img src="https://cdn.ch3nnn.cn/img202304111022378.png" alt="">&lt;/p>
&lt;p>åœ¨ä¸€ä¸ªä½¿ç”¨ç»“æœè¾ƒä¸ºå‡åŒ€çš„å“ˆå¸Œå‡½æ•°ä¸­ï¼Œå“ˆå¸Œçš„å¢åˆ æ”¹æŸ¥éƒ½éœ€è¦ O(1) çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯éå¸¸ä¸å‡åŒ€çš„å“ˆå¸Œå‡½æ•°ä¼šå¯¼è‡´æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šå ç”¨æœ€å·® O(n) çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥åœ¨å“ˆå¸Œè¡¨ä¸­ä½¿ç”¨å¥½çš„å“ˆå¸Œå‡½æ•°æ˜¯è‡³å…³é‡è¦çš„ã€‚&lt;/p>
&lt;h3 id="å†²çªè§£å†³">å†²çªè§£å†³&lt;/h3>
&lt;p>å“ˆå¸Œå‡½æ•°å¾€å¾€éƒ½æ˜¯ä¸å®Œç¾çš„ï¼Œè¾“å‡ºçš„èŒƒå›´æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ä¸€å®šä¼šå‘ç”Ÿå“ˆå¸Œç¢°æ’ï¼Œè¿™æ—¶å°±éœ€è¦ä¸€äº›æ–¹æ³•æ¥è§£å†³å“ˆå¸Œç¢°æ’çš„é—®é¢˜ï¼Œå¸¸è§æ–¹æ³•çš„å°±æ˜¯å¼€æ”¾å¯»å€æ³•å’Œæ‹‰é“¾æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>å¼€æ”¾å¯»å€æ³•&lt;/strong>
å¼€æ”¾å¯»å€æ³•æ˜¯ä¸€ç§åœ¨å“ˆå¸Œè¡¨ä¸­è§£å†³å“ˆå¸Œç¢°æ’çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¯¹æ•°ç»„ä¸­çš„å…ƒç´ ä¾æ¬¡æ¢æµ‹å’Œæ¯”è¾ƒä»¥åˆ¤æ–­ç›®æ ‡é”®å€¼å¯¹æ˜¯å¦å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œå¦‚æœä½¿ç”¨å¼€æ”¾å¯»å€æ³•æ¥å®ç°å“ˆå¸Œè¡¨ï¼Œé‚£ä¹ˆåœ¨æ”¯æ’‘å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„å°±æ˜¯æ•°ç»„ï¼Œä¸è¿‡å› ä¸ºæ•°ç»„çš„é•¿åº¦æœ‰é™ï¼Œå­˜å‚¨ (author, draven) è¿™ä¸ªé”®å€¼å¯¹æ—¶ä¼šä»ç´¢å¼•å¼€å§‹éå†&lt;/p>
&lt;p>å½“æˆ‘ä»¬å‘å½“å‰å“ˆå¸Œè¡¨å†™å…¥æ–°çš„æ•°æ®æ—¶å‘ç”Ÿäº†å†²çªï¼Œå°±ä¼šå°†é”®å€¼å¯¹å†™å…¥åˆ°ä¸‹ä¸€ä¸ªä¸ä¸ºç©ºçš„ä½ç½®
å¼€æ”¾åœ°å€æ³•å†™å…¥æ•°æ®å¦‚å›¾:
&lt;img src="https://cdn.ch3nnn.cn/img202304111027414.png" alt="">
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ Key3 ä¸å·²ç»å­˜å…¥å“ˆå¸Œè¡¨ä¸­çš„ä¸¤ä¸ªé”®å€¼å¯¹ Key1 å’Œ Key2 å‘ç”Ÿå†²çªæ—¶ï¼ŒKey3 ä¼šè¢«å†™å…¥ Key2 åé¢çš„ç©ºé—²å†…å­˜ä¸­ï¼›å½“æˆ‘ä»¬å†å»è¯»å– Key3 å¯¹åº”çš„å€¼æ—¶å°±ä¼šå…ˆå¯¹é”®è¿›è¡Œå“ˆå¸Œå¹¶å–æ¨¡ï¼Œè¿™ä¼šå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ° Key1ï¼Œå› ä¸º Key1 ä¸æˆ‘ä»¬æœŸæœ›çš„é”® Key3 ä¸åŒ¹é…ï¼Œæ‰€ä»¥ä¼šç»§ç»­æŸ¥æ‰¾åé¢çš„å…ƒç´ ï¼Œç›´åˆ°å†…å­˜ä¸ºç©ºæˆ–è€…æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚&lt;/p>
&lt;p>å¼€æ”¾åœ°å€æ³•è¯»å–æ•°æ®å¦‚å›¾:
&lt;img src="https://cdn.ch3nnn.cn/img202304111029114.png" alt="">&lt;/p>
&lt;p>å½“éœ€è¦æŸ¥æ‰¾æŸä¸ªé”®å¯¹åº”çš„å€¼æ—¶ï¼Œå°±ä¼šä»ç´¢å¼•çš„ä½ç½®å¼€å§‹å¯¹æ•°ç»„è¿›è¡Œçº¿æ€§æ¢æµ‹ï¼Œæ‰¾åˆ°ç›®æ ‡é”®å€¼å¯¹æˆ–è€…ç©ºå†…å­˜å°±æ„å‘³ç€è¿™ä¸€æ¬¡æŸ¥è¯¢æ“ä½œçš„ç»“æŸã€‚&lt;/p>
&lt;p>å¼€æ”¾å¯»å€æ³•ä¸­å¯¹æ€§èƒ½å½±å“æœ€å¤§çš„å°±æ˜¯è£…è½½å› å­ï¼Œå®ƒæ˜¯æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ä¸æ•°ç»„å¤§å°çš„æ¯”å€¼ï¼Œéšç€è£…è½½å› å­çš„å¢åŠ ï¼Œçº¿æ€§æ¢æµ‹çš„å¹³å‡ç”¨æ—¶å°±ä¼šé€æ¸å¢åŠ ï¼Œè¿™ä¼šåŒæ—¶å½±å“å“ˆå¸Œè¡¨çš„è¯»å†™æ€§èƒ½ï¼Œå½“è£…è½½ç‡è¶…è¿‡ 70% ä¹‹åï¼Œå“ˆå¸Œè¡¨çš„æ€§èƒ½å°±ä¼šæ€¥å‰§ä¸‹é™ï¼Œè€Œä¸€æ—¦è£…è½½ç‡è¾¾åˆ° 100%ï¼Œæ•´ä¸ªå“ˆå¸Œè¡¨å°±ä¼šå®Œå…¨å¤±æ•ˆï¼Œè¿™æ—¶æŸ¥æ‰¾ä»»æ„å…ƒç´ éƒ½éœ€è¦éå†æ•°ç»„ä¸­å…¨éƒ¨çš„å…ƒç´ ï¼Œæ‰€ä»¥åœ¨å®ç°å“ˆå¸Œè¡¨æ—¶ä¸€å®šè¦æ—¶åˆ»å…³æ³¨è£…è½½å› å­çš„å˜åŒ–ã€‚&lt;/p>
&lt;p>&lt;strong>æ‹‰é“¾æ³•&lt;/strong>&lt;/p>
&lt;p>ä¸å¼€æ”¾åœ°å€æ³•ç›¸æ¯”ï¼Œæ‹‰é“¾æ³•æ˜¯å“ˆå¸Œè¡¨ä¸­æœ€å¸¸è§çš„å®ç°æ–¹æ³•ï¼Œå¤§å¤šæ•°çš„ç¼–ç¨‹è¯­è¨€éƒ½ç”¨æ‹‰é“¾æ³•å®ç°å“ˆå¸Œè¡¨ï¼Œå®ƒçš„å®ç°æ¯”è¾ƒå¼€æ”¾åœ°å€æ³•ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯å¹³å‡æŸ¥æ‰¾çš„é•¿åº¦ä¹Ÿæ¯”è¾ƒçŸ­ï¼Œå„ä¸ªç”¨äºå­˜å‚¨èŠ‚ç‚¹çš„å†…å­˜éƒ½æ˜¯åŠ¨æ€ç”³è¯·çš„ï¼Œå¯ä»¥èŠ‚çœæ¯”è¾ƒå¤šçš„å­˜å‚¨ç©ºé—´ã€‚&lt;/p>
&lt;p>å®ç°æ‹‰é“¾æ³•ä¸€èˆ¬ä¼šä½¿ç”¨æ•°ç»„åŠ ä¸Šé“¾è¡¨ï¼Œä¸è¿‡æœ‰ä¸€äº›è¯­è¨€ä¼šåœ¨æ‹‰é“¾æ³•çš„å“ˆå¸Œä¸­å¼•å…¥çº¢é»‘æ ‘ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œæ‹‰é“¾æ³•ä¼šä½¿ç”¨é“¾è¡¨æ•°ç»„ä½œä¸ºå“ˆå¸Œåº•å±‚çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒçœ‹æˆä¸€ä¸ªå¯ä»¥æ‰©å±•çš„ã€äºŒç»´æ•°ç»„ã€ï¼š
æ‹‰é“¾æ³•å†™å…¥æ•°æ®å¦‚å›¾:
&lt;img src="https://cdn.ch3nnn.cn/img202304111030711.png" alt="">&lt;/p></description></item><item><title>Golang-channelé€šé“</title><link>https://blog.ch3nnn.cn/posts/2022/golang-channel%E9%80%9A%E9%81%93/</link><pubDate>Sat, 19 Mar 2022 17:41:05 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-channel%E9%80%9A%E9%81%93/</guid><description>&lt;blockquote>
&lt;p>goroutine å’Œ channel (é€šé“)å¹¶æˆä¸º Go å¹¶å‘çš„ä¸¤å¤§åŸºçŸ³ã€‚channel å¯ä»¥æ”¾å¿ƒåœ°åœ¨å¤šä¸ª goroutine ä¹‹é—´ä½¿ç”¨, å› ä¸ºå®ƒæ˜¯å¹¶å‘å®‰å…¨çš„ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="channel-æœ‰å“ªäº›åº”ç”¨">channel æœ‰å“ªäº›åº”ç”¨&lt;/h2>
&lt;p>&lt;strong>åœæ­¢ä¿¡å·&lt;/strong>
channel ç”¨äºåœæ­¢ä¿¡å·çš„åœºæ™¯å¾ˆå¤šï¼Œé€šå¸¸æ˜¯é€šè¿‡å…³é—­æŸä¸ªchannel æˆ–è€…å‘ channel å‘é€ä¸€ä¸ªå…ƒç´ ï¼Œä½¿å¾—æ¥æ”¶ channel çš„é‚£ä¸€æ–¹è·çŸ¥é“æ­¤ä¿¡æ¯ï¼Œè¿›è€Œåšä¸€äº›å…¶ä»–çš„æ“ä½œï¼Œå¦‚åœæ­¢æŸä¸ªå¾ªç¯ç­‰ã€‚&lt;/p>
&lt;p>&lt;strong>å®šæ—¶ä»»åŠ¡&lt;/strong>
ä¸è®¡æ—¶å™¨ç»“åˆï¼Œä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•ï¼šå®ç°è¶…æ—¶æ§åˆ¶ã€å®ç°å®šæœŸæ‰§è¡ŒæŸä¸ªä»»åŠ¡ã€‚
æœ‰æ—¶å€™ï¼Œéœ€è¦æ‰§è¡ŒæŸé¡¹æ“ä½œï¼Œä½†åˆä¸æƒ³å®ƒè€—è´¹å¤ªé•¿æ—¶é—´ï¼Œä¸Šä¸€ä¸ªå®šæ—¶å™¨å°±å¯ä»¥æå®šã€‚è¿™å°±æ˜¯æ—¶æ§åˆ¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">case&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span> time.&lt;span style="color:#721045">After&lt;/span>(&lt;span style="color:#0000c0">100&lt;/span>&lt;span style="color:#00538b">*&lt;/span>time.Millisecond):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">case&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span> s.stopc:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">return&lt;/span> &lt;span style="color:#0000c0">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç­‰å¾… 100 ms åï¼Œå¦‚æœ s.stopc è¿˜æ²¡æœ‰è¯»å‡ºæ•°æ®æˆ–è€…è¢«å…³é—­ï¼Œå°±ç›´æ¥ç»“æŸã€‚&lt;/p>
&lt;p>å®šæ—¶æ‰§è¡ŒæŸä¸ªä»»åŠ¡ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">worker&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	ticker &lt;span style="color:#00538b">:=&lt;/span> time.&lt;span style="color:#721045">Tick&lt;/span>(&lt;span style="color:#0000c0">1&lt;/span> &lt;span style="color:#00538b">*&lt;/span> time.Second)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">for&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">case&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span> ticker:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#505050">// æ‰§è¡Œå®šæ—¶ä»»åŠ¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;æ‰§è¡Œ 1s å®šæ—¶ä»»åŠ¡&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¯éš” 1 ç§’ç§ï¼Œæ‰§è¡Œä¸€æ¬¡å®šæ—¶ä»»åŠ¡ã€‚&lt;/p>
&lt;p>&lt;strong>è§£è€¦ç”Ÿäº§æ–¹å’Œæ¶ˆè´¹æ–¹&lt;/strong>
æœåŠ¡å¯åŠ¨æ—¶ï¼Œå¯åŠ¨ n ä¸ª workerï¼Œä½œä¸ºå·¥ä½œåç¨‹æ± ï¼Œè¿™äº›åç¨‹å·¥ä½œåœ¨ä¸€ä¸ª for {} æ— é™å¾ªç¯é‡Œï¼Œä»æŸä¸ª channel æ¶ˆè´¹å·¥ä½œä»»åŠ¡å¹¶æ‰§è¡Œï¼š&lt;/p></description></item><item><title>Golang-åƒåœ¾å›æ”¶</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</link><pubDate>Fri, 18 Mar 2022 23:21:06 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</guid><description>&lt;p>åƒåœ¾å›æ”¶(Garbage Collectionï¼Œç®€ç§°GC)æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æä¾›çš„è‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè‡ªåŠ¨é‡Šæ”¾ä¸éœ€è¦çš„å†…å­˜å¯¹è±¡ï¼Œè®©å‡ºå­˜å‚¨å™¨èµ„æºã€‚ GCè¿‡ç¨‹ä¸­æ— éœ€ç¨‹åºå‘˜æ‰‹åŠ¨æ‰§è¡Œã€‚GCæœºåˆ¶åœ¨ç°ä»£å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒï¼ŒGCèƒ½åŠ›çš„æ€§èƒ½ä¸ä¼˜åŠ£ä¹Ÿæ˜¯ä¸åŒè¯­è¨€ä¹‹é—´å¯¹æ¯”åº¦æŒ‡æ ‡ä¹‹ä¸€ã€‚&lt;/p>
&lt;h3 id="åƒåœ¾å›æ”¶ç®—æ³•">åƒåœ¾å›æ”¶ç®—æ³•&lt;/h3>
&lt;p>ç›®å‰æ¯”è¾ƒå¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰ä¸‰ç§ï¼š
&lt;strong>å¼•ç”¨è®¡æ•°&lt;/strong>ï¼šä¸ºæ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è¯¥å¯¹è±¡çš„å¯¹è±¡é”€æ¯æ—¶ï¼Œå¼•ç”¨è®¡æ•° -1ï¼Œå½“å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶å›æ”¶è¯¥å¯¹è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»£è¡¨è¯­è¨€ï¼šPythonã€PHPã€Swift&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šå¯¹è±¡å›æ”¶å¿«ï¼Œä¸ä¼šå‡ºç°å†…å­˜è€—å°½æˆ–è¾¾åˆ°æŸä¸ªé˜ˆå€¼æ—¶æ‰å›æ”¶ã€‚&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šä¸èƒ½å¾ˆå¥½çš„å¤„ç†å¾ªç¯å¼•ç”¨ï¼Œè€Œå®æ—¶ç»´æŠ¤å¼•ç”¨è®¡æ•°ä¹Ÿæ˜¯æœ‰æŸè€—çš„ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ ‡è®°-æ¸…é™¤&lt;/strong>ï¼šä»æ ¹å˜é‡å¼€å§‹éå†æ‰€æœ‰å¼•ç”¨çš„å¯¹è±¡ï¼Œæ ‡è®°å¼•ç”¨çš„å¯¹è±¡ï¼Œæ²¡æœ‰è¢«æ ‡è®°çš„è¿›è¡Œå›æ”¶ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»£è¡¨è¯­è¨€ï¼šGolangï¼ˆä¸‰è‰²æ ‡è®°æ³•ï¼‰&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šè§£å†³äº†å¼•ç”¨è®¡æ•°çš„ç¼ºç‚¹ã€‚&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šéœ€è¦ STWï¼Œæš‚æ—¶åœæ‰ç¨‹åºè¿è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>åˆ†ä»£æ”¶é›†&lt;/strong>ï¼šæŒ‰ç…§å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿çŸ­åˆ’åˆ†ä¸åŒçš„ä»£ç©ºé—´ï¼Œç”Ÿå‘½å‘¨æœŸé•¿çš„æ”¾å…¥è€å¹´ä»£ï¼ŒçŸ­çš„æ”¾å…¥æ–°ç”Ÿä»£ï¼Œä¸åŒä»£æœ‰ä¸åŒçš„å›æ”¶ç®—æ³•å’Œå›æ”¶é¢‘ç‡ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»£è¡¨è¯­è¨€ï¼šJava&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šå›æ”¶æ€§èƒ½å¥½&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šç®—æ³•å¤æ‚&lt;/li>
&lt;/ul>
&lt;h3 id="golang-åƒåœ¾å›æ”¶">Golang åƒåœ¾å›æ”¶&lt;/h3>
&lt;h4 id="go13ä¹‹å‰-æ ‡è®°æ¸…é™¤æ³•">Go1.3ä¹‹å‰ æ ‡è®°æ¸…é™¤æ³•&lt;/h4>
&lt;ol>
&lt;li>è¿›è¡Œ STWï¼ˆstop the world å³æš‚åœç¨‹åºä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œç„¶åä» main å‡½æ•°å¼€å§‹æ‰¾åˆ°ä¸å¯è¾¾çš„å†…å­˜å ç”¨å’Œå¯è¾¾çš„å†…å­˜å ç”¨&lt;/li>
&lt;li>å¼€å§‹æ ‡è®°ï¼Œç¨‹åºæ‰¾å‡ºå¯è¾¾å†…å­˜å ç”¨å¹¶åšæ ‡è®°&lt;/li>
&lt;li>æ ‡è®°ç»“æŸæ¸…é™¤æœªæ ‡è®°çš„å†…å­˜å ç”¨&lt;/li>
&lt;li>ç»“æŸ STW åœæ­¢æš‚åœï¼Œè®©ç¨‹åºç»§ç»­è¿è¡Œï¼Œå¾ªç¯è¯¥è¿‡ç¨‹ç›´åˆ° main ç”Ÿå‘½å‘¨æœŸç»“æŸ&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s2.loli.net/2023/03/18/eaq4SfrMFOHYxVI.png" alt="">&lt;/p>
&lt;p>ä¸€å¼€å§‹çš„åšæ³•æ˜¯å°†åƒåœ¾æ¸…ç†ç»“æŸæ—¶æ‰åœæ­¢ STWï¼Œåæ¥ä¼˜åŒ–äº†æ–¹æ¡ˆå°†æ¸…ç†åƒåœ¾æ”¾åˆ°äº† STW ä¹‹åï¼Œä¸ç¨‹åºè¿è¡ŒåŒæ—¶è¿›è¡Œï¼Œè¿™æ ·åšå‡å°äº† STW çš„æ—¶é•¿ã€‚
ä½†æ˜¯ STW ä¼šæš‚åœç”¨æˆ·é€»è¾‘å¯¹ç¨‹åºçš„æ€§èƒ½å½±å“æ˜¯éå¸¸å¤§çš„ï¼Œè¿™ç§ç²’åº¦çš„ STW å¯¹äºæ€§èƒ½è¾ƒé«˜çš„ç¨‹åºè¿˜æ˜¯æ— æ³•æ¥å—ï¼Œä½†æ˜¯æ— è®ºæ€ä¹ˆä¼˜åŒ–ï¼ŒGo V1.3éƒ½é¢ä¸´è¿™ä¸ªä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œå°±æ˜¯mark-and-sweep ç®—æ³•ä¼šæš‚åœæ•´ä¸ªç¨‹åº ã€‚
å› æ­¤ Go1.5 é‡‡ç”¨äº†ä¸‰è‰²æ ‡è®°æ³•ä¼˜åŒ–äº† STWã€‚&lt;/p>
&lt;h4 id="go15ä¹‹å-ä¸‰è‰²å¹¶å‘æ ‡è®°æ³•">Go1.5ä¹‹å ä¸‰è‰²å¹¶å‘æ ‡è®°æ³•&lt;/h4>
&lt;p>ä¸‰è‰²æ ‡è®°æ³•åªæ˜¯ä¸ºäº†å™è¿°æ–¹ä¾¿è€ŒæŠ½è±¡å‡ºæ¥çš„ä¸€ç§è¯´æ³•ï¼Œå®é™…ä¸Šçš„å¯¹è±¡æ˜¯æ²¡æœ‰ä¸‰è‰²ä¹‹åˆ†çš„ã€‚è¿™é‡Œçš„ä¸‰è‰²ï¼Œå¯¹åº”äº†åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­å¯¹è±¡çš„ä¸‰ç§çŠ¶æ€ï¼š&lt;/p>
&lt;p>ç°è‰²ï¼šå¯¹è±¡è¿˜åœ¨æ ‡è®°é˜Ÿåˆ—ä¸­ç­‰å¾…
é»‘è‰²ï¼šå¯¹è±¡å·²è¢«æ ‡è®°ï¼ŒgcmarkBitså¯¹åº”ä½ä¸º 1 â€“ è¯¥å¯¹è±¡ä¸ä¼šåœ¨æœ¬æ¬¡ GC ä¸­è¢«å›æ”¶
ç™½è‰²ï¼šå¯¹è±¡æœªè¢«æ ‡è®°ï¼ŒgcmarkBitså¯¹åº”ä½ä¸º 0 â€“ è¯¥å¯¹è±¡å°†ä¼šåœ¨æœ¬æ¬¡ GC ä¸­è¢«æ¸…ç†&lt;/p></description></item><item><title>Golang-Modulesçš„æ¼”è¿›å²</title><link>https://blog.ch3nnn.cn/posts/2022/golang-modules%E7%9A%84%E6%BC%94%E8%BF%9B%E5%8F%B2/</link><pubDate>Sun, 13 Mar 2022 11:53:48 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-modules%E7%9A%84%E6%BC%94%E8%BF%9B%E5%8F%B2/</guid><description>&lt;h2 id="ä»‹ç»">ä»‹ç»&lt;/h2>
&lt;p>Go è¯­è¨€åœ¨ v1.11 å¼€å§‹æ”¯æŒ Modulesï¼Œæœ¬æ–‡æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ Go è¯­è¨€å„ä¸ªç‰ˆæœ¬æ”¯æŒ Go Modules çš„æ¼”è¿›å²ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code> Go Modules&lt;/code> æ¨¡å¼ï¼Œä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæµç¨‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>go mod init&lt;/code> åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ï¼Œåˆå§‹åŒ– &lt;code>go.mod&lt;/code> æ–‡ä»¶ã€‚&lt;/li>
&lt;li>&lt;code>go build&lt;/code>ã€&lt;code>go test&lt;/code>ã€&lt;code>go run&lt;/code>ã€&lt;code>go install&lt;/code> ç­‰æ„å»ºå‘½ä»¤ï¼Œå‘ &lt;code>go.mod&lt;/code>æ–‡ä»¶ä¸­æ·»åŠ æ¨¡å—æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚&lt;/li>
&lt;li>&lt;code>go list -m -json all&lt;/code> æ‰“å°å½“å‰æ¨¡å—çš„ä¾èµ–é¡¹ã€‚&lt;/li>
&lt;li>&lt;code>go get&lt;/code> æ·»åŠ ä¾èµ–é¡¹ï¼Œæˆ–ä¿®æ”¹ä¾èµ–é¡¹ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>&lt;code>go mod tidy&lt;/code> åˆ é™¤æœªä½¿ç”¨çš„ä¾èµ–é¡¹ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="go-modules-æ¼”è¿›å²">Go Modules æ¼”è¿›å²&lt;/h2>
&lt;p>&lt;strong>Go v1.11&lt;/strong>
ä» Go v1.11 å¼€å§‹æ”¯æŒ Go Modulsã€‚
ä¸ºäº†å…¼å®¹ä½¿ç”¨ Go v1.11 ä¹‹å‰çš„ä»»æ„ç‰ˆæœ¬çš„é¡¹ç›®ï¼Œå½“è®¾ç½® &lt;code>GO111MODULE=auto&lt;/code> æˆ– &lt;code>GO111MODULE=off&lt;/code> æ—¶ï¼ŒGo v1.11 åœ¨ &lt;code>$GOPATH/src&lt;/code> ä¸­ï¼Œç»§ç»­ä½¿ç”¨ &lt;code>GOPATH&lt;/code> æ¨¡å¼ã€‚
å½“è®¾ç½® &lt;code>GO111MODULE=auto&lt;/code> æ—¶ï¼Œå…¶å®ƒä»»æ„ä½ç½®ï¼Œå¦‚æœå½“å‰ç›®å½•æˆ–çˆ¶ç›®å½•åŒ…å« go.mod æ–‡ä»¶ï¼Œåˆ™ä½¿ç”¨ Modules æ¨¡å¼ã€‚&lt;/p></description></item><item><title>Golang-é€ƒé€¸åˆ†æ</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/</link><pubDate>Mon, 07 Mar 2022 13:38:48 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/</guid><description>&lt;h3 id="ä»€ä¹ˆæ˜¯å †æ ˆ">ä»€ä¹ˆæ˜¯å †/æ ˆ&lt;/h3>
&lt;ul>
&lt;li>å †ï¼ˆHeapï¼‰ï¼šä¸€èˆ¬æ¥è®²æ˜¯äººä¸ºæ‰‹åŠ¨è¿›è¡Œç®¡ç†ï¼Œæ‰‹åŠ¨ç”³è¯·ã€åˆ†é…ã€é‡Šæ”¾ã€‚ä¸€èˆ¬æ‰€æ¶‰åŠçš„å†…å­˜å¤§å°å¹¶ä¸å®šï¼Œä¸€èˆ¬ä¼šå­˜æ”¾è¾ƒå¤§çš„å¯¹è±¡ã€‚å¦å¤–å…¶åˆ†é…ç›¸å¯¹æ…¢ï¼Œæ¶‰åŠåˆ°çš„æŒ‡ä»¤åŠ¨ä½œä¹Ÿç›¸å¯¹å¤š&lt;/li>
&lt;li>æ ˆï¼ˆStackï¼‰ï¼šç”±ç¼–è¯‘å™¨è¿›è¡Œç®¡ç†ï¼Œè‡ªåŠ¨ç”³è¯·ã€åˆ†é…ã€é‡Šæ”¾ã€‚ä¸€èˆ¬ä¸ä¼šå¤ªå¤§ï¼Œæˆ‘ä»¬å¸¸è§çš„å‡½æ•°å‚æ•°ï¼ˆä¸åŒå¹³å°å…è®¸å­˜æ”¾çš„æ•°é‡ä¸åŒï¼‰ï¼Œå±€éƒ¨å˜é‡ç­‰ç­‰éƒ½ä¼šå­˜æ”¾åœ¨æ ˆä¸Š&lt;/li>
&lt;/ul>
&lt;h3 id="ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æ">ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æ&lt;/h3>
&lt;p>æˆ‘ä»¬å¦‚ä½•çŸ¥é“ä¸€ä¸ªå¯¹è±¡æ˜¯åº”è¯¥æ”¾åœ¨å †å†…å­˜ï¼Œè¿˜æ˜¯æ ˆå†…å­˜ä¹‹ä¸Šå‘¢ï¼Ÿå¯ä»¥å®˜ç½‘çš„FAQï¼ˆåœ°å€ï¼š&lt;a href="https://go.dev/doc/faq#stack_or_heap">https://go.dev/doc/faq#stack_or_heap&lt;/a>ï¼‰ä¸­æ‰¾åˆ°ç­”æ¡ˆ.
&lt;img src="https://s2.loli.net/2023/03/07/5xzbUkInvQrVpDu.png" alt="">&lt;/p>
&lt;p>å¤§è‡´æ„æ€æ˜¯:&lt;/p>
&lt;blockquote>
&lt;p>ä»æ­£ç¡®æ€§çš„è§’åº¦æ¥çœ‹ï¼Œä½ ä¸éœ€è¦çŸ¥é“ã€‚Goä¸­çš„æ¯ä¸ªå˜é‡éƒ½å­˜åœ¨ï¼Œåªè¦æœ‰å¯¹å®ƒçš„å¼•ç”¨ã€‚å®ç°é€‰æ‹©çš„å­˜å‚¨ä½ç½®ä¸è¯­è¨€çš„è¯­ä¹‰æ— å…³ã€‚
å­˜å‚¨ä½ç½®ç¡®å®å¯¹ç¼–å†™é«˜æ•ˆçš„ç¨‹åºæœ‰å½±å“ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼ŒGoç¼–è¯‘å™¨å°†ä¸ºè¯¥å‡½æ•°çš„å †æ ˆå¸§ä¸­çš„å‡½æ•°åˆ†é…å±€éƒ¨å˜é‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœç¼–è¯‘å™¨ä¸èƒ½è¯æ˜è¯¥å˜é‡åœ¨å‡½æ•°è¿”å›åæ²¡æœ‰è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å¿…é¡»åœ¨æœ‰åƒåœ¾å›æ”¶çš„å †ä¸Šåˆ†é…è¯¥å˜é‡ï¼Œä»¥é¿å…æ‚¬ç©ºæŒ‡é’ˆé”™è¯¯ã€‚æ­¤å¤–ï¼Œå¦‚æœå±€éƒ¨å˜é‡éå¸¸å¤§ï¼Œé‚£ä¹ˆå°†å…¶å­˜å‚¨åœ¨å †ä¸­å¯èƒ½æ¯”å­˜å‚¨åœ¨æ ˆä¸­æ›´æœ‰æ„ä¹‰ã€‚
åœ¨å½“å‰ç¼–è¯‘å™¨ä¸­ï¼Œå¦‚æœå˜é‡çš„åœ°å€è¢«å ç”¨ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±æ˜¯å †ä¸Šåˆ†é…å†…å­˜çš„å€™é€‰å˜é‡ã€‚ç„¶è€Œï¼ŒåŸºæœ¬çš„é€ƒé€¸åˆ†æå¯ä»¥è¯†åˆ«å‡ºæŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›å˜é‡å°†ä¸ä¼šå­˜åœ¨äºå‡½æ•°è¿”å›ä¹‹åï¼Œè€Œå¯ä»¥é©»ç•™åœ¨æ ˆä¸­ã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="åœ¨ä»€ä¹ˆé˜¶æ®µç¡®ç«‹é€ƒé€¸">åœ¨ä»€ä¹ˆé˜¶æ®µç¡®ç«‹é€ƒé€¸&lt;/h3>
&lt;p>Goè¯­è¨€è™½ç„¶æ²¡æœ‰æ˜ç¡®è¯´æ˜é€ƒé€¸åˆ†æè§„åˆ™ï¼Œä½†æ˜¯æœ‰ä»¥ä¸‹å‡ ç‚¹å‡†åˆ™ï¼Œæ˜¯å¯ä»¥å‚è€ƒçš„ã€‚&lt;/p>
&lt;ul>
&lt;li>é€ƒé€¸åˆ†ææ˜¯åœ¨ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œè¿™æ˜¯ä¸åŒäºjvmçš„è¿è¡Œæ—¶é€ƒé€¸åˆ†æ&lt;/li>
&lt;li>å¦‚æœå˜é‡åœ¨å‡½æ•°å¤–éƒ¨æ²¡æœ‰å¼•ç”¨ï¼Œåˆ™ä¼˜å…ˆæ”¾åˆ°æ ˆä¸­&lt;/li>
&lt;li>å¦‚æœå˜é‡åœ¨å‡½æ•°å¤–éƒ¨å­˜åœ¨å¼•ç”¨ï¼Œåˆ™å¿…å®šæ”¾åœ¨å †ä¸­&lt;/li>
&lt;/ul>
&lt;h3 id="é€ƒé€¸è§„åˆ™">é€ƒé€¸è§„åˆ™&lt;/h3>
&lt;p>æˆ‘ä»¬å…¶å®éƒ½çŸ¥é“ä¸€ä¸ªæ™®éçš„è§„åˆ™ï¼Œå°±æ˜¯å¦‚æœå˜é‡éœ€è¦ä½¿ç”¨å †ç©ºé—´ï¼Œé‚£ä¹ˆä»–å°±åº”è¯¥è¿›è¡Œé€ƒé€¸ã€‚ä½†æ˜¯å®é™…ä¸ŠGolangå¹¶ä¸ä»…ä»…æŠŠé€ƒé€¸çš„è§„åˆ™å¦‚æ­¤æ³›æ³›ã€‚Golangä¼šæœ‰å¾ˆå¤šåœºæ™¯å…·å¤‡å‡ºç°é€ƒé€¸çš„ç°è±¡ã€‚&lt;/p>
&lt;p>ä¸€èˆ¬æˆ‘ä»¬ç»™ä¸€ä¸ªå¼•ç”¨ç±»å¯¹è±¡ä¸­çš„å¼•ç”¨ç±»æˆå‘˜è¿›è¡Œèµ‹å€¼ï¼Œå¯èƒ½å‡ºç°é€ƒé€¸ç°è±¡ã€‚å¯ä»¥ç†è§£ä¸ºè®¿é—®ä¸€ä¸ªå¼•ç”¨å¯¹è±¡å®é™…ä¸Šåº•å±‚å°±æ˜¯é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆæ¥é—´æ¥çš„è®¿é—®äº†ï¼Œä½†å¦‚æœå†è®¿é—®é‡Œé¢çš„å¼•ç”¨æˆå‘˜å°±ä¼šæœ‰ç¬¬äºŒæ¬¡é—´æ¥è®¿é—®ï¼Œè¿™æ ·æ“ä½œè¿™éƒ¨åˆ†å¯¹è±¡çš„è¯ï¼Œæå¤§å¯èƒ½ä¼šå‡ºç°é€ƒé€¸çš„ç°è±¡ã€‚&lt;/p>
&lt;p>Goè¯­è¨€ä¸­çš„å¼•ç”¨ç±»å‹æœ‰&lt;code>func&lt;/code>ï¼ˆå‡½æ•°ç±»å‹ï¼‰ï¼Œ&lt;code>interface&lt;/code>ï¼ˆæ¥å£ç±»å‹ï¼‰ï¼Œ&lt;code>slice&lt;/code>ï¼ˆåˆ‡ç‰‡ç±»å‹ï¼‰ï¼Œ&lt;code>map&lt;/code>ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œ&lt;code>channel&lt;/code>ï¼ˆç®¡é“ç±»å‹ï¼‰ï¼Œ&lt;code>*&lt;/code>ï¼ˆæŒ‡é’ˆç±»å‹ï¼‰ç­‰ã€‚&lt;/p>
&lt;h3 id="æ€ä¹ˆç¡®å®šæ˜¯å¦é€ƒé€¸">æ€ä¹ˆç¡®å®šæ˜¯å¦é€ƒé€¸&lt;/h3>
&lt;p>å¯ä»¥ä½¿ç”¨ç¼–è¯‘å™¨æä¾›çš„æŒ‡ä»¤&lt;code>-gcflags&lt;/code> å°±å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„é€ƒé€¸åˆ†æè¿‡ç¨‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>go build -gcflags &lt;span style="color:#2544bb">&amp;#39;-m -l&amp;#39;&lt;/span> main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶æŒ‡ä»¤æ¶‰åŠçš„å‚æ•°å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>-mï¼šæ‰“å°å‡ºé€ƒé€¸åˆ†æçš„ä¼˜åŒ–ç­–ç•¥ï¼Œå®é™…ä¸Šæœ€å¤šæ€»å…±å¯ä»¥ç”¨ 4 ä¸ª -mï¼Œä½†æ˜¯è¿™æ ·å­è°ƒè¯•çš„ä¿¡æ¯é‡è¾ƒå¤§ï¼Œä¸€èˆ¬ç”¨ä¸€ä¸ªå°±è¶³å¤Ÿäº†ã€‚&lt;/li>
&lt;li>-l ï¼šç¦ç”¨å‡½æ•°å†…è”ï¼Œåœ¨è¿™é‡Œç¦ç”¨æ‰ inline èƒ½æ›´å¥½çš„è§‚å¯Ÿé€ƒé€¸æƒ…å†µï¼Œå‡å°‘å¹²æ‰°ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å¸¸è§é€ƒé€¸æ¡ˆä¾‹åˆ†æ">å¸¸è§é€ƒé€¸æ¡ˆä¾‹åˆ†æ&lt;/h3>
&lt;p>&lt;strong>newçš„å˜é‡åœ¨æ ˆè¿˜æ˜¯å †&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">foo&lt;/span>(argVal &lt;span style="color:#005a5f">int&lt;/span>) (&lt;span style="color:#00538b">*&lt;/span>&lt;span style="color:#005a5f">int&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> fooVal1 = &lt;span style="color:#8f0075">new&lt;/span>(&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> fooVal2 = &lt;span style="color:#8f0075">new&lt;/span>(&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> fooVal3 = &lt;span style="color:#8f0075">new&lt;/span>(&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> fooVal4 = &lt;span style="color:#8f0075">new&lt;/span>(&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">var&lt;/span> fooVal5 = &lt;span style="color:#8f0075">new&lt;/span>(&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">//æ­¤å¤„å¾ªç¯æ˜¯é˜²æ­¢goç¼–è¯‘å™¨å°†fooä¼˜åŒ–æˆinline(å†…è”å‡½æ•°)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">//å¦‚æœæ˜¯å†…è”å‡½æ•°ï¼Œmainè°ƒç”¨fooå°†æ˜¯åŸåœ°å±•å¼€ï¼Œæ‰€ä»¥fooVal 1-5 ç›¸å½“äºmainä½œç”¨åŸŸçš„å˜é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">//å³ä½¿fooVal3å‘ç”Ÿé€ƒé€¸ï¼Œåœ°å€ä¸å…¶ä»–ä¹Ÿæ˜¯è¿ç»­çš„&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>; i &amp;lt; &lt;span style="color:#0000c0">5&lt;/span>; i&lt;span style="color:#00538b">++&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">println&lt;/span>(argVal, fooVal1, fooVal2, fooVal3, fooVal4, fooVal5)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">//fooVal3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">return&lt;/span> fooVal3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mainVal &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#721045">foo&lt;/span>(&lt;span style="color:#0000c0">666&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f0075">println&lt;/span>(&lt;span style="color:#00538b">*&lt;/span>mainVal, mainVal)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬å°†fooVal 1-5 å…¨éƒ¨ç”¨&lt;code>new&lt;/code>çš„æ–¹å¼æ¥å¼€è¾Ÿ, ç¼–è¯‘è¿è¡Œçœ‹ç»“æœ, æ˜¾ç„¶&lt;code>fooVal3&lt;/code>å‘ç”Ÿäº†é€ƒé€¸&lt;/p></description></item><item><title>Golang-GMPæ¨¡å‹</title><link>https://blog.ch3nnn.cn/posts/2022/golang-gmp%E6%A8%A1%E5%9E%8B/</link><pubDate>Wed, 02 Mar 2022 16:45:39 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-gmp%E6%A8%A1%E5%9E%8B/</guid><description>&lt;h3 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢&lt;/h3>
&lt;p>Go ä¸ºäº†è‡ªèº« goroutine æ‰§è¡Œå’Œè°ƒåº¦çš„æ•ˆç‡ï¼Œè‡ªèº«åœ¨ runtime ä¸­å®ç°äº†ä¸€å¥— goroutine çš„è°ƒåº¦å™¨ï¼Œä¸‹é¢é€šè¿‡ä¸€æ®µç®€å•çš„ä»£ç å±•ç¤ºä¸€ä¸‹ Go åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶çš„ goroutineï¼Œæ–¹ä¾¿å¤§å®¶æ›´å¥½çš„ç†è§£ã€‚&lt;/p>
&lt;blockquote>
&lt;p>The Go scheduler is part of the Go runtime, and the Go runtime is built into your application&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>; i &amp;lt; &lt;span style="color:#0000c0">4&lt;/span>; i&lt;span style="color:#00538b">++&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5317ac">go&lt;/span> &lt;span style="color:#5317ac">func&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time.&lt;span style="color:#721045">Sleep&lt;/span>(time.Second)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(runtime.&lt;span style="color:#721045">NumGoroutine&lt;/span>())
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºä¸ºï¼š&lt;code>5&lt;/code> è¯´æ˜å½“å‰è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­å­˜åœ¨ &lt;code>goroutine&lt;/code> çš„æ•°é‡æ˜¯ &lt;code>5&lt;/code>ï¼Œäº‹å®ä¸Šä¹Ÿç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ 5 ä¸ª goroutine ä½œä¸ºæ“ä½œç³»ç»Ÿç”¨æˆ·æ€çš„åŸºæœ¬è°ƒåº¦å•å…ƒæ˜¯æ— æ³•ç›´æ¥å ç”¨æ“ä½œç³»ç»Ÿçš„èµ„æºæ¥æ‰§è¡Œçš„ï¼Œå¿…é¡»ç»è¿‡å†…æ ¸çº§çº¿ç¨‹çš„åˆ†å‘ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿå†…éƒ¨çº¿ç¨‹è°ƒåº¦çš„åŸºæœ¬æ¨¡å‹ï¼Œæ ¹æ®ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„å¯¹åº”å…³ç³»å¯ä»¥åˆ†ä¸º 1 å¯¹ 1ï¼ŒN å¯¹ 1 ä»¥åŠ M å¯¹ N è¿™ä¸‰ç§æ¨¡å‹ï¼Œé‚£ä¹ˆä¸Šè¿°çš„ 5 ä¸ª goroutine åœ¨å†…æ ¸çº§çº¿ç¨‹ä¸Šæ˜¯æ€ä¹ˆè¢«åˆ†å‘çš„ï¼Œè¿™å°±æ˜¯ Goè¯­è¨€çš„ goroutine è°ƒåº¦å™¨å†³å®šçš„ã€‚&lt;/p></description></item><item><title>Golang-æ•°ç»„ä¸åˆ‡ç‰‡å¸¸è§é”™è¯¯åŠé™·é˜±</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E6%95%B0%E7%BB%84%E4%B8%8E%E5%88%87%E7%89%87%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E5%8F%8A%E9%99%B7%E9%98%B1/</link><pubDate>Tue, 15 Feb 2022 16:34:35 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E6%95%B0%E7%BB%84%E4%B8%8E%E5%88%87%E7%89%87%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E5%8F%8A%E9%99%B7%E9%98%B1/</guid><description>&lt;h2 id="nilåˆ‡ç‰‡ç©ºåˆ‡ç‰‡é›¶åˆ‡ç‰‡">nilåˆ‡ç‰‡ã€ç©ºåˆ‡ç‰‡ã€é›¶åˆ‡ç‰‡&lt;/h2>
&lt;p>&lt;strong>é›¶åˆ‡ç‰‡&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s = &lt;span style="color:#8f0075">make&lt;/span>([]&lt;span style="color:#005a5f">int&lt;/span>, &lt;span style="color:#0000c0">10&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(s)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00538b">------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¡¨ç¤ºåº•å±‚æ•°ç»„çš„äºŒè¿›åˆ¶å†…å®¹éƒ½æ˜¯é›¶&lt;/p>
&lt;p>&lt;strong>ã€Œç©ºåˆ‡ç‰‡ã€å’Œ ã€Œnil åˆ‡ç‰‡ã€&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s1 []&lt;span style="color:#005a5f">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s2 = []&lt;span style="color:#005a5f">int&lt;/span>{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s3 = &lt;span style="color:#8f0075">make&lt;/span>([]&lt;span style="color:#005a5f">int&lt;/span>, &lt;span style="color:#0000c0">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#505050">// new å‡½æ•°è¿”å›æ˜¯æŒ‡é’ˆç±»å‹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ * å·æ¥è§£å¼•ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s4 = &lt;span style="color:#00538b">*&lt;/span>&lt;span style="color:#8f0075">new&lt;/span>([]&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#8f0075">len&lt;/span>(s1), &lt;span style="color:#8f0075">len&lt;/span>(s2), &lt;span style="color:#8f0075">len&lt;/span>(s3), &lt;span style="color:#8f0075">len&lt;/span>(s4))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#8f0075">cap&lt;/span>(s1), &lt;span style="color:#8f0075">cap&lt;/span>(s2), &lt;span style="color:#8f0075">cap&lt;/span>(s3), &lt;span style="color:#8f0075">cap&lt;/span>(s4))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(s1, s2, s3, s4)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00538b">----------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[] [] [] []
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šé¢è¿™å››ç§å½¢å¼ä»è¾“å‡ºç»“æœä¸Šæ¥çœ‹ï¼Œä¼¼ä¹ä¸€æ‘¸ä¸€æ ·ï¼Œæ²¡åŒºåˆ«ã€‚ä½†æ˜¯å®é™…ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œæˆ‘ä»¬è¦è®²çš„ä¸¤ç§ç‰¹æ®Šç±»å‹ã€Œç©ºåˆ‡ç‰‡ã€å’Œã€Œ nil åˆ‡ç‰‡ã€ï¼Œå°±éšè—åœ¨ä¸Šé¢çš„å››ç§å½¢å¼ä¹‹ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s1 []&lt;span style="color:#005a5f">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s2 = []&lt;span style="color:#005a5f">int&lt;/span>{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s3 = &lt;span style="color:#8f0075">make&lt;/span>([]&lt;span style="color:#005a5f">int&lt;/span>, &lt;span style="color:#0000c0">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> s4 = &lt;span style="color:#00538b">*&lt;/span>&lt;span style="color:#8f0075">new&lt;/span>([]&lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> a1 = &lt;span style="color:#00538b">*&lt;/span>(&lt;span style="color:#00538b">*&lt;/span>[&lt;span style="color:#0000c0">3&lt;/span>]&lt;span style="color:#005a5f">int&lt;/span>)(unsafe.&lt;span style="color:#721045">Pointer&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>s1))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> a2 = &lt;span style="color:#00538b">*&lt;/span>(&lt;span style="color:#00538b">*&lt;/span>[&lt;span style="color:#0000c0">3&lt;/span>]&lt;span style="color:#005a5f">int&lt;/span>)(unsafe.&lt;span style="color:#721045">Pointer&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>s2))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> a3 = &lt;span style="color:#00538b">*&lt;/span>(&lt;span style="color:#00538b">*&lt;/span>[&lt;span style="color:#0000c0">3&lt;/span>]&lt;span style="color:#005a5f">int&lt;/span>)(unsafe.&lt;span style="color:#721045">Pointer&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>s3))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> a4 = &lt;span style="color:#00538b">*&lt;/span>(&lt;span style="color:#00538b">*&lt;/span>[&lt;span style="color:#0000c0">3&lt;/span>]&lt;span style="color:#005a5f">int&lt;/span>)(unsafe.&lt;span style="color:#721045">Pointer&lt;/span>(&lt;span style="color:#00538b">&amp;amp;&lt;/span>s4))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(a1)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(a2)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(a3)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fmt.&lt;span style="color:#721045">Println&lt;/span>(a4)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00538b">---------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#0000c0">824634199592&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#0000c0">824634199592&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶ä¸­è¾“å‡ºä¸º [0 0 0] çš„ s1 å’Œ s4 å˜é‡å°±æ˜¯ã€Œ nil åˆ‡ç‰‡ã€ï¼Œs2 å’Œ s3 å˜é‡å°±æ˜¯ã€Œç©ºåˆ‡ç‰‡ã€ã€‚824634199592 è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†…å­˜åœ°å€ï¼Œæ‰€æœ‰ç±»å‹çš„ã€Œç©ºåˆ‡ç‰‡ã€éƒ½å…±äº«è¿™ä¸€ä¸ªå†…å­˜åœ°å€ã€‚&lt;/p></description></item><item><title>Golang-ä»£ç æ–­è¡Œè§„åˆ™</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BB%A3%E7%A0%81%E6%96%AD%E8%A1%8C%E8%A7%84%E5%88%99/</link><pubDate>Wed, 02 Feb 2022 16:37:59 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E4%BB%A3%E7%A0%81%E6%96%AD%E8%A1%8C%E8%A7%84%E5%88%99/</guid><description>&lt;p>å¦‚æœä½ å·²ç»å†™äº†ä¸€äº›Goä»£ç ï¼Œä½ åº”è¯¥çŸ¥é“ï¼ŒGoä»£ç é£æ ¼ä¸èƒ½å¤ªéšæ„ã€‚ å…·ä½“è¯´æ¥ï¼Œæˆ‘ä»¬ä¸èƒ½éšæ„åœ¨æŸä¸ªç©ºæ ¼æˆ–è€…ç¬¦å·å­—ç¬¦å¤„æ–­è¡Œã€‚ æœ¬æ–‡ä½™ä¸‹çš„éƒ¨åˆ†å°†åˆ—å‡ºGoä»£ç ä¸­çš„è¯¦ç»†æ–­è¡Œè§„åˆ™ã€‚&lt;/p>
&lt;h2 id="åˆ†å·æ’å…¥è§„åˆ™">åˆ†å·æ’å…¥è§„åˆ™&lt;/h2>
&lt;p>æˆ‘ä»¬åœ¨Goç¼–ç¨‹ä¸­å¸¸éµå¾ªçš„ä¸€ä¸ªè§„åˆ™æ˜¯ï¼šä¸€ä¸ªæ˜¾å¼ä»£ç å—çš„èµ·å§‹å·¦å¤§æ‹¬å·{ä¸æ”¾åœ¨ä¸‹ä¸€è¡Œã€‚ æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªforå¾ªç¯ä»£ç å—ç¼–è¯‘å°†å¤±è´¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">5&lt;/span>; i &amp;gt; &lt;span style="color:#0000c0">0&lt;/span>; i&lt;span style="color:#00538b">--&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#505050">// error: æœªé¢„æ–™åˆ°çš„æ–°è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ºäº†è®©ä¸Šé¢è¿™ä¸ªforå¾ªç¯ä»£ç å—ç¼–è¯‘æˆåŠŸï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨èµ·å§‹å·¦å¤§æ‹¬å·{å‰æ–­è¡Œï¼Œè€Œåº”è¯¥åƒä¸‹é¢è¿™æ ·è¿›è¡Œä¿®æ”¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">5&lt;/span>; i &amp;gt; &lt;span style="color:#0000c0">0&lt;/span>; i&lt;span style="color:#00538b">--&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶è€Œï¼Œæœ‰æ—¶å€™èµ·å§‹å·¦å¤§æ‹¬å·{å´å¯ä»¥æ”¾åœ¨ä¸€ä¸ªæ–°è¡Œä¸Šï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªforå¾ªç¯ä»£ç¼–è¯‘æ—¶æ²¡æœ‰é—®é¢˜çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">for&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#505050">// do something ...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‚£ä¹ˆï¼ŒGoä»£ç ä¸­çš„æ ¹æœ¬æ€§æ¢è¡Œè§„åˆ™ç©¶ç«Ÿæ˜¯å¦‚ä½•å®šä¹‰çš„å‘¢ï¼Ÿ åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥çŸ¥é“ä¸€ä¸ªäº‹å®ï¼šæ­£å¼çš„Goè¯­æ³•æ˜¯ä½¿ç”¨ï¼ˆè‹±æ–‡ï¼‰åˆ†å·;åšä¸ºç»“å°¾æ ‡è¯†ç¬¦çš„ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬å¾ˆå°‘åœ¨Goä»£ç ä¸­ä½¿ç”¨å’Œçœ‹åˆ°åˆ†å·ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼ŸåŸå› æ˜¯å¤§å¤šæ•°åˆ†å·éƒ½æ˜¯å¯é€‰çš„ï¼Œå› æ­¤å®ƒä»¬å¸¸å¸¸è¢«çœç•¥ã€‚ åœ¨ç¼–è¯‘æ—¶åˆ»ï¼ŒGoç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥è¿™äº›çœç•¥çš„åˆ†å·ã€‚&lt;/p>
&lt;p>æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç¨‹åºä¸­çš„åä¸ªåˆ†å·éƒ½æ˜¯å¯ä»¥è¢«çœç•¥æ‰çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> main;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> &lt;span style="color:#2544bb">&amp;#34;fmt&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">var&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		i &lt;span style="color:#005a5f">int&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		sum &lt;span style="color:#005a5f">int&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">for&lt;/span> i &amp;lt; &lt;span style="color:#0000c0">6&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		sum &lt;span style="color:#00538b">+=&lt;/span> i;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		i&lt;span style="color:#00538b">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Println&lt;/span>(sum);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‡è®¾ä¸Šé¢è¿™ä¸ªç¨‹åºå­˜å‚¨åœ¨ä¸€ä¸ªsemicolons.goæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œgo fmt semicolons.goå°†æ­¤ç¨‹åºä¸­çš„ä¸å¿…è¦çš„åˆ†å·å»é™¤æ‰ã€‚ åœ¨ç¼–è¯‘æ—¶åˆ»ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ­¤æ’å…¥è¿™äº›å»é™¤æ‰çš„åˆ†å·ï¼ˆè‡³æ­¤æ–‡ä»¶çš„å†…å­˜ä¸­çš„ç‰ˆæœ¬ï¼‰ã€‚&lt;/p>
&lt;p>è‡ªåŠ¨æ’å…¥åˆ†å·çš„è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼ŸGoç™½çš®ä¹¦è¿™æ ·æè¿°ï¼š&lt;/p></description></item><item><title>Golang-åœæ­¢Goroutineæœ‰å‡ ç§æ–¹æ³•</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E5%81%9C%E6%AD%A2goroutine%E6%9C%89%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/</link><pubDate>Wed, 12 Jan 2022 18:23:23 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E5%81%9C%E6%AD%A2goroutine%E6%9C%89%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/</guid><description>&lt;h3 id="goroutineä»‹ç»">goroutineä»‹ç»&lt;/h3>
&lt;p>goroutine æ˜¯ Go è¯­è¨€å®ç°å¹¶å‘ç¼–ç¨‹çš„åˆ©å™¨ï¼Œæ˜¯ Goè¯­è¨€ä¸­çš„è½»é‡çº§çº¿ç¨‹å®ç°ï¼Œç”± Go è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ç®¡ç†ï¼Œç®€å•çš„ä¸€ä¸ªæŒ‡ä»¤go functionå°±èƒ½å¯åŠ¨ä¸€ä¸ª goroutineï¼›Go ç¨‹åºä¼šæ™ºèƒ½åœ°å°† goroutine ä¸­çš„ä»»åŠ¡åˆç†åœ°åˆ†é…ç»™æ¯ä¸ª CPUã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼ŒGoè¯­è¨€å¹¶æ²¡æœ‰æä¾›ç»ˆæ­¢goroutineçš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½ä»å¤–éƒ¨å»åœæ­¢ä¸€ä¸ªgoroutineï¼Œåªèƒ½ç”±goroutineå†…éƒ¨é€€å‡º(mainå‡½æ•°ç»ˆæ­¢é™¤å¤–)ï¼›&lt;/p>
&lt;h3 id="goroutine-æ¡ˆä¾‹">goroutine æ¡ˆä¾‹&lt;/h3>
&lt;p>æ—¥å¸¸å¼€å‘å¼€å¯ä¸€ä¸ª goroutine goä»£ç , åªéœ€ä¸€ä¸ª go å…³é”®å­—å³å¯:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> wg sync.WaitGroup &lt;span style="color:#505050">// ç­‰å¾…ç»„ï¼Œç”¨æ¥é˜»å¡ç¨‹åº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	wg.&lt;span style="color:#721045">Add&lt;/span>(&lt;span style="color:#0000c0">1&lt;/span>) &lt;span style="color:#505050">// ç­‰å¾…ç»„ +1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">go&lt;/span> &lt;span style="color:#5317ac">func&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">for&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;å¼€å¯ goroutine&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	wg.&lt;span style="color:#721045">Wait&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å‡ ç§åœæ­¢çš„åŠæ³•">å‡ ç§åœæ­¢çš„åŠæ³•&lt;/h3>
&lt;p>Go ç›®å‰ç”¨ channel æˆ– context çš„æ–¹å¼æ¥å–æ¶ˆ (cancelation) ç»™ goroutineã€‚&lt;/p>
&lt;h4 id="channel">Channel&lt;/h4>
&lt;ul>
&lt;li>ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å€ŸåŠ© channel çš„ close æœºåˆ¶æ¥å®Œæˆå¯¹ goroutine çš„ç²¾ç¡®æ§åˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	msg &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#8f0075">make&lt;/span>(&lt;span style="color:#5317ac">chan&lt;/span> &lt;span style="color:#5317ac">struct&lt;/span>{})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">go&lt;/span> &lt;span style="color:#5317ac">func&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;[go-routine] start&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">case&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span>msg:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;[go-routine] done&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#5317ac">return&lt;/span> &lt;span style="color:#505050">// å¿…é¡» return, å¦åˆ™ goroutine ä¸ä¼šç»“æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;start&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;close channel&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#8f0075">close&lt;/span>(msg) &lt;span style="color:#505050">// ç›´æ¥å…³é—­é€šé“ ç¨‹åºç»“æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	time.&lt;span style="color:#721045">Sleep&lt;/span>(&lt;span style="color:#0000c0">1&lt;/span> &lt;span style="color:#00538b">*&lt;/span> time.Second)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ç¬¬äºŒç§æ–¹æ³•ï¼Œé€šè¿‡å®šæœŸè½®è®­ channel å…¶ç»“åˆäº†ç¬¬ä¸€ç§æ–¹æ³•å’Œç±»ä¼¼ä¿¡å·é‡çš„å¤„ç†æ–¹å¼ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#2544bb">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#2544bb">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#2544bb">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">var&lt;/span> wg sync.WaitGroup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">worker&lt;/span>(in, quit &lt;span style="color:#00538b">&amp;lt;-&lt;/span>&lt;span style="color:#5317ac">chan&lt;/span> &lt;span style="color:#005a5f">int&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">defer&lt;/span> wg.&lt;span style="color:#721045">Done&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">for&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">case&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span>quit:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;æ”¶åˆ°é€€å‡ºä¿¡å·&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#5317ac">return&lt;/span> &lt;span style="color:#505050">//å¿…é¡»returnï¼Œå¦åˆ™goroutineä¸ä¼šç»“æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#5317ac">case&lt;/span> v &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#00538b">&amp;lt;-&lt;/span>in:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			fmt.&lt;span style="color:#721045">Println&lt;/span>(v)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	quit &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#8f0075">make&lt;/span>(&lt;span style="color:#5317ac">chan&lt;/span> &lt;span style="color:#005a5f">int&lt;/span>) &lt;span style="color:#505050">//é€€å‡ºé€šé“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	in &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#8f0075">make&lt;/span>(&lt;span style="color:#5317ac">chan&lt;/span> &lt;span style="color:#005a5f">int&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	wg.&lt;span style="color:#721045">Add&lt;/span>(&lt;span style="color:#0000c0">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">go&lt;/span> &lt;span style="color:#721045">worker&lt;/span>(in, quit)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#5317ac">for&lt;/span> i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">0&lt;/span>; i &amp;lt; &lt;span style="color:#0000c0">3&lt;/span>; i&lt;span style="color:#00538b">++&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		in &lt;span style="color:#00538b">&amp;lt;-&lt;/span> i
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		time.&lt;span style="color:#721045">Sleep&lt;/span>(&lt;span style="color:#0000c0">1&lt;/span> &lt;span style="color:#00538b">*&lt;/span> time.Second)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	quit &lt;span style="color:#00538b">&amp;lt;-&lt;/span> &lt;span style="color:#0000c0">1&lt;/span> &lt;span style="color:#505050">//æƒ³é€šé“å†™å…¥é€€å‡ºä¿¡å·&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	wg.&lt;span style="color:#721045">Wait&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="context">Context&lt;/h4>
&lt;p>Go è¯­è¨€çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰æ¥åš goroutine çš„æ§åˆ¶å’Œå…³é—­, å¯¹äºæ˜¯ä¸€ç§ tree ç»“æ„çš„goroutine, è¦åœæ­¢ sub tree ä½¿ç”¨ channel çš„æ–¹å¼ä¸å¤ªæ–¹ä¾¿&lt;/p></description></item><item><title>Golang-å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’</title><link>https://blog.ch3nnn.cn/posts/2022/golang-%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/</link><pubDate>Sun, 09 Jan 2022 18:09:14 +0000</pubDate><guid>https://blog.ch3nnn.cn/posts/2022/golang-%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/</guid><description>&lt;h2 id="go-å®˜æ–¹çš„å®šä¹‰">Go å®˜æ–¹çš„å®šä¹‰&lt;/h2>
&lt;p>æœ¬éƒ¨åˆ†å¼•ç”¨ Go å®˜æ–¹ FAQ çš„ â€œWhen are function parameters passed by value?â€ï¼Œå†…å®¹å¦‚ä¸‹ã€‚&lt;/p>
&lt;p>å¦‚åŒ C ç³»åˆ—çš„æ‰€æœ‰è¯­è¨€ä¸€æ ·ï¼ŒGo è¯­è¨€ä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä»¥å€¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå‡½æ•°æ€»æ˜¯å¾—åˆ°ä¸€ä¸ªè¢«ä¼ é€’çš„ä¸œè¥¿çš„å‰¯æœ¬ï¼Œå°±åƒæœ‰ä¸€ä¸ªèµ‹å€¼è¯­å¥å°†å€¼èµ‹ç»™å‚æ•°ä¸€æ ·ã€‚&lt;/p>
&lt;h2 id="ä¼ å€¼å’Œä¼ å¼•ç”¨">ä¼ å€¼å’Œä¼ å¼•ç”¨&lt;/h2>
&lt;h3 id="ä»€ä¹ˆæ˜¯ä¼ å€¼å€¼ä¼ é€’">ä»€ä¹ˆæ˜¯ä¼ å€¼ï¼ˆå€¼ä¼ é€’ï¼‰&lt;/h3>
&lt;p>ä¼ å€¼çš„æ„æ€æ˜¯ï¼šå‡½æ•°ä¼ é€’çš„æ€»æ˜¯åŸæ¥è¿™ä¸ªä¸œè¥¿çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸€å‰¯æ‹·è´ã€‚&lt;strong>å…¶æŒ‡çš„æ˜¯åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°å¤åˆ¶ä¸€ä»½ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œè¿™æ ·åœ¨å‡½æ•°ä¸­å¦‚æœå¯¹å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œå°†ä¸ä¼šå½±å“åˆ°å®é™…å‚æ•°ã€‚&lt;/strong> æ¯”å¦‚æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªintç±»å‹çš„å‚æ•°ï¼Œä¼ é€’çš„å…¶å®æ˜¯è¿™ä¸ªå‚æ•°çš„ä¸€ä¸ªå‰¯æœ¬ï¼›ä¼ é€’ä¸€ä¸ªæŒ‡é’ˆç±»å‹çš„å‚æ•°ï¼Œå…¶å®ä¼ é€’çš„æ˜¯è¿™ä¸ªè¯¥æŒ‡é’ˆçš„ä¸€ä»½æ‹·è´ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚&lt;/p>
&lt;p>å¯¹äºintè¿™ç±»åŸºç¡€ç±»å‹æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„ç†è§£ï¼Œå®ƒä»¬å°±æ˜¯ä¸€ä¸ªæ‹·è´ï¼Œä½†æ˜¯æŒ‡é’ˆå‘¢ï¼Ÿæˆ‘ä»¬è§‰å¾—å¯ä»¥é€šè¿‡å®ƒä¿®æ”¹åŸæ¥çš„å€¼ï¼Œæ€ä¹ˆä¼šæ˜¯ä¸€ä¸ªæ‹·è´å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;p>test_demo.go&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">package&lt;/span> main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#2544bb">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#2544bb">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">modify&lt;/span>(ip &lt;span style="color:#00538b">*&lt;/span>&lt;span style="color:#005a5f">int&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Printf&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;å‡½æ•°é‡Œæ¥æ”¶åˆ°çš„æŒ‡é’ˆçš„å†…å­˜åœ°å€æ˜¯ï¼š%p\n&amp;#34;&lt;/span>, &lt;span style="color:#00538b">&amp;amp;&lt;/span>ip)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#00538b">*&lt;/span>ip = &lt;span style="color:#0000c0">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#5317ac">func&lt;/span> &lt;span style="color:#721045">TestDemo&lt;/span>(t &lt;span style="color:#00538b">*&lt;/span>testing.T) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	i &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#0000c0">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	ip &lt;span style="color:#00538b">:=&lt;/span> &lt;span style="color:#00538b">&amp;amp;&lt;/span>i
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Printf&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;åŸå§‹æŒ‡é’ˆçš„å†…å­˜åœ°å€æ˜¯ï¼š%p\n&amp;#34;&lt;/span>, &lt;span style="color:#00538b">&amp;amp;&lt;/span>ip)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#721045">modify&lt;/span>(ip)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	fmt.&lt;span style="color:#721045">Println&lt;/span>(&lt;span style="color:#2544bb">&amp;#34;intå€¼è¢«ä¿®æ”¹äº†ï¼Œæ–°å€¼ä¸º:&amp;#34;&lt;/span>, i)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¾“å‡ºç»“æœ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#000;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>åŸå§‹æŒ‡é’ˆçš„å†…å­˜åœ°å€æ˜¯ï¼š0xc00000e038
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å‡½æ•°é‡Œæ¥æ”¶åˆ°çš„æŒ‡é’ˆçš„å†…å­˜åœ°å€æ˜¯ï¼š0xc00000e040
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>intå€¼è¢«ä¿®æ”¹äº†ï¼Œæ–°å€¼ä¸º: 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä»€ä¹ˆæ˜¯ä¼ å¼•ç”¨å¼•ç”¨ä¼ é€’">ä»€ä¹ˆæ˜¯ä¼ å¼•ç”¨(å¼•ç”¨ä¼ é€’)&lt;/h3>
&lt;p>ä¼ å¼•ç”¨ï¼Œä¹Ÿå«åšå¼•ç”¨ä¼ é€’ï¼Œ &lt;strong>æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°çš„åœ°å€ç›´æ¥ä¼ é€’åˆ°å‡½æ•°ä¸­&lt;/strong>ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°ä¸­å¯¹å‚æ•°æ‰€è¿›è¡Œçš„ä¿®æ”¹ï¼Œå°†å½±å“åˆ°å®é™…å‚æ•°ã€‚&lt;/p>
&lt;p>åœ¨ Go è¯­è¨€ä¸­ï¼Œå®˜æ–¹å·²ç»æ˜ç¡®äº†æ²¡æœ‰ä¼ å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¼•ç”¨ä¼ é€’è¿™ä¸€æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;strong>äº‰è®®æœ€å¤§çš„ map å’Œ slice&lt;/strong>
è¿™æ—¶å€™åˆæœ‰å°ä¼™ä¼´ç–‘æƒ‘äº†ï¼Œä½ çœ‹ Go è¯­è¨€ä¸­çš„ map å’Œ slice ç±»å‹ï¼Œèƒ½ç›´æ¥ä¿®æ”¹ï¼Œéš¾é“ä¸æ˜¯åŒä¸ªå†…å­˜åœ°å€ï¼Œä¸æ˜¯å¼•ç”¨äº†ï¼Ÿ&lt;/p></description></item></channel></rss>