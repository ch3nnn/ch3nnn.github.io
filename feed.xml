<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Ch3nnnä¸ªäººåšå®¢</title>
    <link>https://ch3nnn.github.io/</link>
    
    <atom:link href="https://ch3nnn.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    
    <description>å°ç«™ä¸»è¦ç”¨æ¥åˆ†äº«å’Œè®°å½•å­¦ä¹ ç»éªŒ,æ•™ç¨‹,è®°å½•ä¸ªäººç”Ÿæ´»çš„ç‚¹æ»´ä»¥åŠä¸€äº›éšç¬”.</description>
    <pubDate>Mon, 09 Jan 2023 08:46:03 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Filebeatè½»é‡å‹æ—¥å¿—é‡‡é›†å™¨åŠoutputæ’ä»¶å¼€å‘</title>
      <link>https://ch3nnn.github.io/2023/01/09/Filebeat%E8%BD%BB%E9%87%8F%E5%9E%8B%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8%E5%8F%8Aoutput%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</link>
      <guid>https://ch3nnn.github.io/2023/01/09/Filebeat%E8%BD%BB%E9%87%8F%E5%9E%8B%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8%E5%8F%8Aoutput%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</guid>
      <pubDate>Mon, 09 Jan 2023 08:36:01 GMT</pubDate>
      
        
        
      <description>&lt;blockquote&gt;
&lt;p&gt;æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯ OT è¿›è¡Œæ•°æ®æ”¶é›†ï¼ŒFilebeat éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; cl</description>
        
      
      
      
      <content:encoded><![CDATA[<blockquote><p>æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯ OT è¿›è¡Œæ•°æ®æ”¶é›†ï¼ŒFilebeat éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚</p></blockquote><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Filebeat æ˜¯ä½¿ç”¨ Golang å®ç°çš„è½»é‡å‹æ—¥å¿—é‡‡é›†å™¨ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª agent ï¼Œå¯ä»¥å®‰è£…åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®é…ç½®è¯»å–å¯¹åº”ä½ç½®çš„æ—¥å¿—ï¼Œå¹¶ä¸ŠæŠ¥åˆ°ç›¸åº”çš„åœ°æ–¹å»ã€‚</p><h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><p>Filebeat å¹¶ä¸ä¾èµ–äº ElasticSearchï¼Œå¯ä»¥å•ç‹¬å­˜åœ¨ã€‚æˆ‘ä»¬å¯ä»¥å•ç‹¬ä½¿ç”¨Filebeatè¿›è¡Œæ—¥å¿—çš„ä¸ŠæŠ¥å’Œæœé›†ã€‚filebeat å†…ç½®äº†å¸¸ç”¨çš„ Output ç»„ä»¶, ä¾‹å¦‚ kafkaã€ElasticSearchã€redis ç­‰ï¼Œå‡ºäºè°ƒè¯•è€ƒè™‘ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºåˆ° console å’Œ file ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç°æœ‰çš„ Output ç»„ä»¶ï¼Œå°†æ—¥å¿—è¿›è¡Œä¸ŠæŠ¥ã€‚</p><h3 id="æ•´ä½“å·¥ä½œåŸç†"><a href="#æ•´ä½“å·¥ä½œåŸç†" class="headerlink" title="æ•´ä½“å·¥ä½œåŸç†"></a>æ•´ä½“å·¥ä½œåŸç†</h3><p>Filebeat ç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼šharvester å’Œ prospectorã€‚</p><ul><li>harvester (é‡‡é›†å™¨) çš„ä¸»è¦èŒè´£æ˜¯è¯»å–å•ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚è¯»å–æ¯ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹å‘é€åˆ° the outputã€‚ æ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterï¼Œharvester è´Ÿè´£æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶æ–‡ä»¶æè¿°ç¬¦ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚å¦‚æœæ–‡ä»¶åœ¨è¯»å–æ—¶è¢«åˆ é™¤æˆ–é‡å‘½åï¼ŒFilebeat å°†ç»§ç»­è¯»å–æ–‡ä»¶ã€‚</li><li>prospector (æŸ¥æ‰¾å™¨) çš„ä¸»è¦èŒè´£æ˜¯ç®¡ç† harvester å¹¶æ‰¾åˆ°æ‰€æœ‰è¦è¯»å–çš„æ–‡ä»¶æ¥æºã€‚å¦‚æœè¾“å…¥ç±»å‹ä¸ºæ—¥å¿—ï¼Œåˆ™æŸ¥æ‰¾å™¨å°†æŸ¥æ‰¾è·¯å¾„åŒ¹é…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–‡ä»¶å¯åŠ¨ä¸€ä¸ª harvesterã€‚æ¯ä¸ª prospector éƒ½åœ¨è‡ªå·±çš„ Go åç¨‹ä¸­è¿è¡Œã€‚<blockquote><p><em>æ³¨ï¼šFilebeat prospectoråªèƒ½è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œ æ²¡æœ‰åŠŸèƒ½å¯ä»¥è¿æ¥åˆ°è¿œç¨‹ä¸»æœºæ¥è¯»å–å­˜å‚¨çš„æ–‡ä»¶æˆ–æ—¥å¿—ã€‚</em></p></blockquote></li></ul><p>ç”±ä»¥ä¸Šä¸¤ä¸ªç»„ä»¶ä¸€èµ·å·¥ä½œæ¥è¯»å–æ–‡ä»¶ï¼ˆtail fileï¼‰å¹¶å°†äº‹ä»¶æ•°æ®å‘é€åˆ°æŒ‡å®šçš„è¾“å‡ºã€‚<br>ä¸‹å›¾æ˜¯ Filebeat å®˜æ–¹æä¾›çš„æ¶æ„å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/ch3nnn/picgo/blog/imgs20230109163928.png"></p><h4 id="FilebeatèƒŒåçš„â€œè€å¤§â€"><a href="#FilebeatèƒŒåçš„â€œè€å¤§â€" class="headerlink" title="FilebeatèƒŒåçš„â€œè€å¤§â€"></a>FilebeatèƒŒåçš„â€œè€å¤§â€</h4><p>è¯´åˆ°Filebeatï¼Œå®ƒå…¶å®åªæ˜¯<a href="https://links.jianshu.com/go?to=https://github.com/elastic/beats/tree/master/libbeat">beatså®¶æ—</a>ä¼—å¤šæˆå‘˜ä¸­çš„ä¸€ä¸ªã€‚é™¤äº†Filebeat, è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„beatå°ä¼™ä¼´ï¼š</p><table><thead><tr><th>beat</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Filebeat</td><td>æ”¶é›†æ—¥å¿—æ–‡ä»¶</td></tr><tr><td>Metricbeat</td><td>æ”¶é›†å„ç§æŒ‡æ ‡æ•°æ®</td></tr><tr><td>Packetbeat</td><td>æ”¶é›†ç½‘ç»œæ•°æ®åŒ…</td></tr><tr><td>Auditbeat</td><td>æ”¶é›†å®¡è®¡æ•°æ®</td></tr><tr><td>Heartbeat</td><td>æ”¶é›†æœåŠ¡è¿è¡ŒçŠ¶æ€ç›‘æµ‹æ•°æ®</td></tr><tr><td>â€¦</td><td>â€¦</td></tr></tbody></table><p>å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§beatçš„è§„èŒƒæ¥å†™è‡ªå·±çš„beatã€‚<br>èƒ½å®ç°ä»¥ä¸Šè¿™äº›beatï¼Œéƒ½ç¦»ä¸å¼€beatså®¶æ—çœŸæ­£çš„â€œè€å¤§â€â€”â€” libbeatï¼Œ å®ƒæ˜¯beatä½“ç³»çš„æ ¸å¿ƒåº“ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹libbeatåˆ°åº•éƒ½ä½œäº†äº›ä»€ä¹ˆ</p><ul><li>libbeatæä¾›äº†publisherç»„ä»¶ï¼Œç”¨äºå¯¹æ¥inputï¼›</li><li>æ”¶é›†åˆ°çš„æ•°æ®åœ¨è¿›å…¥åˆ°libbeatåï¼Œé¦–å…ˆä¼šç»è¿‡å„ç§ processorçš„åŠ å·¥å¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤æ·»åŠ å­—æ®µï¼Œå¤šè¡Œåˆå¹¶ç­‰ç­‰ï¼›</li><li>inputç»„ä»¶é€šè¿‡publisherç»„ä»¶å°†æ”¶é›†åˆ°çš„æ•°æ®æ¨é€åˆ°publisherå†…éƒ¨çš„é˜Ÿåˆ—ï¼›</li><li>libbeatæœ¬èº«å®ç°äº†å‰é¢ä»‹ç»è¿‡çš„å¤šç§output, å› æ­¤å®ƒè´Ÿè´£å°†å¤„ç†å¥½çš„æ•°æ®é€šè¿‡outputç»„ä»¶å‘é€å‡ºå»ï¼›</li><li>libbeatæœ¬èº«å°è£…äº†retryçš„é€»è¾‘ï¼›</li><li>libbeatè´Ÿè´£å°†ACKåé¦ˆé€šè¿‡åˆ°inputç»„ä»¶ ï¼›</li></ul><p>ç”±æ­¤å¯è§ï¼Œå¤§éƒ¨åˆ†æ´»å„¿éƒ½æ˜¯libbeatæ¥ä½œï¼Œå½“â€œè€å¤§â€ä¸å®¹æ˜“å•Šï½ã€‚<br>inputä»…éœ€è¦ä½œä¸¤ä»¶äº‹ï¼š</p><ul><li>ä»ä¸åŒçš„ä»‹è´¨ä¸­æ”¶é›†æ•°æ®åæŠ•é€’ç»™libbeat;</li><li>æ¥æ”¶libbeatåé¦ˆå›æ¥çš„ACK, ä½œç›¸åº”çš„æŒä¹…åŒ–;</li></ul><h2 id="å®‰è£…ä¸ä½¿ç”¨"><a href="#å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="å®‰è£…ä¸ä½¿ç”¨"></a>å®‰è£…ä¸ä½¿ç”¨</h2><p>Filebeat åŸºäº Go è¯­è¨€å¼€å‘æ— å…¶ä»–ä¾èµ–ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ€§èƒ½ç¨³å®šã€é…ç½®ç®€å•ã€å ç”¨ç³»ç»Ÿèµ„æºå¾ˆå°‘ï¼Œå®‰è£…ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå¯è®¿é—® Elastic-Beats å®˜ç½‘è·å–å„ç‰ˆæœ¬ Filebeatã€‚å› ä¸º Filebeat å„ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚è¾ƒå¤§ï¼Œè¿™é‡Œæ¨è7ä»¥ä¸Šçš„æ–°ç‰ˆï¼Œé¦–å…ˆè¿›è¡Œä¸‹è½½è§£å‹ï¼š<br>tar -zxvf filebeat-7.tar.gz mv filebeat-7 filebeat cd filebeat</p><h3 id="FileBeatå¯åœæŒ‡ä»¤ï¼š"><a href="#FileBeatå¯åœæŒ‡ä»¤ï¼š" class="headerlink" title="FileBeatå¯åœæŒ‡ä»¤ï¼š"></a>FileBeatå¯åœæŒ‡ä»¤ï¼š</h3><ul><li>è°ƒè¯•æ¨¡å¼ä¸‹é‡‡ç”¨ï¼šç»ˆç«¯å¯åŠ¨ï¼ˆé€€å‡ºç»ˆç«¯æˆ– ctrl+c ä¼šé€€å‡ºè¿è¡Œï¼‰</li></ul><p><code>./filebeat -e -c filebeat.yml</code></p><ul><li>çº¿ä¸Šç¯å¢ƒé…åˆ error çº§åˆ«ä½¿ç”¨ï¼šä»¥åå°å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨å¯åŠ¨ filebeats</li></ul><p><code>nohup ./filebeat -e -c filebeat.yml &amp;</code></p><ul><li>é›¶è¾“å‡ºå¯åŠ¨ï¼ˆä¸æ¨èï¼‰ï¼šå°†æ‰€æœ‰æ ‡å‡†è¾“å‡ºåŠæ ‡å‡†é”™è¯¯è¾“å‡ºåˆ°&#x2F;dev&#x2F;nullç©ºè®¾å¤‡ï¼Œå³æ²¡æœ‰ä»»ä½•è¾“å‡ºä¿¡æ¯ã€‚</li></ul><p><code>nohup ./filebeat -e -c filebeat.yml &gt;/dev/null 2&gt;&amp;1 &amp;</code></p><ul><li>åœæ­¢è¿è¡Œ FileBeat è¿›ç¨‹</li></ul><p><code>ps -ef | grep filebeat Kill -9 çº¿ç¨‹å·</code></p><h3 id="FileBeaté…ç½®æ–‡ä»¶"><a href="#FileBeaté…ç½®æ–‡ä»¶" class="headerlink" title="FileBeaté…ç½®æ–‡ä»¶"></a>FileBeaté…ç½®æ–‡ä»¶</h3><p>FileBeat çš„é…ç½®æ–‡ä»¶å®šä¹‰äº†åœ¨è¯»å–æ–‡ä»¶çš„ä½ç½®ï¼Œè¾“å‡ºæµçš„ä½ç½®ä»¥åŠç›¸åº”çš„æ€§èƒ½å‚æ•°ï¼Œæœ¬å®ä¾‹æ˜¯ä»¥ Kafka æ¶ˆæ¯ä¸­é—´ä»¶ä½œä¸ºç¼“å†²ï¼Œæ‰€æœ‰çš„æ—¥å¿—æ”¶é›†å™¨éƒ½å‘ Kafka è¾“é€æ—¥å¿—æµï¼Œç›¸åº”çš„é…ç½®é¡¹å¦‚ä¸‹ï¼Œå¹¶é™„é…ç½®è¯´æ˜ï¼š</p><p>filebeat.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">filebeat.inputs:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">log</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/wls/applogs/rtlog/app.log</span></span><br><span class="line">  <span class="attr">fields:</span> </span><br><span class="line">    <span class="attr">log_topic:</span> <span class="string">appName</span></span><br><span class="line">  <span class="attr">multiline:</span></span><br><span class="line">        <span class="comment"># pattern for error log, if start with space or cause by </span></span><br><span class="line">        <span class="attr">pattern:</span> <span class="string">&#x27;^[[:space:]]+(at|\.&#123;3&#125;)\b|^Caused by:&#x27;</span></span><br><span class="line">        <span class="attr">negate:</span>  <span class="literal">false</span></span><br><span class="line">        <span class="attr">match:</span>   <span class="string">after</span></span><br><span class="line"></span><br><span class="line"><span class="attr">output.kafka:</span></span><br><span class="line">   <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">hosts:</span> [<span class="string">&quot;kafka-1:9092&quot;</span>,<span class="string">&quot;kafka-2:9092&quot;</span>]</span><br><span class="line">   <span class="attr">topic:</span> <span class="string">applog</span></span><br><span class="line">   <span class="attr">version:</span> <span class="string">&quot;0.10.2.0&quot;</span></span><br><span class="line">   <span class="attr">compression:</span> <span class="string">gzip</span></span><br><span class="line"></span><br><span class="line"><span class="attr">processors:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">drop_fields:</span> </span><br><span class="line">   <span class="attr">fields:</span> [<span class="string">&quot;beat&quot;</span>, <span class="string">&quot;input&quot;</span>, <span class="string">&quot;source&quot;</span>, <span class="string">&quot;offset&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">logging.level:</span> <span class="string">error</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">app-server-ip</span></span><br></pre></td></tr></table></figure><ul><li><strong>paths</strong>:å®šä¹‰äº†æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥é‡‡ç”¨æ¨¡ç³ŠåŒ¹é…æ¨¡å¼ï¼Œå¦‚*.log</li><li><strong>fields</strong>ï¼štopic å¯¹åº”çš„æ¶ˆæ¯å­—æ®µæˆ–è‡ªå®šä¹‰å¢åŠ çš„å­—æ®µã€‚</li><li><strong>output.kafka</strong>ï¼šfilebeat æ”¯æŒå¤šç§è¾“å‡ºï¼Œæ”¯æŒå‘ kafkaï¼Œlogstashï¼Œelasticsearch è¾“å‡ºæ•°æ®ï¼Œæ­¤å¤„è®¾ç½®æ•°æ®è¾“å‡ºåˆ° kafkaã€‚</li><li><strong>enabled</strong>ï¼šè¿™ä¸ªå¯åŠ¨è¿™ä¸ªæ¨¡å—ã€‚</li><li><strong>topic</strong>ï¼šæŒ‡å®šè¦å‘é€æ•°æ®ç»™ kafka é›†ç¾¤çš„å“ªä¸ª topicï¼Œè‹¥æŒ‡å®šçš„ topic ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºæ­¤ topicã€‚</li><li><strong>version</strong>ï¼šæŒ‡å®š kafka çš„ç‰ˆæœ¬ã€‚</li><li><strong>drop_fields</strong>ï¼šèˆå¼ƒå­—æ®µï¼Œfilebeat ä¼š json æ—¥å¿—ä¿¡æ¯ï¼Œé€‚å½“èˆå¼ƒæ— ç”¨å­—æ®µèŠ‚çœç©ºé—´èµ„æºã€‚</li><li><strong>name</strong>ï¼šæ”¶é›†æ—¥å¿—ä¸­å¯¹åº”ä¸»æœºçš„åå­—ï¼Œ<strong>å»ºè®® name è¿™é‡Œè®¾ç½®ä¸º IP</strong>ï¼Œä¾¿äºåŒºåˆ†å¤šå°ä¸»æœºçš„æ—¥å¿—ä¿¡æ¯ã€‚</li></ul><p>ä»¥ä¸Šå‚æ•°ä¿¡æ¯ï¼Œéœ€è¦ç”¨æˆ·ä¸ªæ€§åŒ–ä¿®æ”¹çš„ä¸»è¦æ˜¯ï¼špathsï¼Œhostsï¼Œtopicï¼Œversion å’Œ nameã€‚</p><h3 id="Filebeat-input-é…ç½®çƒ­åŠ è½½"><a href="#Filebeat-input-é…ç½®çƒ­åŠ è½½" class="headerlink" title="Filebeat input é…ç½®çƒ­åŠ è½½"></a>Filebeat input é…ç½®çƒ­åŠ è½½</h3><p>filebeat.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">filebeat.config.inputs:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">../configs/input*.yml</span></span><br><span class="line">  <span class="attr">reload.enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">reload.period:</span> <span class="string">5s</span></span><br><span class="line"></span><br><span class="line"><span class="attr">output.syslog:</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">tcp</span></span><br><span class="line">  <span class="attr">addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:5140</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">tag</span></span><br><span class="line"></span><br><span class="line"><span class="attr">fields:</span></span><br><span class="line">  <span class="attr">prober_id:</span> <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>input.yml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">log</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/Users/chentong/project/log-prober-go/prober-filebeat/cmd/filebeat/example.log</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Filebeat-å†™å…¥-kafka-ç¤ºä¾‹"><a href="#Filebeat-å†™å…¥-kafka-ç¤ºä¾‹" class="headerlink" title="Filebeat å†™å…¥ kafka ç¤ºä¾‹"></a>Filebeat å†™å…¥ kafka ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">filebeat.inputs:</span><br><span class="line">    - type: log</span><br><span class="line">      paths:</span><br><span class="line">        - /var/log/*.log</span><br><span class="line">        - /Users/chentong/project/log-prober-go/logs/app.log</span><br><span class="line">output.kafka:</span><br><span class="line">    hosts:</span><br><span class="line">        - 127.0.0.1:9092</span><br><span class="line">    topic: test_filebeat</span><br><span class="line">    keep_alive: 10s</span><br><span class="line">fields:</span><br><span class="line">    prober_id: 999</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Filebeat-output-syslogæ’ä»¶å¼€å‘"><a href="#Filebeat-output-syslogæ’ä»¶å¼€å‘" class="headerlink" title="Filebeat output syslogæ’ä»¶å¼€å‘"></a>Filebeat output syslogæ’ä»¶å¼€å‘</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><blockquote><p>filebeat è‡ªå¸¦åªæ”¯æŒ esã€logstashã€kafkaã€redisã€fileã€console æ•°æ®è¾“å‡º. éœ€è¦è‡ªå®šä¹‰è¾“å‡º syslog </p></blockquote><h3 id="å·¥ç¨‹æ­å»º"><a href="#å·¥ç¨‹æ­å»º" class="headerlink" title="å·¥ç¨‹æ­å»º"></a>å·¥ç¨‹æ­å»º</h3><h4 id="å¼•å…¥å¯¹beatçš„ä¾èµ–"><a href="#å¼•å…¥å¯¹beatçš„ä¾èµ–" class="headerlink" title="å¼•å…¥å¯¹beatçš„ä¾èµ–"></a>å¼•å…¥å¯¹<code>beat</code>çš„ä¾èµ–</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get github.com/elastic/beats/v7</span><br></pre></td></tr></table></figure><p>å®šä¹‰åœ¨filebeatä¸­çš„é…ç½®æ–‡ä»¶<br><code>filebeat</code>é€šå¸¸ä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼åŠ è½½æ’ä»¶ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸‹å¿…é¡»çš„é…ç½®ï¼Œå°±åƒ<code>elasticsearch</code>ä¸­çš„è¿æ¥åœ°å€ç­‰ç­‰ä¸€æ ·ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">output.syslog:</span></span><br><span class="line">  <span class="comment"># æ¥æ”¶æ–¹å¼</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">tcp</span>   </span><br><span class="line">  <span class="comment"># syslog åœ°å€</span></span><br><span class="line">  <span class="attr">addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:5140</span></span><br><span class="line">  <span class="comment"># è‡ªå®šä¹‰æ¶ˆæ¯tag</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">tag</span></span><br></pre></td></tr></table></figure><h4 id="goæ–‡ä»¶ä¸­çš„é…ç½®"><a href="#goæ–‡ä»¶ä¸­çš„é…ç½®" class="headerlink" title="goæ–‡ä»¶ä¸­çš„é…ç½®"></a>goæ–‡ä»¶ä¸­çš„é…ç½®</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> syslogConfig <span class="keyword">struct</span> &#123;</span><br><span class="line">Network <span class="type">string</span> <span class="string">`config:&quot;network&quot;`</span></span><br><span class="line">Addr    <span class="type">string</span> <span class="string">`config:&quot;addr&quot;`</span></span><br><span class="line">Tag     <span class="type">string</span> <span class="string">`config:&quot;tag&quot;`</span></span><br><span class="line"><span class="comment">// å‘å¸ƒæ—¥å¿—äº‹ä»¶çš„ worker goroutines æ•°é‡</span></span><br><span class="line">Workers <span class="type">int</span> <span class="string">`config:&quot;workers&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line"><span class="comment">// Max number of events in a batch to send to a single client</span></span><br><span class="line">BatchSize <span class="type">int</span> <span class="string">`config:&quot;batch_size&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line"><span class="comment">// Max number of retries for single batch of events</span></span><br><span class="line">RetryLimit <span class="type">int</span> <span class="string">`config:&quot;retry_limit&quot; validate:&quot;min=1&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–åŠ è½½æ’ä»¶"><a href="#åˆå§‹åŒ–åŠ è½½æ’ä»¶" class="headerlink" title="åˆå§‹åŒ–åŠ è½½æ’ä»¶"></a>åˆå§‹åŒ–åŠ è½½æ’ä»¶</h4><h4 id="åŠ è½½æ’ä»¶"><a href="#åŠ è½½æ’ä»¶" class="headerlink" title="åŠ è½½æ’ä»¶"></a>åŠ è½½æ’ä»¶</h4><p>åœ¨æŸä¸ªinitå‡½æ•°ä¸­æ³¨å†Œæ’ä»¶</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">outputs.RegisterType(<span class="string">&quot;syslog&quot;</span>, newSyslogOutPut)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>newSyslogOutPut</code>ä¸­å¸è½½é…ç½®ï¼Œå¹¶æä¾›é…ç½®ç»™<code>Syslog</code>å®¢æˆ·ç«¯</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newSyslogOutPut</span><span class="params">(_ outputs.IndexManager, _ beat.Info, stats outputs.Observer, cfg *common.Config)</span></span> (outputs.Group, <span class="type">error</span>) &#123;</span><br><span class="line">config := syslogConfig&#123;Workers: <span class="number">1</span>, BatchSize: <span class="number">1</span>, RetryLimit: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := cfg.Unpack(&amp;config); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> outputs.Fail(err)</span><br><span class="line">&#125;</span><br><span class="line">clients := <span class="built_in">make</span>([]outputs.NetworkClient, config.Workers)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; config.Workers; i++ &#123;</span><br><span class="line">clients[i] = &amp;SyslogClient&#123;</span><br><span class="line">network: config.Network,</span><br><span class="line">addr:    config.Addr,</span><br><span class="line">tag:     config.Tag,</span><br><span class="line">stats:   stats,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> outputs.SuccessNet(<span class="literal">true</span>, config.BatchSize, config.RetryLimit, clients)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–syslogå®¢æˆ·ç«¯"><a href="#åˆå§‹åŒ–syslogå®¢æˆ·ç«¯" class="headerlink" title="åˆå§‹åŒ–syslogå®¢æˆ·ç«¯"></a>åˆå§‹åŒ–<code>syslog</code>å®¢æˆ·ç«¯</h4><p><code>syslog</code>å®¢æˆ·ç«¯ä¸ä»…ä»…æ˜¯ä¸€ä¸ª<code>syslog</code>å®¢æˆ·ç«¯ï¼Œè€Œä¸”è¿˜éœ€è¦å®ç°<code>filebeat</code>ä¸­çš„<code>NetworkClient</code>æ¥å£ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥å…³æ³¨æ¥å£ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•çš„ä½œç”¨åŠå®ç°</p><h3 id="String-æ¥å£"><a href="#String-æ¥å£" class="headerlink" title="String()æ¥å£"></a>String()æ¥å£</h3><p><code>String</code>ä½œä¸ºå®¢æˆ·ç«¯çš„åå­—ï¼Œç”¨æ¥æ ‡è¯†æ—¥å¿—ä»¥åŠæŒ‡æ ‡ã€‚æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªæ¥å£</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Connect-æ¥å£"><a href="#Connect-æ¥å£" class="headerlink" title="Connect()æ¥å£"></a>Connect()æ¥å£</h3><p><code>Connect</code>ç”¨æ¥åˆå§‹åŒ–å®¢æˆ·ç«¯</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Connect() <span class="type">error</span> &#123;</span><br><span class="line">dial, err := gsyslog.DialLogger(c.network, c.addr, gsyslog.LOG_NOTICE, <span class="string">&quot;LOCAL0&quot;</span>, c.tag)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">c.client = dial</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™é‡Œåˆå§‹åŒ–å¤±è´¥ï¼Œéœ€è¦<code>Sleep</code>ä¸€æ®µæ—¶é—´ï¼Œå¦åˆ™ï¼Œfilebeatä¼šä¸€ç›´é‡è¯•ã€‚è¿™ç»éæ˜¯ä½ æƒ³è¦çš„ã€‚æˆ–è®¸å¯¹äºåœºæ™¯æ¥è¯´ï¼Œé€€é¿é‡è¯•å¯èƒ½ä¼šæ›´å¥½</p><h3 id="Close-æ¥å£"><a href="#Close-æ¥å£" class="headerlink" title="Close()æ¥å£"></a>Close()æ¥å£</h3><p>å…³é—­å®¢æˆ·ç«¯ï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„æ¥å£</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Close() <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">return</span> c.client.Close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Publish-æ¥å£"><a href="#Publish-æ¥å£" class="headerlink" title="Publish()æ¥å£"></a>Publish()æ¥å£</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> Publish(_ context.Context, batch publisher.Batch) <span class="type">error</span> &#123;</span><br><span class="line">events := batch.Events()</span><br><span class="line"><span class="comment">// è®°å½•è¿™æ‰¹æ—¥å¿—</span></span><br><span class="line">c.stats.NewBatch(<span class="built_in">len</span>(events))</span><br><span class="line">retryEvents, err := c.PublishEvents(events)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// å‘é€å¤±è´¥ï¼Œåˆ™é‡è¯• å—RetryLimitçš„é™åˆ¶</span></span><br><span class="line">batch.RetryEvents(retryEvents)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">c.stats.Acked(<span class="built_in">len</span>(events))</span><br><span class="line">batch.ACK()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘å¸ƒ syslog æ•°æ®</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *SyslogClient)</span></span> PublishEvents(events []publisher.Event) ([]publisher.Event, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> i, event := <span class="keyword">range</span> events &#123;</span><br><span class="line">message, err := event.Content.Fields.GetValue(<span class="string">&quot;message&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> events[i:], err</span><br><span class="line">&#125;</span><br><span class="line">m, ok := message.(<span class="type">string</span>)</span><br><span class="line"><span class="keyword">if</span> !ok &#123;</span><br><span class="line"><span class="keyword">return</span> events[i:], errors.New(<span class="string">&quot;cast log to str failed&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// syslog å‘é€æ•°æ®</span></span><br><span class="line">_, err = c.client.Write([]<span class="type">byte</span>(m))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> events[i:], err</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€åæ˜¯SyslogClient"><a href="#æœ€åæ˜¯SyslogClient" class="headerlink" title="æœ€åæ˜¯SyslogClient"></a>æœ€åæ˜¯<code>SyslogClient</code></h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> SyslogClient <span class="keyword">struct</span> &#123;</span><br><span class="line">network <span class="type">string</span></span><br><span class="line">addr    <span class="type">string</span></span><br><span class="line">tag     <span class="type">string</span></span><br><span class="line"></span><br><span class="line">stats  outputs.Observer</span><br><span class="line">client gsyslog.Syslogger</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      
      <category domain="https://ch3nnn.github.io/tags/Go/">Go</category>
      
      
      <comments>https://ch3nnn.github.io/2023/01/09/Filebeat%E8%BD%BB%E9%87%8F%E5%9E%8B%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E5%99%A8%E5%8F%8Aoutput%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>è¿™äº›æœ€å¸¸ç”¨çš„ Go CLI å‘½ä»¤ï¼Œæ–°æ‰‹ Gopher åº”è¯¥æŒæ¡</title>
      <link>https://ch3nnn.github.io/2023/01/02/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84GoCLI%E5%91%BD%E4%BB%A4/</link>
      <guid>https://ch3nnn.github.io/2023/01/02/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84GoCLI%E5%91%BD%E4%BB%A4/</guid>
      <pubDate>Mon, 02 Jan 2023 02:28:19 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»ä¸€äº›æœ€åŸºæœ¬çš„ Go å‘½ä»¤è¡Œå‘½ä»¤ã€‚å¦‚æœä½ åˆšæ¥è§¦ Go è¯­è¨€ï¼Œé‚£ä½ æœ‰å¿…è¦è®°ä½å®ƒä»¬ï¼Œå› ä¸ºè¿™äº›å‘½ä»¤æ˜¯ Go å¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­æ‰€å¿…å¤‡çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Go version&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼€å§‹ Go é¡¹ç›®å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¡®ä¿å¼€å‘æœºä¸Šå·²ç»å®‰è£…å¥½äº†</description>
        
      
      
      
      <content:encoded><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»ä¸€äº›æœ€åŸºæœ¬çš„ Go å‘½ä»¤è¡Œå‘½ä»¤ã€‚å¦‚æœä½ åˆšæ¥è§¦ Go è¯­è¨€ï¼Œé‚£ä½ æœ‰å¿…è¦è®°ä½å®ƒä»¬ï¼Œå› ä¸ºè¿™äº›å‘½ä»¤æ˜¯ Go å¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­æ‰€å¿…å¤‡çš„ã€‚</p><p><strong>Go version</strong></p><p>å¼€å§‹ Go é¡¹ç›®å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¡®ä¿å¼€å‘æœºä¸Šå·²ç»å®‰è£…å¥½äº† Go ç¼–è¯‘å™¨ã€‚è¿™å¯ä»¥é€šè¿‡ <a href="https://go.dev/doc/install">https://go.dev/doc/install</a> è¿›è¡Œä¸‹è½½å®‰è£…ã€‚</p><p>é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹å®‰è£…çš„ Go ç‰ˆæœ¬ä¿¡æ¯ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> version</span><br><span class="line"><span class="keyword">go</span> version go1<span class="number">.18</span> darwin/amd64</span><br></pre></td></tr></table></figure><p><strong>Go env</strong></p><p>å¦‚æœæˆ‘ä»¬å¯èƒ½æƒ³æŸ¥çœ‹ä¸€äº› Go ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ GOROOT æˆ–è€… GOPATHã€‚ä½ å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> env</span><br></pre></td></tr></table></figure><p>å½“ä½ æƒ³å¯¹æŸä¸ªç¯å¢ƒå˜é‡è¿›è¡Œæ›´æ”¹ï¼Œä¾‹å¦‚ä¿®æ”¹ Go ä»£ç†ï¼Œä½ å¯ä»¥è¿™æ ·åšã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> env -w GOPROXY=https:<span class="comment">//goproxy.io,direct</span></span><br></pre></td></tr></table></figure><p><strong>go mod</strong></p><p>åœ¨ä½ å¼€å§‹å»ºç«‹ç¬¬ä¸€ä¸ª Go ç¨‹åºæ—¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä½ åº”è¯¥è¿è¡Œè¿™æ ·çš„å‘½ä»¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod init &lt;your project name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod init demo/firstProject</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œé¡¹ç›®æ ¹ç›®å½•å°†å¢åŠ  go.mod æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ cat <span class="keyword">go</span>.mod </span><br><span class="line">module demo/firstProject</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.18</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰å…¶ä»–è¯­è¨€çš„ç»éªŒï¼Œé‚£ä¹ˆ go.mod ç±»ä¼¼äº Python ä¸­çš„ requirements.txtï¼ŒJava ä¸­çš„ pom.xmlï¼Œå®ƒç”¨äºç®¡ç†é¡¹ç›®çš„ä¾èµ–åŒ…ã€‚</p><p><strong>go get</strong></p><p>å½“é¡¹ç›®ä¸­æœ‰å¼•å…¥å¤–éƒ¨åº“ï¼Œåº”è¯¥æ‰§è¡Œ go get å‘½ä»¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get &lt;<span class="keyword">package</span> name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ—¥å¿—åº“ logrusï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¼šå°†è¯¥åº“æºä»£ç ä¸‹è½½è‡³ mod cache ä¸­ï¼Œå¹¶å°†åœ¨ go.mod  æ–‡ä»¶ä¸­è®°å½•è¯¥åº“çš„ä¾èµ–æƒ…å†µã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get github.com/sirupsen/logrus</span><br><span class="line">$ cat <span class="keyword">go</span>.mod </span><br><span class="line">module demo/firstProject</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.18</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">        github.com/sirupsen/logrus v1<span class="number">.9</span><span class="number">.0</span> <span class="comment">// indirect</span></span><br><span class="line">        golang.org/x/sys v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20220715151400</span>-c0bba94af5f8 <span class="comment">// indirect</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>go run&#x2F;build</strong></p><p>å½“æˆ‘ä»¬å·²ç»ç¼–å†™äº†ä¸€äº› Go ä»£ç ï¼Œå¹¶å¸Œæœ›åœ¨æœ¬åœ°è¿è¡Œå®ƒä»¥æŸ¥çœ‹ç¨‹åºè¡¨ç°æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> run .</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ go build å‘½ä»¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> build -o &lt;name of binary&gt; &lt;packages&gt;</span><br><span class="line">$ ./&lt;name of binary&gt;</span><br></pre></td></tr></table></figure><p>ä¸¤ç§å‘½ä»¤æ–¹å¼éƒ½éœ€è¦ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå®è´¨å¹¶æ— ä»€ä¹ˆåŒºåˆ«ã€‚go runåªæ˜¯å°†ç¼–è¯‘å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œåé”€æ¯ï¼Œè€Œ go build æ˜¯å°†å¯æ‰§è¡Œæ–‡ä»¶ä¿ç•™ä¸‹æ¥ï¼Œå¹¶ä¸ç›´æ¥æ‰§è¡Œã€‚</p><p><strong>go test</strong></p><p>å¦‚æœä½ ç¼–å†™äº†ä¸€å †å•å…ƒæµ‹è¯•ä»£ç ï¼ˆåœ¨ä»¥_test.go ç»“å°¾çš„æ–‡ä»¶ä¸­ï¼‰ï¼Œä½ æƒ³è¿è¡Œå®ƒä»¬ï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹è¯­å¥ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br></pre></td></tr></table></figure><p><strong>go mod tidy</strong></p><p>å½“é¡¹ç›®ä¸­å°è¯•å¼•å…¥è¿‡å¤šä¸ªä¸‰æ–¹åŒ…ï¼Œè€Œå…¶ä¸­éƒ¨åˆ†åŒ…æˆ‘ä»¬å¹¶ä¸éœ€è¦äº†ï¼Œé‚£å°±åº”è¯¥ä»ä»£ç ä¾èµ–ä¸­åˆ é™¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod tidy</span><br></pre></td></tr></table></figure><p><strong>go vet</strong></p><p>å½“å®Œæˆäº†åŠŸèƒ½å¼€å‘åï¼Œåº”è¯¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹ç¨‹åºä¸­å¯èƒ½å­˜åœ¨é—®é¢˜çš„ä»£ç ã€‚æ›´å¤š vet çŸ¥è¯†å¯ä»¥æŸ¥çœ‹æ–‡ç« Goå·¥å…·ä¹‹vetâ€”â€”é™æ€è¯Šæ–­å™¨ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> vet</span><br></pre></td></tr></table></figure><p><strong>go fmt</strong></p><p>å½“å®Œæˆäº†åŠŸèƒ½å¼€å‘ï¼Œå‡†å¤‡æäº¤ä»£ç åˆ°å…¬å…±ä»“åº“ã€‚æˆ‘ä»¬åº”è¯¥ç¡®ä¿é¡¹ç›®ä»£ç éµå¾ªç»Ÿä¸€çš„å®˜æ–¹ä»£ç é£æ ¼ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">fmt</span></span></span><br></pre></td></tr></table></figure><p>å½“ç„¶æ›´å¥½çš„æ–¹å¼å…¶å®æ˜¯ä½¿ç”¨æ£€æŸ¥å¥—ä»¶ï¼Œå…·ä½“å¯ä»¥å‚è§æ–‡ç« Gopherä¸€å®šè¦ä¼šçš„ä»£ç è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚</p><p><strong>æ€»ç»“</strong></p><p>Go æä¾›äº†éå¸¸å¤šç®€å•åˆå®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæœ¬æ–‡ä»…ä»‹ç»äº†ä¸€äº›åœ¨é¡¹ç›®å¼€å‘ä¸­æœ€å¯èƒ½è¢«ç”¨åˆ°çš„å‘½ä»¤ã€‚</p><p>æƒ³è·å–æ›´å¤š Go å‘½ä»¤ï¼Ÿå¯ä»¥æ‰§è¡Œ $ go æˆ–è€… $ go tool è·å–å‘½ä»¤åˆ—è¡¨ï¼Œæ‰§è¡Œ go help <command>å¯äº†è§£ç‰¹å®šå‘½ä»¤çš„æ›´å¤šä¿¡æ¯ã€‚</p>]]></content:encoded>
      
      
      
      <category domain="https://ch3nnn.github.io/tags/Go/">Go</category>
      
      
      <comments>https://ch3nnn.github.io/2023/01/02/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84GoCLI%E5%91%BD%E4%BB%A4/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã€Œå›é¡¾2022ï¼Œå±•æœ›2023ã€ â€”â€” å¹´ç»ˆæ€»ç»“</title>
      <link>https://ch3nnn.github.io/2023/01/01/%E6%88%91%E7%9A%842022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</link>
      <guid>https://ch3nnn.github.io/2023/01/01/%E6%88%91%E7%9A%842022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</guid>
      <pubDate>Sun, 01 Jan 2023 15:41:48 GMT</pubDate>
      
        
        
      <description>&lt;blockquote&gt;
&lt;p&gt;è‡´è‡ªå·±ï¼šæŠ˜è…¾ä¸æ¯ Â· ä¹æ­¤ä¸ç–²!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;22-å¹´æ”¶è·&quot;&gt;&lt;a href=&quot;#22-å¹´æ”¶è·&quot; class=&quot;headerlink&quot; title=&quot;22 å¹´æ”¶è·&quot;&gt;&lt;/a&gt;22 å¹´æ”¶è·&lt;/h2&gt;&lt;p&gt;&lt;st</description>
        
      
      
      
      <content:encoded><![CDATA[<blockquote><p>è‡´è‡ªå·±ï¼šæŠ˜è…¾ä¸æ¯ Â· ä¹æ­¤ä¸ç–²!</p></blockquote><h2 id="22-å¹´æ”¶è·"><a href="#22-å¹´æ”¶è·" class="headerlink" title="22 å¹´æ”¶è·"></a>22 å¹´æ”¶è·</h2><p><strong>æŠ€æœ¯ä¸Š</strong></p><ul><li>ç¼–ç¨‹è¯­è¨€æ–¹é¢<ul><li>Golang: ä»å¼€å§‹å­¦ä¹ åˆ°ç°åœ¨çš„ä¸€å¹´æ—¶é—´é‡Œ, å‰å‰ååä¹Ÿå†™äº†äº›ä»£ç , å…¶ä¸­åŒ…æ‹¬ä¸šä½™æ—¶é—´çš„, ä¹Ÿæœ‰äº§å“é¡¹ç›®ä¸­çš„. åœ¨æ‘¸æ»šæ‰“çˆ¬ä¸­å¯¹äºGolangçš„ä½¿ç”¨ç®—æ˜¯å‹‰å¼ºè¾¾åˆ°äº†è¾ƒä¸ºç†Ÿç»ƒçš„çŠ¶æ€.</li></ul></li><li>å¼€æºè´¡çŒ®æ–¹å‘<ul><li>jaywcjlove&#x2F;reference <a href="https://github.com/jaywcjlove/reference">ä¸ºå¼€å‘äººå‘˜åˆ†äº«å¿«é€Ÿå‚è€ƒå¤‡å¿˜æ¸…å•(é€ŸæŸ¥è¡¨)</a></li><li>liangliangyy&#x2F;DjangoBlog <a href="https://github.com/liangliangyy/DjangoBlog">åŸºäºDjangoçš„åšå®¢ç³»ç»Ÿ</a></li><li>Lcry&#x2F;a-sheep-assistant <a href="https://github.com/Lcry/a-sheep-assistant">ç¾Šäº†ä¸ªç¾ŠåŠ©æ‰‹ï¼Œç¾Šäº†ä¸ªç¾Šä¸€é”®é—¯å…³</a></li></ul></li></ul><p><strong>ç”Ÿæ´»ä¸Š</strong></p><ul><li>ç–«æƒ…é˜²æ§<br>ä¿æŒç»¿ç , å°ğŸ‘äººä¸­â€¦ è¿˜ä»¥ä¸ºè‡ªå·±å°±æ˜¯é‚£ä½â€å¤©é€‰ä¹‹å­â€(åˆå¼€å§‹å¹ç‰›çš®).</li><li>ç”Ÿæ´»æƒ…æ„Ÿ<br>ç«¯åˆèŠ‚å‰å¸¦å¥³æœ‹å‹å›å®¶, çˆ¶æ¯éƒ½æ„Ÿè§‰å¾ˆæ»¡æ„, ç”Ÿæ´»å¾ˆå¹¸ç¦, å¶å°”ä¼šåµåµå˜´æ¯•ç«Ÿç”Ÿæ´»éœ€è¦å¢åŠ äº›ä¹è¶£å˜›(å“ˆå“ˆå“ˆ).</li></ul><p><strong>å·¥ä½œä¸Š</strong></p><ul><li>ä»äº’è”ç½‘åŒ»ç–—åˆ°å·¥æ§å®‰å…¨è¡Œä¸š, å·¥ä½œå†…å®¹æ²¡æœ‰ä»»ä½•å˜åŒ–(å°±æ˜¯æ’¸ç æ¬ç –ğŸ§±)</li></ul><h2 id="23å¹´å±•æœ›"><a href="#23å¹´å±•æœ›" class="headerlink" title="23å¹´å±•æœ›"></a>23å¹´å±•æœ›</h2><p>2023å¹´æ˜¯æ–°çš„ä¸€å¹´ï¼Œæ–°çš„ä¸€å¹´å°±ä¼šæœ‰æ–°çš„flagã€‚æ–°çš„ä¸€å¹´æˆ‘è¦ä»¥ä¸‹å‡ ä»¶äº‹:</p><ul><li>ä¿æŒæŒç»­å­¦ä¹ çš„æ¿€æƒ…ã€æ€åº¦</li><li>æŒç»­å¼€æºè´¡çŒ®</li><li>çœŸçš„éœ€è¦è¿åŠ¨(æ„Ÿè§‰è‡ªå·±è¦åºŸäº†)</li><li>æ„Ÿæƒ…ä¸Šè¿˜æ˜¯éœ€è¦æ›´åŠ è°¦è®©</li><li>â€¦</li></ul><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><ul><li>æœ€å, æœ€å, Happy New Year â€¦ æˆ–è€…è‡³å°‘, å¹³å¹³å®‰å®‰åº¦è¿‡æ–°çš„ä¸€å¹´</li><li>å„ä½, ç»§ç»­åŠ æ²¹å§! å†²å†²å†²!</li></ul>]]></content:encoded>
      
      
      
      <category domain="https://ch3nnn.github.io/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">å¹´åº¦æ€»ç»“</category>
      
      
      <comments>https://ch3nnn.github.io/2023/01/01/%E6%88%91%E7%9A%842022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
